{"version":3,"sources":["hooks/useColorScheme.ts","constants/Colors.ts","navigation/LinkingConfiguration.ts","hooks/useTheme.ts","components/Themed.tsx","hooks/useElapsedTime.ts","components/ElapsedTime.tsx","services/HapticService.ts","store/LotideContext.ts","services/LotideService.ts","components/VoteCounter.tsx","components/ContentDisplay.tsx","components/ActorDisplay.tsx","components/PostDisplay.tsx","hooks/lotide.ts","hooks/useRefreshableData.ts","constants/KnownHosts.ts","services/StorageService.ts","components/HostList.tsx","components/Login.tsx","components/SuggestLogin.tsx","screens/FeedScreen.tsx","components/CommunityFinder.tsx","screens/SearchScreen.tsx","screens/ProfileScreen.tsx","screens/NewPostScreen.tsx","screens/SettingsScreen.tsx","screens/RegisterScreen.tsx","screens/CommunityScreen.tsx","screens/ReplyScreen.tsx","components/RepliesDisplay.tsx","screens/ModalScreen.tsx","screens/NotFoundScreen.tsx","transformers/NotificationTransformer.ts","screens/NotificationScreen.tsx","screens/NewCommunity.tsx","navigation/index.tsx","App.tsx","hooks/useCachedResources.ts","assets/fonts/SpaceMono-Regular.ttf"],"names":["useColorScheme","_useColorScheme","PlatformColor","Platform","OS","require","light","buildIOS","tint","secondaryTint","text","secondaryText","placeholderText","background","secondaryBackground","tertiaryBackground","tabIconDefault","tabIconSelected","red","orange","yellow","green","teal","blue","indigo","purple","dark","linking","prefixes","Linking","config","screens","Root","TabOne","TabOneScreen","TabTwo","TabTwoScreen","Modal","NotFound","useTheme","colorScheme","Colors","useThemeColor","props","colorName","theme","colorFromProps","Text","style","lightColor","darkColor","otherProps","color","View","backgroundColor","TextInput","placeholderTextColor","themeStyle","paddingHorizontal","paddingVertical","borderRadius","useElapsedTime","time","useMemo","seconds","Math","round","Date","now","parse","minutes","hours","days","weeks","calculateElapsedTime","ElapsedTime","elapsedTime","styles","root","name","size","StyleSheet","create","impactAsync","a","async","Haptics","defaultLotideContext","apiUrl","login","undefined","createContext","ctx","setContext","register","username","password","email","lotideRequest","email_address","then","data","json","getPost","postId","getReply","replyId","getPostReplies","page","getReplyReplies","getCommunities","onlyFollowing","getCommunity","communityId","getUserData","userId","followCommunity","try_wait_for_accept","editCommunity","id","description","getInstanceInfo","method","path","body","noLogin","fetch","headers","buildHeaders","JSON","stringify","res","ok","catch","e","console","error","Authorization","token","VoteCounter","useState","isUpvoted","setIsUpvoted","useContext","LotideContext","isUpvotedByAPI","post","your_vote","toggleVote","Light","LotideService","Alert","alert","useEffect","scoreColor","shouldAddOne","shouldSubtractOne","Pressable","onPress","hitSlop","score","display","flexDirection","alignItems","fontSize","minWidth","ContentDisplay","html","contentHtml","markdown","contentMarkdown","replace","trim","contentText","value","renderNode","stylesheet","textComponentProps","addLineBreaks","onLinkLongPress","url","node","index","siblings","parent","defaultRenderer","includes","key","children","ActorDisplay","colorize","showHost","shouldDoIfLocal","when","local","shouldColorize","shouldShowHost","nameStyle","styleName","host","styleHost","newLine","fontWeight","PostDisplay","imgAspect","setImgAspect","isImage","href","some","ext","endsWith","title","sticky","Image","image","aspectRatio","source","uri","onLoad","event","max","nativeEvent","width","height","link","Medium","openURL","showHtmlContent","content_html","content_text","foot","navigation","navigate","community","by","author","showCommunityHost","created","footText","replies_count_total","item","marginVertical","marginHorizontal","padding","resizeMode","justifyContent","actions","usePosts","sort","inYourFollows","posts","setPosts","setPage","nextPage","setNextPage","loadingPage","setLoadingPage","reloadId","setReloadId","effect","deps","refreshCount","setRefreshCount","isLoading","setIsLoading","c","useRefreshableData","stopLoading","filter","x","join","p","items","next_page","refresh","KnownHosts","domain","lotideContext","AsyncStorage","getItem","ctxStr","lotideContextKV","user","serviceKV","store","k","query","listKeys","remove","storeStr","v","setItem","Object","keys","HostList","hostText","setHostText","knownHosts","setKnowHosts","existingProfiles","setExistingProfiles","map","h","i","d","hosts","h2","j","instanceInfo","object","entries","ScrollView","length","subtitle","split","paddingBottom","placeholder","onChangeText","onSubmitEditing","onSelect","toLowerCase","keyboardType","returnKeyType","enabled","software","version","borderBottomWidth","borderColor","borderBottomColor","fontFamily","renderItem","flex","marginBottom","Login","isRegistering","setIsRegistering","setUsername","setPassword","Keyboard","dismiss","KeyboardAvoidingView","behavior","hostName","loginRegister","input","secureTextEntry","actionButtons","Button","onGoBack","SuggestLogin","setHostName","setDomain","container","FeedScreen","route","params","isLoadingPosts","refreshPosts","loadNextPage","hasLogin","log","FlatList","keyExtractor","refreshing","onRefresh","onEndReachedThreshold","onEndReached","Item","onLongPress","Heavy","CommunityFinder","communities","setCommunities","filterText","setFilterText","communitiesToDisplay","onlyWhenTyping","you_are_moderator","your_follow","accepted","marginLeft","contentContainerStyle","list","marginTop","SearchScreen","ProfileScreen","profile","setProfile","profileList","setProfileList","isEditing","setIsEditing","StorageService","header","avatar","accessibilityLabel","editView","editViewText","multiline","editViewActionButtons","altProfileButton","paddingTop","followingTitle","margin","separator","inputContainer","borderWidth","NewPostScreen","setCommunity","setTitle","setLink","content","setContent","addListener","TouchableWithoutFeedback","textContentType","content_markdown","SettingsScreen","RegisterScreen","setHost","passwordConf","setPasswordConf","fHost","pop","CommunityScreen","isFollowing","ReplyScreen","setText","scrollRef","useRef","type","ref","onFocus","current","scrollToEnd","animated","minHeight","RepliesDisplay","replies","layer","highlightedReplies","nextPageData","setNextPageData","layerColors","reply","ReplyDisplay","React","showChildren","setShowChildren","paddingLeft","borderTopWidth","borderTopColor","s","borderLeftWidth","ModalScreen","setHighlightedReplies","focusId","setFocusId","setReplies","useReplies","Share","share","message","StatusBar","currentHeight","NotFoundScreen","TouchableOpacity","linkText","originFromComment","commentId","comment","originFromPost","NotificationScreen","notifications","setNotifications","isRefreshing","setIsRefreshing","promises","n","notification","origin","unseen","transformToFullNotification","Promise","all","level1","level2","thin","NewCommunityScreen","setName","setDescription","Navigation","NavigationContainer","LinkingConfiguration","DarkTheme","DefaultTheme","RootNavigator","Stack","createNativeStackNavigator","Navigator","Screen","component","BottomTabNavigator","options","headerShown","Group","screenOptions","presentation","BottomTab","createBottomTabNavigator","setSort","initialRouteName","tabBarActiveTintColor","tabBarShowLabel","initialParams","tabBarIcon","TabBarIcon","headerRight","ActionSheetIOS","showActionSheetWithOptions","cancelButtonIndex","buttonIndex","newSort","opacity","pressed","hot","new","marginRight","headerLeft","App","isLoadingComplete","setLoadingComplete","SplashScreen","Font","FontAwesome","font","warn","useCachedResources","applyNewContext","Provider","module","exports"],"mappings":"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","file":"static/js/app.c80cd886.chunk.js","sourcesContent":["import { ColorSchemeName, useColorScheme as _useColorScheme } from 'react-native';\n\n// The useColorScheme value is always either light or dark, but the built-in\n// type suggests that it can be null. This will not happen in practice, so this\n// makes it a bit easier to work with.\nexport default function useColorScheme(): NonNullable<ColorSchemeName> {\n  return _useColorScheme() as NonNullable<ColorSchemeName>;\n}\n","import { ColorValue, Platform } from \"react-native\";\nconst PlatformColor =\n  Platform.OS === \"web\" ? () => {} : require(\"react-native\").PlatformColor;\n\nexport interface ColorsObject {\n  tint: ColorValue;\n  secondaryTint: ColorValue;\n  text: ColorValue;\n  secondaryText: ColorValue;\n  placeholderText: ColorValue;\n  background: ColorValue;\n  secondaryBackground: ColorValue;\n  tertiaryBackground: ColorValue;\n  tabIconDefault: ColorValue;\n  tabIconSelected: ColorValue;\n\n  red: ColorValue;\n  orange: ColorValue;\n  yellow: ColorValue;\n  green: ColorValue;\n  teal: ColorValue;\n  blue: ColorValue;\n  indigo: ColorValue;\n  purple: ColorValue;\n}\n\nexport default {\n  light: Platform.OS === \"ios\" ? buildIOS() : buildAltLight(),\n  dark: Platform.OS === \"ios\" ? buildIOS() : buildAltDark(),\n};\n\nfunction buildIOS(): ColorsObject {\n  return {\n    tint: PlatformColor(\"systemOrange\"),\n    secondaryTint: PlatformColor(\"systemPurple\"),\n    text: PlatformColor(\"label\"),\n    secondaryText: PlatformColor(\"secondaryLabel\"),\n    placeholderText: PlatformColor(\"placeholderText\"),\n    background: PlatformColor(\"systemBackground\"),\n    secondaryBackground: PlatformColor(\"secondarySystemBackground\"),\n    tertiaryBackground: PlatformColor(\"tertiarySystemBackground\"),\n    tabIconDefault: PlatformColor(\"secondaryLabel\"),\n    tabIconSelected: PlatformColor(\"systemOrange\"),\n\n    red: PlatformColor(\"systemRed\"),\n    orange: PlatformColor(\"systemOrange\"),\n    yellow: PlatformColor(\"systemYellow\"),\n    green: PlatformColor(\"systemGreen\"),\n    teal: PlatformColor(\"systemTeal\"),\n    blue: PlatformColor(\"systemBlue\"),\n    indigo: PlatformColor(\"systemIndigo\"),\n    purple: PlatformColor(\"systemPurple\"),\n  };\n}\n\nfunction buildAltLight(): ColorsObject {\n  return {\n    tint: \"orange\",\n    secondaryTint: \"purple\",\n    text: \"#111\",\n    secondaryText: \"#333\",\n    placeholderText: \"#444\",\n    background: \"#fff\",\n    secondaryBackground: \"#eee\",\n    tertiaryBackground: \"#ccc\",\n    tabIconDefault: \"#ccc\",\n    tabIconSelected: \"orange\",\n\n    red: \"red\",\n    orange: \"orange\",\n    yellow: \"yellow\",\n    green: \"green\",\n    teal: \"eeal\",\n    blue: \"blue\",\n    indigo: \"indigo\",\n    purple: \"purple\",\n  };\n}\n\nfunction buildAltDark(): ColorsObject {\n  return {\n    tint: \"orange\",\n    secondaryTint: \"purple\",\n    text: \"#fff\",\n    secondaryText: \"#666\",\n    placeholderText: \"#aaa\",\n    background: \"#111\",\n    secondaryBackground: \"#222\",\n    tertiaryBackground: \"#222\",\n    tabIconDefault: \"#ccc\",\n    tabIconSelected: \"orange\",\n\n    red: \"red\",\n    orange: \"orange\",\n    yellow: \"yellow\",\n    green: \"green\",\n    teal: \"eeal\",\n    blue: \"#68f\",\n    indigo: \"indigo\",\n    purple: \"purple\",\n  };\n}\n","/**\n * Learn more about deep linking with React Navigation\n * https://reactnavigation.org/docs/deep-linking\n * https://reactnavigation.org/docs/configuring-links\n */\n\nimport { LinkingOptions } from '@react-navigation/native';\nimport * as Linking from 'expo-linking';\n\nimport { RootStackParamList } from '../types';\n\nconst linking: LinkingOptions<RootStackParamList> = {\n  prefixes: [Linking.makeUrl('/')],\n  config: {\n    screens: {\n      Root: {\n        screens: {\n          TabOne: {\n            screens: {\n              TabOneScreen: 'one',\n            },\n          },\n          TabTwo: {\n            screens: {\n              TabTwoScreen: 'two',\n            },\n          },\n        },\n      },\n      Modal: 'modal',\n      NotFound: '*',\n    },\n  },\n};\n\nexport default linking;\n","import Colors from \"../constants/Colors\";\nimport useColorScheme from \"./useColorScheme\";\n\nexport default function useTheme() {\n  const colorScheme = useColorScheme();\n  return Colors[colorScheme];\n}\n","/**\n * Learn more about Light and Dark modes:\n * https://docs.expo.io/guides/color-schemes/\n */\n\nimport * as React from \"react\";\nimport {\n  ColorValue,\n  Text as DefaultText,\n  View as DefaultView,\n  TextInput as DefaultTextInput,\n} from \"react-native\";\n\nimport Colors from \"../constants/Colors\";\nimport useColorScheme from \"../hooks/useColorScheme\";\nimport useTheme from \"../hooks/useTheme\";\n\nexport function useThemeColor(\n  props: { light?: ColorValue; dark?: ColorValue },\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark,\n): ColorValue {\n  const theme = useColorScheme();\n  const colorFromProps = props[theme];\n\n  if (colorFromProps) {\n    return colorFromProps;\n  } else {\n    return Colors[theme][colorName];\n  }\n}\n\ntype ThemeProps = {\n  lightColor?: ColorValue;\n  darkColor?: ColorValue;\n};\n\nexport type TextProps = ThemeProps & DefaultText[\"props\"];\nexport type ViewProps = ThemeProps & DefaultView[\"props\"];\n\nexport function Text(props: TextProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, \"text\");\n\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\n}\n\nexport function View(props: ViewProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const backgroundColor = useThemeColor(\n    { light: lightColor, dark: darkColor },\n    \"background\",\n  );\n\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\n}\n\nexport function TextInput(props: DefaultTextInput[\"props\"]) {\n  const { style, placeholderTextColor, ...otherProps } = props;\n  const theme = useTheme();\n\n  const themeStyle = {\n    backgroundColor: theme.secondaryBackground,\n    paddingHorizontal: 10,\n    paddingVertical: 5,\n    borderRadius: 8,\n    color: theme.text,\n  };\n  return (\n    <DefaultTextInput\n      style={[themeStyle, style]}\n      placeholderTextColor={placeholderTextColor || theme.placeholderText}\n      {...otherProps}\n    />\n  );\n}\n","import { useMemo } from \"react\";\n\nexport default function useElapsedTime(time: string): string {\n  return useMemo(() => calculateElapsedTime(time), [time]);\n}\n\nexport function calculateElapsedTime(time: string): string {\n  const seconds = Math.round((Date.now() - Date.parse(time)) / 1000);\n  const minutes = Math.round(seconds / 60);\n  const hours = Math.round(minutes / 60);\n  const days = Math.round(hours / 24);\n  const weeks = Math.round(days / 7);\n  const displayTime =\n    (minutes < 60 && `${minutes}m`) ||\n    (hours < 24 && `${hours}h`) ||\n    (days < 7 && `${days}d`) ||\n    `${weeks}w`;\n  return displayTime;\n}\n","import { Ionicons as Icon } from \"@expo/vector-icons\";\nimport React from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { Text } from \"./Themed\";\nimport useElapsedTime from \"../hooks/useElapsedTime\";\n\nexport interface ElapsedTimeProps {\n  time: string;\n}\n\nexport default function ElapsedTime(props: ElapsedTimeProps) {\n  const elapsedTime = useElapsedTime(props.time);\n  return (\n    <Text style={styles.root}>\n      <Icon name=\"time-outline\" size={14} /> {elapsedTime}\n    </Text>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {},\n});\n","import { Platform } from \"react-native\";\nimport * as Haptics from \"expo-haptics\";\n\nexport { ImpactFeedbackStyle } from \"expo-haptics\";\n\nexport async function impactAsync(style: Haptics.ImpactFeedbackStyle) {\n  if (Platform.OS === \"web\") return;\n  await Haptics.impactAsync(style);\n}\n","import { createContext } from \"react\";\n\nexport const defaultLotideContext: LotideContext = {\n  apiUrl: \"https://hoot.goldandblack.xyz/api/unstable\",\n  login: undefined,\n};\n\nexport default createContext({\n  ctx: defaultLotideContext,\n  setContext: (ctx: LotideContext) => {},\n});\n","export type RequestMethod = \"GET\" | \"POST\" | \"PUT\" | \"PATCH\" | \"DELETE\";\n\n// ** UTILS **\n\nexport function hasLogin(ctx: LotideContext): boolean {\n  return !!ctx.apiUrl && !!ctx.login;\n}\n\n// ** API FUNCTIONS **\n\nexport async function login(\n  apiUrl: string,\n  username: string,\n  password: string,\n): Promise<Login> {\n  return lotideRequest(\n    { apiUrl },\n    \"POST\",\n    \"logins\",\n    { username, password },\n    true,\n  ).then(data => data.json());\n}\n\nexport async function register(\n  apiUrl: string,\n  username: string,\n  password: string,\n  email?: string,\n): Promise<Login> {\n  return lotideRequest(\n    { apiUrl },\n    \"POST\",\n    \"users\",\n    {\n      username,\n      password,\n      email_address: email,\n      login: true,\n    },\n    true,\n  ).then(data => data.json());\n}\n\nexport async function logout(ctx: LotideContext) {\n  return lotideRequest(ctx, \"DELETE\", \"logins/~current\");\n}\n\nexport async function getNotifications(\n  ctx: LotideContext,\n): Promise<UserNotification[]> {\n  return lotideRequest(ctx, \"GET\", \"users/~me/notifications\").then(data =>\n    data.json(),\n  );\n}\n\nexport async function getPost(\n  ctx: LotideContext,\n  postId: PostId,\n): Promise<Post> {\n  return lotideRequest(ctx, \"GET\", `posts/${postId}`, undefined, true).then(\n    data => data.json(),\n  );\n}\n\nexport async function getPosts(\n  ctx: LotideContext,\n  page: string | null,\n  sort: SortOption = \"hot\",\n  inYourFollows?: boolean,\n  communityId?: CommunityId,\n): Promise<Paged<Post>> {\n  const url = [\n    page === null ? `posts?sort=${sort}` : `posts?page=${page}&sort=${sort}`,\n    `include_your=true`,\n    inYourFollows !== undefined && `in_your_follows=${inYourFollows}`,\n    communityId && `community=${communityId}`,\n  ]\n    .filter(x => x)\n    .join(\"&\");\n  return lotideRequest(ctx, \"GET\", url).then(data => data.json());\n}\n\nexport async function submitPost(\n  ctx: LotideContext,\n  post: NewPost,\n): Promise<{ id: PostId }> {\n  return lotideRequest(ctx, \"POST\", \"posts\", post).then(data => data.json());\n}\n\nexport async function getReply(\n  ctx: LotideContext,\n  replyId: ReplyId,\n): Promise<Reply> {\n  return lotideRequest(ctx, \"GET\", `comments/${replyId}`, undefined, true).then(\n    data => data.json(),\n  );\n}\n\nexport async function getPostReplies(\n  ctx: LotideContext,\n  postId: PostId,\n  page?: string,\n): Promise<Paged<Reply>> {\n  return lotideRequest(\n    ctx,\n    \"GET\",\n    `posts/${postId}/replies?limit=10` + (page ? `&page=${page}` : \"\"),\n    undefined,\n    true,\n  ).then(data => data.json());\n}\n\nexport async function getReplyReplies(\n  ctx: LotideContext,\n  replyId: ReplyId,\n  page?: string,\n): Promise<Paged<Reply>> {\n  return lotideRequest(\n    ctx,\n    \"GET\",\n    `comments/${replyId}/replies?limit=10` + (page ? `&page=${page}` : \"\"),\n    undefined,\n    true,\n  ).then(data => data.json());\n}\n\nexport async function replyToPost(\n  ctx: LotideContext,\n  postId: PostId,\n  content: string,\n): Promise<{ id: number }> {\n  return lotideRequest(ctx, \"POST\", `posts/${postId}/replies`, {\n    content_markdown: content,\n  }).then(data => data.json());\n}\n\nexport async function replyToReply(\n  ctx: LotideContext,\n  replyId: number,\n  content: string,\n): Promise<{ id: number }> {\n  return lotideRequest(ctx, \"POST\", `comments/${replyId}/replies`, {\n    content_markdown: content,\n  }).then(data => data.json());\n}\n\nexport async function getCommunities(\n  ctx: LotideContext,\n  onlyFollowing: boolean = false,\n  page?: string,\n): Promise<Paged<Community>> {\n  return lotideRequest(\n    ctx,\n    \"GET\",\n    `communities?include_your=true&limit=100${\n      onlyFollowing ? \"&your_follow.accepted=true\" : \"\"\n    }${page ? `&page=${page}` : \"\"}`,\n  )\n    .then(data => data.json())\n    .then(data => {\n      return data;\n    });\n}\n\nexport async function getCommunity(\n  ctx: LotideContext,\n  communityId: CommunityId,\n): Promise<Community> {\n  return lotideRequest(\n    ctx,\n    \"GET\",\n    `communities/${communityId}?include_your=true`,\n  ).then(data => data.json());\n}\n\nexport async function getUserData(ctx: LotideContext, userId: number) {\n  return lotideRequest(ctx, \"GET\", `users/${userId}`, undefined, true).then(\n    data => data.json(),\n  );\n}\n\nexport async function followCommunity(\n  ctx: LotideContext,\n  communityId: number,\n): Promise<{ accepted: boolean }> {\n  return lotideRequest(ctx, \"POST\", `communities/${communityId}/follow`, {\n    try_wait_for_accept: true,\n  }).then(data => data.json());\n}\n\nexport async function unfollowCommunity(\n  ctx: LotideContext,\n  communityId: number,\n) {\n  return lotideRequest(ctx, \"POST\", `communities/${communityId}/unfollow`);\n}\n\nexport async function newCommunity(\n  ctx: LotideContext,\n  name: string,\n): Promise<{ community: { id: CommunityId } }> {\n  return lotideRequest(ctx, \"POST\", \"communities\", { name }).then(data =>\n    data.json(),\n  );\n}\n\nexport async function editCommunity(\n  ctx: LotideContext,\n  id: CommunityId,\n  description: string,\n) {\n  return lotideRequest(ctx, \"PATCH\", `communities/${id}`, { description });\n}\n\nexport async function applyVote(ctx: LotideContext, postId: number) {\n  return lotideRequest(ctx, \"PUT\", `posts/${postId}/your_vote`);\n}\n\nexport async function removeVote(ctx: LotideContext, postId: number) {\n  return lotideRequest(ctx, \"DELETE\", `posts/${postId}/your_vote`);\n}\n\nexport async function getInstanceInfo(\n  ctx: LotideContext,\n): Promise<InstanceInfo> {\n  return lotideRequest(ctx, \"GET\", \"instance\", undefined, true).then(data =>\n    data.json(),\n  );\n}\n\n// ** UTIL **\n\nexport async function lotideRequest(\n  ctx: LotideContext,\n  method: RequestMethod,\n  path: string,\n  body?: any,\n  noLogin: boolean = false,\n): Promise<any | undefined> {\n  if (!ctx.apiUrl) throw \"No API url\";\n  if (!noLogin && ctx.login == undefined) throw \"Not logged in\";\n  return fetch(`${ctx.apiUrl}/${path}`, {\n    method,\n    headers: buildHeaders(ctx),\n    body: body !== undefined ? JSON.stringify(body) : undefined,\n  })\n    .then(async res => {\n      if (res.ok) {\n        return res;\n      } else {\n        throw await res.text();\n      }\n    })\n    .catch(e => {\n      console.error(\n        `Lotide Service Error: ${method} ${ctx.apiUrl}/${path}\\n${e}`,\n        ctx,\n      );\n      throw e;\n    });\n}\n\nexport function buildHeaders(ctx: LotideContext): HeadersInit | undefined {\n  return ctx.login !== undefined\n    ? {\n        Authorization: `Bearer ${ctx.login.token}`,\n        \"Content-Type\": \"application/json\",\n      }\n    : undefined;\n}\n","import { Ionicons as Icon } from \"@expo/vector-icons\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Alert, Pressable, StyleSheet } from \"react-native\";\nimport { View, Text } from \"./Themed\";\nimport useTheme from \"../hooks/useTheme\";\nimport * as Haptics from \"../services/HapticService\";\nimport LotideContext from \"../store/LotideContext\";\nimport * as LotideService from \"../services/LotideService\";\n\nexport interface VoteCounterProps {\n  post: Post;\n  isUpvoted: boolean;\n  onVote?: (isUpvote: boolean) => void;\n}\n\nexport default function VoteCounter(props: VoteCounterProps) {\n  const [isUpvoted, setIsUpvoted] = useState(false);\n  const theme = useTheme();\n  const ctx = useContext(LotideContext).ctx;\n\n  const isUpvotedByAPI =\n    props.post.your_vote !== null && props.post.your_vote !== undefined;\n\n  useEffect(() => setIsUpvoted(isUpvotedByAPI), [props.post.your_vote]);\n\n  function toggleVote() {\n    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n\n    if (ctx.login === undefined) {\n      Alert.alert(\n        \"Login to like\",\n        \"Leave a like when you login to a community\",\n      );\n      return;\n    }\n\n    if (isUpvoted) {\n      LotideService.removeVote(ctx, props.post.id).then(() =>\n        setIsUpvoted(false),\n      );\n    } else {\n      LotideService.applyVote(ctx, props.post.id).then(() =>\n        setIsUpvoted(true),\n      );\n    }\n  }\n\n  let scoreColor = theme.text;\n\n  if (isUpvoted) {\n    scoreColor = theme.red;\n  }\n\n  const shouldAddOne = isUpvoted && !isUpvotedByAPI;\n  const shouldSubtractOne = !isUpvoted && isUpvotedByAPI;\n\n  return (\n    <Pressable onPress={() => toggleVote()} hitSlop={7}>\n      <View style={styles.root}>\n        <Icon\n          name={isUpvoted ? \"heart\" : \"heart-outline\"}\n          color={scoreColor}\n          size={25}\n        />\n\n        <Text style={{ ...styles.score, color: scoreColor }}>{`  ${\n          props.post.score + +shouldAddOne - +shouldSubtractOne\n        }  `}</Text>\n      </View>\n    </Pressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  score: {\n    fontSize: 18,\n    minWidth: 28,\n  },\n});\n","import React, { ReactNode, useMemo } from \"react\";\nimport { Text } from \"./Themed\";\nimport HTMLView, { HTMLViewNode } from \"react-native-htmlview\";\nimport useTheme from \"../hooks/useTheme\";\nimport { Alert } from \"react-native\";\n\nexport interface ContentDisplayProps {\n  contentHtml?: string;\n  contentText?: string;\n  contentMarkdown?: string;\n}\n\nexport default function ContentDisplay(props: ContentDisplayProps) {\n  const theme = useTheme();\n  const html = useMemo(\n    () =>\n      props.contentHtml ||\n      parseMarkdown(props.contentMarkdown) ||\n      `<p>${props.contentText}</p>`,\n    [props.contentHtml, props.contentMarkdown, props.contentText],\n  );\n  return useMemo(\n    () => (\n      <HTMLView\n        value={html.replace(/\\n/g, \"\")}\n        renderNode={renderNode}\n        stylesheet={{\n          a: { color: theme.secondaryTint },\n        }}\n        textComponentProps={{ style: { color: theme.text } }}\n        addLineBreaks={false}\n        onLinkLongPress={url => Alert.alert(\"Link\", url)}\n      />\n    ),\n    [html],\n  );\n}\n\nfunction renderNode(\n  node: HTMLViewNode,\n  index: number,\n  siblings: HTMLViewNode,\n  parent: HTMLViewNode,\n  defaultRenderer: (node: HTMLViewNode, parent: HTMLViewNode) => ReactNode,\n) {\n  if ([\"iframe\", \"img\", \"hr\", \"script\"].includes(node.name || \"\")) {\n    return null;\n  }\n  if (node.name === \"li\") {\n    return (\n      <Text key={index}>\n        {\"\\u2022 \"}\n        {defaultRenderer((node as any).children, parent)}\n        {\"\\n\"}\n      </Text>\n    );\n  }\n  return undefined;\n}\n\nfunction parseMarkdown(markdown?: string): string | undefined {\n  if (markdown === \"\" || markdown === undefined) return undefined;\n  return markdown\n    .replace(/^### (.*$)/gim, \"<h3>$1</h3>\")\n    .replace(/^## (.*$)/gim, \"<h2>$1</h2>\")\n    .replace(/^# (.*$)/gim, \"<h1>$1</h1>\")\n    .replace(/^\\> (.*$)/gim, \"<blockquote>$1</blockquote>\")\n    .replace(/\\*\\*(.*)\\*\\*/gim, \"<b>$1</b>\")\n    .replace(/\\*(.*)\\*/gim, \"<i>$1</i>\")\n    .replace(/!\\[(.*?)\\]\\((.*?)\\)/gim, \"<img alt='$1' src='$2' />\")\n    .replace(/\\[(.*?)\\]\\((.*?)\\)/gim, \"<a href='$2'>$1</a>\")\n    .replace(/\\n$/gim, \"<br />\")\n    .trim();\n}\n","import React from \"react\";\nimport { StyleSheet, TextStyle } from \"react-native\";\nimport { Text } from \"./Themed\";\nimport useTheme from \"../hooks/useTheme\";\n\nexport interface ActorDisplayProps {\n  name: string;\n  host: string;\n  local: boolean;\n  colorize?: \"always\" | \"never\" | \"only_foreign\";\n  showHost?: \"always\" | \"never\" | \"only_foreign\";\n  newLine?: boolean;\n  style?: TextStyle;\n  styleName?: TextStyle;\n  styleHost?: TextStyle;\n}\n\nexport default function ActorDisplay(props: ActorDisplayProps) {\n  const theme = useTheme();\n  const colorize = props.colorize || \"never\";\n  const showHost = props.showHost || \"only_foreign\";\n\n  const shouldDoIfLocal = (\n    when: \"always\" | \"never\" | \"only_foreign\",\n    local: boolean,\n  ) => {\n    if (when === \"always\") return true;\n    if (when === \"never\") return false;\n    return !local;\n  };\n\n  const shouldColorize = shouldDoIfLocal(colorize, props.local);\n  const shouldShowHost = shouldDoIfLocal(showHost, props.local);\n\n  const nameStyle = shouldColorize\n    ? { color: props.local ? theme.blue : theme.green }\n    : {};\n\n  return (\n    <Text style={[styles.root, props.style]}>\n      <Text style={[styles.name, nameStyle, props.styleName]}>\n        {props.name}\n      </Text>\n      {shouldShowHost && (\n        <Text\n          style={[styles.host, { color: theme.secondaryText }, props.styleHost]}\n        >\n          {props.newLine && \"\\n\"}\n          {!props.newLine && \"@\"}\n          {props.host}\n        </Text>\n      )}\n    </Text>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {},\n  name: {\n    fontWeight: \"500\",\n  },\n  host: {\n    fontWeight: \"200\",\n  },\n});\n","import Icon from \"@expo/vector-icons/Ionicons\";\nimport { openURL } from \"expo-linking\";\nimport React, { useMemo, useState } from \"react\";\nimport { StyleSheet, Image, Pressable } from \"react-native\";\nimport ElapsedTime from \"./ElapsedTime\";\nimport VoteCounter from \"./VoteCounter\";\nimport { Text, View } from \"../components/Themed\";\nimport useTheme from \"../hooks/useTheme\";\nimport * as Haptics from \"../services/HapticService\";\nimport ContentDisplay from \"./ContentDisplay\";\nimport ActorDisplay from \"./ActorDisplay\";\n\nexport interface PostDisplayProps {\n  post: Post;\n  navigation: any;\n  showHtmlContent?: boolean;\n  showCommunityHost?: boolean;\n}\n\nexport default function PostDisplay(props: PostDisplayProps) {\n  const [imgAspect, setImgAspect] = useState(1);\n  const isImage = useMemo(() => isImageUrl(props.post.href), [props.post.href]);\n  const theme = useTheme();\n\n  const post = props.post;\n\n  return (\n    <View>\n      <Text style={styles.title}>\n        {props.post.sticky && (\n          <>\n            <Icon name=\"pin\" size={25} color={theme.secondaryTint} />{\" \"}\n          </>\n        )}\n        {props.post.title}\n      </Text>\n      {props.post.href &&\n        (isImage ? (\n          <Image\n            style={{\n              ...styles.image,\n              aspectRatio: imgAspect,\n              backgroundColor: theme.secondaryBackground,\n            }}\n            source={{\n              uri: props.post.href,\n            }}\n            onLoad={event =>\n              setImgAspect(\n                Math.max(\n                  event.nativeEvent.source.width /\n                    event.nativeEvent.source.height,\n                  0.5,\n                ),\n              )\n            }\n          />\n        ) : (\n          <Pressable\n            style={[\n              styles.link,\n              { backgroundColor: theme.secondaryBackground },\n            ]}\n            onPress={() => {\n              Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n              if (props.post.href) {\n                openURL(props.post.href);\n              }\n            }}\n          >\n            <Text>{props.post.href}</Text>\n          </Pressable>\n        ))}\n      {props.showHtmlContent && !!props.post.content_html && (\n        <View style={{ paddingHorizontal: 15 }}>\n          <ContentDisplay\n            contentHtml={props.post.content_html}\n            contentText={props.post.content_text}\n          />\n        </View>\n      )}\n      <View style={styles.foot}>\n        <View>\n          <Pressable\n            hitSlop={8}\n            onPress={() =>\n              props.navigation.navigate(\"Community\", {\n                community: props.post.community,\n              })\n            }\n          >\n            <ActorDisplay\n              name={post.community.name}\n              host={post.community.host}\n              local={post.community.local}\n              showHost={\"only_foreign\"}\n              colorize={\"never\"}\n              newLine={true}\n            />\n          </Pressable>\n          <Text style={styles.by}>by {props.post.author.username}</Text>\n          {props.showCommunityHost && (\n            <Text style={styles.by}>on {props.post.community.host}</Text>\n          )}\n        </View>\n        <View>\n          <ElapsedTime time={props.post.created} />\n        </View>\n        <View>\n          <Text style={styles.footText}>\n            <Icon name=\"chatbubble-outline\" size={12} />{\" \"}\n            {props.post.replies_count_total}\n          </Text>\n        </View>\n        <View>\n          <VoteCounter post={props.post} isUpvoted={false} />\n        </View>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  item: {\n    marginVertical: 0,\n    marginHorizontal: 0,\n  },\n  title: {\n    fontSize: 20,\n    padding: 15,\n  },\n  contentText: {\n    fontSize: 12,\n  },\n  link: {\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    borderRadius: 5,\n    marginHorizontal: 15,\n  },\n  image: {\n    width: \"100%\",\n    height: undefined,\n    resizeMode: \"contain\",\n  },\n  foot: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: 15,\n  },\n  footText: {},\n  by: {\n    fontSize: 11,\n  },\n  score: {\n    fontSize: 18,\n  },\n  actions: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n    padding: 10,\n  },\n});\n\nfunction isImageUrl(url?: string): boolean {\n  if (!url) return false;\n  return [\".png\", \".jpg\", \".jpeg\", \".bmp\", \".gif\", \".webp\"].some(ext =>\n    url.endsWith(ext),\n  );\n}\n","import { useState, useEffect, useContext } from \"react\";\nimport LotideContext from \"../store/LotideContext\";\nimport * as LotideService from \"../services/LotideService\";\nimport { useRefreshableData } from \"./useRefreshableData\";\n\nexport function usePosts(\n  sort?: SortOption,\n  inYourFollows?: boolean,\n  community?: CommunityId,\n): [Post[], boolean, () => void, () => void] {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [page, setPage] = useState<string | null>(null);\n  const [nextPage, setNextPage] = useState<string | null>(null);\n  const [loadingPage, setLoadingPage] =\n    useState<string | null | undefined>(undefined);\n  const [reloadId, setReloadId] = useState(0);\n  const ctx = useContext(LotideContext).ctx;\n\n  const [isLoading, refresh] = useRefreshableData(\n    stopLoading => {\n      if (!ctx.login) return;\n      if (loadingPage !== undefined) return;\n      setLoadingPage(page);\n      LotideService.getPosts(ctx, page, sort, inYourFollows, community)\n        .then(data => {\n          setPosts(p => [...p, ...data.items]);\n          setNextPage(data.next_page);\n          setLoadingPage(undefined);\n        })\n        .then(() => stopLoading())\n        .catch(e => {\n          stopLoading();\n          setPosts(p => [\n            ...p,\n            {\n              id: -1,\n              title: \"Lotide error\",\n              content_html: `<p>Error: ${e}</p>`,\n              created: \"\",\n              replies_count_total: 0,\n              score: 0,\n              sticky: true,\n              author: {\n                id: -1,\n                username: \"Failure\",\n                local: false,\n                host: \"hoot-mobile\",\n              },\n              community: {\n                id: -1,\n                name: \"something-went-wrong\",\n                local: false,\n                host: \"hoot-mobile\",\n              },\n            },\n          ]);\n        });\n    },\n    [reloadId, page],\n  );\n\n  useEffect(() => {\n    setPosts([]);\n    setPage(null);\n    setNextPage(null);\n    refresh();\n  }, [ctx, sort]);\n\n  function loadNextPage() {\n    if (nextPage !== null) {\n      setPage(nextPage);\n    }\n  }\n\n  function refreshData() {\n    setPosts([]);\n    setPage(null);\n    setNextPage(null);\n    setReloadId(id => id + 1);\n    refresh();\n  }\n\n  return [posts, isLoading, refreshData, loadNextPage];\n}\n\nexport function useReplies(\n  ctx: LotideContext,\n  postId: PostId,\n  deps: any[],\n  replyId?: ReplyId,\n): Paged<Reply> {\n  const [replies, setReplies] = useState({\n    items: [] as Reply[],\n  } as Paged<Reply>);\n  useEffect(() => {\n    if (replyId) {\n      LotideService.getReply(ctx, replyId).then(async reply => {\n        reply.replies = await LotideService.getReplyReplies(ctx, reply.id);\n        setReplies({ items: [reply], next_page: null });\n      });\n    } else {\n      LotideService.getPostReplies(ctx, postId).then(data => {\n        setReplies(data);\n      });\n    }\n  }, deps);\n  return replies;\n}\n","import { useState, useEffect } from \"react\";\n\nexport function useRefreshableData<T>(\n  effect: (stopLoading: () => void) => void | (() => void | undefined),\n  deps: any[],\n): [boolean, () => void] {\n  const [refreshCount, setRefreshCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    effect(() => setIsLoading(false));\n  }, [refreshCount, ...deps]);\n\n  function refresh() {\n    setRefreshCount(c => c + 1);\n    setIsLoading(true);\n  }\n\n  return [isLoading, refresh];\n}\n","export interface KnownHost {\n  name: string;\n  domain: string;\n}\n\nexport const KnownHosts: KnownHost[] = [\n  {\n    name: \"Gold&Black\",\n    domain: \"hoot.goldandblack.xyz\",\n  },\n  {\n    name: \"Tide C\",\n    domain: \"c.tide.tk\",\n  },\n  {\n    name: \"Narwhal City\",\n    domain: \"dev.narwhal.city\",\n  },\n  {\n    name: \"Exopla\",\n    domain: \"lotide.exopla.net.eu.org\",\n  },\n  {\n    name: \"Tide B\",\n    domain: \"b.tide.tk\",\n  },\n  {\n    name: \"Tide A\",\n    domain: \"a.tide.tk\",\n  },\n];\n\nexport default KnownHosts;\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nexport const lotideContext = {\n  async store(ctx: LotideContext) {\n    return AsyncStorage.setItem(\"@lotide_ctx\", JSON.stringify(ctx));\n  },\n  async remove() {\n    return AsyncStorage.removeItem(\"@lotide_ctx\");\n  },\n  async query(): Promise<LotideContext | undefined> {\n    return AsyncStorage.getItem(\"@lotide_ctx\").then(ctxStr => {\n      if (ctxStr !== null) {\n        return JSON.parse(ctxStr) as LotideContext;\n      } else {\n        return undefined;\n      }\n    });\n  },\n};\n\nexport const lotideContextKV = {\n  async store(ctx: LotideContext) {\n    if (!ctx.login) return;\n    const name = `${ctx.login.user.username}@${ctx.apiUrl}`;\n    serviceKV.store(\"@lotide_ctx_arr\", name, ctx);\n  },\n  async query(k: string): Promise<LotideContext | undefined> {\n    return serviceKV.query<LotideContext>(\"@lotide_ctx_arr\", k);\n  },\n  async listKeys(): Promise<string[]> {\n    return serviceKV.listKeys(\"@lotide_ctx_arr\");\n  },\n  async remove(k: string): Promise<LotideContext | undefined> {\n    return serviceKV.remove(\"@lotide_ctx_arr\", k);\n  },\n  async getStore(): Promise<{ [key: string]: LotideContext }> {\n    const storeStr = await AsyncStorage.getItem(\"@lotide_ctx_arr\");\n    return storeStr ? JSON.parse(storeStr) : {};\n  },\n};\n\nconst serviceKV = {\n  async store<T>(path: string, k: string, v: T) {\n    const storeStr = await AsyncStorage.getItem(path);\n    const store = storeStr ? JSON.parse(storeStr) : {};\n    store[k] = v;\n    await AsyncStorage.setItem(path, JSON.stringify(store));\n  },\n\n  async query<T>(path: string, k: string): Promise<T | undefined> {\n    const storeStr = await AsyncStorage.getItem(path);\n    return storeStr ? JSON.parse(storeStr)[k] : undefined;\n  },\n\n  async listKeys(path: string): Promise<string[]> {\n    const storeStr = await AsyncStorage.getItem(path);\n    const store = storeStr ? JSON.parse(storeStr) : {};\n    return Object.keys(store);\n  },\n\n  async remove<T>(path: string, k: string): Promise<T | undefined> {\n    const storeStr = await AsyncStorage.getItem(path);\n    const store = storeStr ? JSON.parse(storeStr) : {};\n    const v = store[k];\n    delete store[k];\n    await AsyncStorage.setItem(path, JSON.stringify(store));\n    return v;\n  },\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { Platform, Pressable, ScrollView, StyleSheet } from \"react-native\";\nimport KnownHosts from \"../constants/KnownHosts\";\nimport ActorDisplay from \"./ActorDisplay\";\nimport { Text, TextInput, View } from \"./Themed\";\nimport * as LotideService from \"../services/LotideService\";\nimport useTheme from \"../hooks/useTheme\";\nimport { lotideContextKV } from \"../services/StorageService\";\nimport LotideContext from \"../store/LotideContext\";\n\nexport interface HostListProps {\n  onSelect: (domain: string, name?: string) => void;\n}\n\ninterface HostData {\n  name: string;\n  domain: string;\n  instanceInfo?: InstanceInfo | null;\n}\n\nexport default function HostList(props: HostListProps) {\n  const [hostText, setHostText] = useState(\"\");\n  const [knownHosts, setKnowHosts] = useState<HostData[]>(KnownHosts);\n  const [existingProfiles, setExistingProfiles] = useState<\n    [string, LotideContext][]\n  >([]);\n  const theme = useTheme();\n  const lotideContext = useContext(LotideContext);\n\n  useEffect(() => {\n    KnownHosts.map((h, i) => {\n      return LotideService.getInstanceInfo({\n        apiUrl: `https://${h.domain}/api/unstable`,\n      })\n        .then(d => {\n          setKnowHosts(hosts =>\n            hosts.map((h2, j) =>\n              i !== j\n                ? h2\n                : { name: h2.name, domain: h2.domain, instanceInfo: d },\n            ),\n          );\n        })\n        .catch(() => {\n          setKnowHosts(hosts =>\n            hosts.map((h2, j) =>\n              i !== j\n                ? h2\n                : { name: h2.name, domain: h2.domain, instanceInfo: null },\n            ),\n          );\n        });\n    });\n  }, []);\n\n  useEffect(() => {\n    lotideContextKV\n      .getStore()\n      .then(object => Object.entries(object))\n      .then(setExistingProfiles);\n  }, []);\n\n  const renderItem = ({ item }: { item: HostData }) => {\n    const enabled = item.instanceInfo?.software.version === \"0.9.0-pre\";\n    const color = enabled ? theme.text : theme.secondaryText;\n    return (\n      <View\n        style={{\n          borderBottomWidth: 1,\n          borderColor: theme.secondaryBackground,\n          paddingVertical: 10,\n        }}\n      >\n        <Pressable\n          onPress={() => enabled && props.onSelect(item.domain, item.name)}\n        >\n          <ActorDisplay\n            name={item.name}\n            host={item.domain}\n            local={false}\n            newLine={true}\n            style={{\n              borderBottomWidth: 1,\n              borderBottomColor: \"#fff\",\n            }}\n            styleName={{\n              fontSize: 24,\n              fontWeight: \"300\",\n              fontFamily: Platform.OS === \"ios\" ? \"Georgia\" : \"serif\",\n              color,\n            }}\n          />\n          {item.instanceInfo ? (\n            <>\n              <Text style={{ color: theme.secondaryText }}>\n                {item.instanceInfo.software.version}\n                {!enabled && \" - Out of date\"}\n              </Text>\n              {!!item.instanceInfo.description && (\n                <Text style={{ color }}>{item.instanceInfo.description}</Text>\n              )}\n            </>\n          ) : item.instanceInfo === null ? (\n            <Text style={{ color }}>Failed to load info</Text>\n          ) : (\n            <Text style={{ color }}>Loading...</Text>\n          )}\n        </Pressable>\n      </View>\n    );\n  };\n  return (\n    <ScrollView style={styles.root}>\n      <Text style={styles.title}>Login to continue</Text>\n      {existingProfiles.length > 0 && (\n        <Text style={styles.subtitle}>Select an existing profile</Text>\n      )}\n      {existingProfiles.map(p => {\n        const [username, url] = p[0].split(\"@\");\n        return (\n          <Pressable\n            key={p[0]}\n            onPress={() => {\n              lotideContext.setContext(p[1]);\n            }}\n          >\n            <ActorDisplay\n              name={username}\n              host={\n                url\n                  .replace(\"http://\", \"\")\n                  .replace(\"https://\", \"\")\n                  .split(/[/?#]/)[0]\n              }\n              local={true}\n              showHost={\"always\"}\n              newLine={true}\n              style={{ paddingVertical: 5, paddingBottom: 10 }}\n            />\n          </Pressable>\n        );\n      })}\n      <Text style={styles.subtitle}>\n        {existingProfiles.length > 0\n          ? \"Or sign into a new acount\"\n          : \"Enter a host or select one below\"}\n      </Text>\n      <TextInput\n        placeholder=\"Host domain\"\n        style={{ paddingVertical: 10, paddingHorizontal: 10 }}\n        value={hostText}\n        onChangeText={setHostText}\n        onSubmitEditing={() => props.onSelect(hostText.toLowerCase())}\n        keyboardType=\"url\"\n        returnKeyType=\"next\"\n      />\n      {knownHosts\n        .filter(\n          x =>\n            hostText === \"\" ||\n            x.domain.includes(hostText.toLowerCase()) ||\n            x.name.toLowerCase().includes(hostText.toLowerCase()),\n        )\n        .map(item => (\n          <View key={item.domain}>{renderItem({ item })}</View>\n        ))}\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    padding: 20,\n  },\n  title: {\n    fontSize: 24,\n    marginBottom: 10,\n  },\n  subtitle: {\n    fontWeight: \"300\",\n    marginBottom: 10,\n  },\n});\n","import React, { useContext, useState } from \"react\";\nimport {\n  Alert,\n  Button,\n  Keyboard,\n  KeyboardAvoidingView,\n  Platform,\n  Pressable,\n  StyleSheet,\n} from \"react-native\";\nimport { Text, TextInput, View } from \"./Themed\";\nimport * as LotideService from \"../services/LotideService\";\nimport LotideContext from \"../store/LotideContext\";\nimport useTheme from \"../hooks/useTheme\";\n\nexport interface LoginProps {\n  hostName?: string;\n  domain: string;\n  onGoBack: () => void;\n}\n\nexport default function Login(props: LoginProps) {\n  const [isRegistering, setIsRegistering] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const theme = useTheme();\n  const lotideContext = useContext(LotideContext);\n\n  function register() {\n    LotideService.register(\n      `https://${props.domain}/api/unstable`,\n      username,\n      password,\n    )\n      .then(data => {\n        lotideContext.setContext({\n          apiUrl: `https://${props.domain}/api/unstable`,\n          login: data,\n        });\n      })\n      .catch(e => {\n        Alert.alert(\"Failed to register\", e);\n        console.error(e);\n      });\n  }\n\n  function login() {\n    LotideService.login(\n      `https://${props.domain}/api/unstable`,\n      username,\n      password,\n    )\n      .then(data => {\n        lotideContext.setContext({\n          apiUrl: `https://${props.domain}/api/unstable`,\n          login: data,\n        });\n      })\n      .catch(e => {\n        Alert.alert(\"Failed to login\", e);\n        console.error(e);\n      });\n  }\n\n  function submit() {\n    if (isRegistering) {\n      register();\n    } else {\n      login();\n    }\n  }\n\n  return (\n    <Pressable\n      style={{ flex: 1 }}\n      onPress={() => Platform.OS !== \"web\" && Keyboard.dismiss()}\n    >\n      <KeyboardAvoidingView style={styles.root} behavior=\"padding\">\n        {props.hostName ? (\n          <Pressable style={{ alignItems: \"center\" }}>\n            <Text style={styles.name}>{props.hostName}</Text>\n            <Text style={[styles.domain, { color: theme.secondaryText }]}>\n              {props.domain}\n            </Text>\n          </Pressable>\n        ) : (\n          <Pressable>\n            <Text style={{ fontSize: 24 }}>{props.domain}</Text>\n          </Pressable>\n        )}\n        <Pressable hitSlop={5} onPress={() => setIsRegistering(x => !x)}>\n          <Text style={[styles.loginRegister, { color: theme.secondaryText }]}>\n            <Text\n              style={{\n                color: isRegistering\n                  ? theme.secondaryText\n                  : theme.secondaryTint,\n              }}\n            >\n              Login\n            </Text>\n            {\" | \"}\n            <Text\n              style={{\n                color: isRegistering\n                  ? theme.secondaryTint\n                  : theme.secondaryText,\n              }}\n            >\n              Register\n            </Text>\n          </Text>\n        </Pressable>\n        <TextInput\n          style={styles.input}\n          placeholder=\"Username\"\n          value={username}\n          onChangeText={setUsername}\n        />\n        <TextInput\n          style={styles.input}\n          placeholder=\"Password\"\n          value={password}\n          onChangeText={setPassword}\n          secureTextEntry={true}\n        />\n        <View style={styles.actionButtons}>\n          <Button\n            title=\"Change Host\"\n            onPress={props.onGoBack}\n            color={theme.secondaryTint}\n          />\n          <Button\n            title={isRegistering ? \"Register\" : \"Login\"}\n            onPress={submit}\n            color={theme.tint}\n          />\n        </View>\n      </KeyboardAvoidingView>\n    </Pressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 35,\n  },\n  name: {\n    fontSize: 50,\n    fontFamily: Platform.OS === \"ios\" ? \"Georgia\" : \"serif\",\n  },\n  domain: {\n    fontWeight: \"300\",\n  },\n  loginRegister: {\n    padding: 15,\n  },\n  input: {\n    width: \"100%\",\n    marginVertical: 5,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n  },\n  actionButtons: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n  },\n});\n","import React, { useState } from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { View } from \"./Themed\";\nimport HostList from \"./HostList\";\nimport Login from \"./Login\";\n\nexport default function SuggestLogin() {\n  const [hostName, setHostName] = useState<string>();\n  const [domain, setDomain] = useState<string>();\n\n  return (\n    <View style={styles.root}>\n      {!domain ? (\n        <HostList\n          onSelect={(domain, name) => {\n            setHostName(name);\n            setDomain(domain);\n          }}\n        />\n      ) : (\n        <Login\n          hostName={hostName}\n          domain={domain}\n          onGoBack={() => setDomain(undefined)}\n        />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  input: {\n    width: \"100%\",\n    marginBottom: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n  },\n  actionButtons: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    width: \"100%\",\n  },\n});\n","import React, { useContext } from \"react\";\nimport { StyleSheet, FlatList, Pressable } from \"react-native\";\n\nimport PostDisplay from \"../components/PostDisplay\";\nimport { View } from \"../components/Themed\";\nimport * as Haptics from \"../services/HapticService\";\nimport { usePosts } from \"../hooks/lotide\";\nimport { RootTabScreenProps } from \"../types\";\nimport useTheme from \"../hooks/useTheme\";\nimport LotideContext from \"../store/LotideContext\";\nimport SuggestLogin from \"../components/SuggestLogin\";\nimport { hasLogin } from \"../services/LotideService\";\n\nexport default function FeedScreen({\n  navigation,\n  route,\n}: RootTabScreenProps<\"FeedScreen\">) {\n  const sort = route.params.sort;\n  const ctx = useContext(LotideContext).ctx;\n  const [posts, isLoadingPosts, refreshPosts, loadNextPage] = usePosts(\n    sort,\n    true,\n  );\n  if (!hasLogin(ctx)) return <SuggestLogin />;\n  console.log(ctx);\n  const renderItem = ({ item }: { item: Post }) => (\n    <Item post={item} navigation={navigation} />\n  );\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={posts}\n        renderItem={renderItem}\n        keyExtractor={(post, index) => `${post.id}-${index}`}\n        refreshing={isLoadingPosts}\n        onRefresh={refreshPosts}\n        onEndReachedThreshold={2}\n        onEndReached={loadNextPage}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  item: {\n    marginVertical: 0,\n    marginHorizontal: 0,\n    borderBottomWidth: 8,\n  },\n  title: {\n    fontSize: 20,\n    padding: 15,\n    color: \"#eee\",\n  },\n  contentText: {\n    fontSize: 12,\n  },\n  link: {\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    backgroundColor: \"#8884\",\n    borderRadius: 5,\n    marginHorizontal: 15,\n  },\n  image: {\n    width: \"100%\",\n    height: undefined,\n    resizeMode: \"contain\",\n  },\n  foot: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: 15,\n  },\n  footText: {\n    color: \"#ccc\",\n  },\n  by: {\n    fontSize: 11,\n  },\n  score: {\n    fontSize: 18,\n    color: \"#bbb\",\n  },\n});\n\nconst Item = ({ post, navigation }: { post: Post; navigation: any }) => {\n  const theme = useTheme();\n  return (\n    <Pressable\n      onPress={() => navigation.navigate(\"Post\", { post })}\n      onLongPress={() => {\n        Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n        console.log(post);\n      }}\n    >\n      <View\n        style={[styles.item, { borderBottomColor: theme.secondaryBackground }]}\n      >\n        <PostDisplay post={post} navigation={navigation} />\n      </View>\n    </Pressable>\n  );\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { FlatList, Pressable, StyleSheet } from \"react-native\";\nimport Icon from \"@expo/vector-icons/Ionicons\";\nimport LotideContext from \"../store/LotideContext\";\nimport { TextInput, View } from \"./Themed\";\nimport * as LotideService from \"../services/LotideService\";\nimport ActorDisplay from \"./ActorDisplay\";\nimport useTheme from \"../hooks/useTheme\";\n\nexport interface CommunityFinderProps {\n  placeholder?: string;\n  onlyWhenTyping?: boolean;\n  onSelect: (community: Community) => void;\n}\n\nexport default function CommunityFinder(props: CommunityFinderProps) {\n  const [communities, setCommunities] = useState<Paged<Community>>();\n  const [filterText, setFilterText] = useState(\"\");\n  const ctx = useContext(LotideContext).ctx;\n  const theme = useTheme();\n\n  const communitiesToDisplay = (() => {\n    if (props.onlyWhenTyping && filterText === \"\") return [];\n    if (!communities) return [];\n    if (filterText === \"\") return communities.items;\n    return communities.items.filter(\n      c =>\n        c.name.toLowerCase().includes(filterText.toLowerCase()) ||\n        c.host.includes(filterText.toLowerCase()),\n    );\n  })();\n\n  useEffect(() => {\n    LotideService.getCommunities(ctx, false).then(setCommunities);\n  }, [ctx.login?.token]);\n\n  const renderItem = ({ item }: { item: Community }) => {\n    return (\n      <Pressable\n        onPress={() => props.onSelect(item)}\n        style={[\n          styles.item,\n          {\n            borderColor: theme.secondaryBackground,\n          },\n        ]}\n      >\n        <ActorDisplay\n          name={item.name}\n          host={item.host}\n          local={item.local}\n          colorize={\"always\"}\n          newLine\n        />\n        <View style={{ display: \"flex\", flexDirection: \"row\" }}>\n          {item.you_are_moderator && (\n            <Icon name=\"shield-outline\" size={20} color={theme.secondaryTint} />\n          )}\n          {item.your_follow?.accepted && (\n            <Icon\n              name=\"checkmark\"\n              size={20}\n              color={theme.secondaryTint}\n              style={{ marginLeft: 5 }}\n            />\n          )}\n        </View>\n      </Pressable>\n    );\n  };\n\n  return (\n    <View>\n      <TextInput\n        placeholder={props.placeholder || \"Filter communities\"}\n        value={filterText}\n        onChangeText={setFilterText}\n        style={styles.input}\n      />\n      <FlatList\n        data={communitiesToDisplay}\n        renderItem={renderItem}\n        keyExtractor={(item, index) => `${item.id}-${index}`}\n        contentContainerStyle={styles.list}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  input: {\n    paddingVertical: 10,\n    marginHorizontal: 20,\n    marginTop: 20,\n  },\n  list: {\n    padding: 20,\n    paddingBottom: 100,\n  },\n  item: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    height: 50,\n    borderBottomWidth: 1,\n    paddingHorizontal: 20,\n  },\n});\n","import React, { useContext } from \"react\";\nimport LotideContext from \"../store/LotideContext\";\nimport { RootTabScreenProps } from \"../types\";\nimport SuggestLogin from \"../components/SuggestLogin\";\nimport CommunityFinder from \"../components/CommunityFinder\";\n\nexport default function SearchScreen({\n  navigation,\n}: RootTabScreenProps<\"SearchScreen\">) {\n  const ctx = useContext(LotideContext).ctx;\n\n  if (!ctx.login) return <SuggestLogin />;\n\n  return (\n    <CommunityFinder\n      onSelect={community => navigation.navigate(\"Community\", { community })}\n    />\n  );\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { Alert, Button, Pressable, ScrollView, StyleSheet } from \"react-native\";\nimport Icon from \"@expo/vector-icons/Ionicons\";\nimport { View, Text, TextInput } from \"../components/Themed\";\nimport { getUserData } from \"../services/LotideService\";\nimport LotideContext from \"../store/LotideContext\";\nimport { RootTabScreenProps } from \"../types\";\nimport SuggestLogin from \"../components/SuggestLogin\";\nimport * as LotideService from \"../services/LotideService\";\nimport * as StorageService from \"../services/StorageService\";\nimport useTheme from \"../hooks/useTheme\";\nimport ActorDisplay from \"../components/ActorDisplay\";\n\nexport default function ProfileScreen({\n  navigation,\n}: RootTabScreenProps<\"ProfileScreen\">) {\n  const [profile, setProfile] = useState<Profile>();\n  const [profileList, setProfileList] = useState<string[]>([]);\n  const [communities, setCommunities] = useState<Community[]>([]);\n  const [isEditing, setIsEditing] = useState(false);\n  const theme = useTheme();\n  const lotideContext = useContext(LotideContext);\n  const ctx = lotideContext.ctx;\n\n  useEffect(() => {\n    if (!ctx.login) return;\n    // TODO: Use the pagination feature\n    LotideService.getCommunities(ctx, true).then(communities =>\n      setCommunities(communities.items),\n    );\n  }, [ctx.login?.user.id]);\n\n  useEffect(() => {\n    if (ctx.login !== undefined && ctx.login.user !== undefined) {\n      getUserData(ctx, ctx.login?.user.id || 0).then(setProfile);\n    }\n  }, [ctx.login?.token]);\n\n  useEffect(() => {\n    StorageService.lotideContextKV\n      .listKeys()\n      .then(keys => setProfileList(keys));\n  }, [ctx]);\n\n  if (ctx.login === undefined) {\n    return <SuggestLogin />;\n  }\n\n  function logout() {\n    Alert.alert(\n      \"Log out\",\n      \"Would you like to keep the login profile handy for later?\",\n      [\n        {\n          text: \"Remove\",\n          onPress: () => {\n            StorageService.lotideContextKV\n              .remove(`${ctx.login?.user.username}@${ctx.apiUrl}`)\n              .then(() => LotideService.logout(ctx))\n              .then(() => lotideContext.setContext({}));\n          },\n        },\n        {\n          text: \"Keep\",\n          style: \"default\",\n          onPress: () => {\n            lotideContext.setContext({});\n          },\n        },\n      ],\n    );\n  }\n\n  return (\n    <ScrollView\n      style={[styles.container, { backgroundColor: theme.background }]}\n    >\n      <View style={styles.header}>\n        <View>\n          <Pressable hitSlop={10} onPress={() => setIsEditing(x => !x)}>\n            <Text style={styles.title}>\n              {profile?.username}\n              {\"  \"}\n              <Icon\n                name=\"pencil-outline\"\n                size={20}\n                color={theme.secondaryText}\n              />\n            </Text>\n          </Pressable>\n          <Text style={{ color: theme.secondaryText }}>{profile?.host}</Text>\n          {!!profile?.avatar && <Text>{profile?.avatar?.url}</Text>}\n          {!!profile?.description && <Text>{profile?.description}</Text>}\n        </View>\n        <Button\n          onPress={logout}\n          title=\"Log Out\"\n          color={theme.secondaryTint}\n          accessibilityLabel=\"Log out of the Hoot network\"\n        />\n      </View>\n      {isEditing && (\n        <View style={styles.editView}>\n          <TextInput style={styles.editViewText} placeholder=\"New email\" />\n          <TextInput\n            style={styles.editViewText}\n            placeholder=\"User bio\"\n            multiline={true}\n          />\n          <TextInput style={styles.editViewText} placeholder=\"New password\" />\n          <TextInput\n            style={styles.editViewText}\n            placeholder=\"Confirm new password\"\n          />\n          <View style={styles.editViewActionButtons}>\n            <Button\n              onPress={() => setIsEditing(false)}\n              title=\"Cancel\"\n              color={theme.secondaryTint}\n              accessibilityLabel=\"Add profile\"\n            />\n            <Button\n              onPress={() => Alert.alert(\"unimplemented\")}\n              title=\"Submit\"\n              color={theme.tint}\n              accessibilityLabel=\"Add profile\"\n            />\n          </View>\n        </View>\n      )}\n      <Button\n        onPress={() => lotideContext.setContext({})}\n        title=\"Add Profile\"\n        color={theme.tint}\n        accessibilityLabel=\"Add profile\"\n      />\n      {profileList\n        .map(p => [p, ...p.split(\"@\")] as string[])\n        .map(p => [\n          p[0],\n          p[1],\n          p[2].replace(\"http://\", \"\").replace(\"https://\", \"\").split(/[/?#]/)[0],\n        ])\n        .map(p => (\n          <Pressable\n            key={p[0]}\n            style={[\n              styles.altProfileButton,\n              { borderColor: theme.secondaryBackground },\n            ]}\n            onPress={() => {\n              StorageService.lotideContextKV.query(p[0]).then(ctx => {\n                if (ctx !== undefined) {\n                  lotideContext.setContext(ctx);\n                  setIsEditing(false);\n                }\n              });\n            }}\n          >\n            <ActorDisplay\n              name={p[1]}\n              host={p[2]}\n              local={true}\n              showHost={\"always\"}\n              colorize={\"never\"}\n              newLine={true}\n            />\n          </Pressable>\n        ))}\n      <View style={{ paddingTop: 10 }}>\n        <Button\n          onPress={() => navigation.navigate(\"NewCommunity\")}\n          title=\"Create Community\"\n          color={theme.tint}\n          accessibilityLabel=\"Create a new community\"\n        />\n      </View>\n      <Text style={styles.followingTitle}>Communities You Follow:</Text>\n      {communities.map(community => (\n        <View\n          key={community.id}\n          style={[\n            styles.altProfileButton,\n            { borderColor: theme.secondaryBackground },\n          ]}\n        >\n          <ActorDisplay\n            name={community.name}\n            host={community.host}\n            local={community.local}\n            showHost={\"always\"}\n            colorize={\"always\"}\n            newLine={true}\n          />\n        </View>\n      ))}\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    height: \"100%\",\n  },\n  header: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n  },\n  followingTitle: {\n    fontSize: 18,\n    fontWeight: \"500\",\n    padding: 20,\n  },\n  editView: {\n    margin: 20,\n  },\n  editViewText: {\n    marginBottom: 15,\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n  },\n  editViewActionButtons: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: \"80%\",\n  },\n  inputContainer: {\n    width: \"100%\",\n    padding: 20,\n  },\n  input: {\n    height: 40,\n    borderWidth: 1,\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    width: \"100%\",\n    borderRadius: 8,\n  },\n  altProfileButton: {\n    marginHorizontal: 20,\n    paddingVertical: 15,\n    borderBottomWidth: 1,\n  },\n});\n","import React, { useContext, useEffect, useState } from \"react\";\nimport {\n  Alert,\n  Button,\n  Keyboard,\n  KeyboardAvoidingView,\n  Platform,\n  Pressable,\n  StyleSheet,\n  TextInput,\n  TouchableWithoutFeedback,\n} from \"react-native\";\nimport { View, Text } from \"../components/Themed\";\nimport LotideContext from \"../store/LotideContext\";\nimport { RootTabScreenProps } from \"../types\";\nimport * as LotideService from \"../services/LotideService\";\nimport useTheme from \"../hooks/useTheme\";\nimport SuggestLogin from \"../components/SuggestLogin\";\nimport CommunityFinder from \"../components/CommunityFinder\";\nimport ActorDisplay from \"../components/ActorDisplay\";\n\nexport default function NewPostScreen({\n  navigation,\n}: RootTabScreenProps<\"NewPostScreen\">) {\n  const [community, setCommunity] = useState<Community | null>();\n  const [title, setTitle] = useState(\"\");\n  const [link, setLink] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const theme = useTheme();\n  const lotideContext = useContext(LotideContext);\n  const ctx = lotideContext.ctx;\n\n  useEffect(() => {\n    return navigation.addListener(\"focus\", () => {\n      console.log(community);\n      if (community === null) {\n        setCommunity(undefined);\n      }\n    });\n  }, [community, community?.id]);\n\n  if (ctx.login === undefined) {\n    return <SuggestLogin />;\n  }\n\n  if (community === null)\n    return <CommunityFinder onSelect={setCommunity} onlyWhenTyping />;\n\n  function submit() {\n    if (!community) return;\n    LotideService.submitPost(ctx, {\n      community: community.id,\n      title,\n      href: link || undefined,\n      content_markdown: content || undefined,\n    })\n      .then(data => {\n        LotideService.getPost(ctx, data.id).then(post => {\n          reset();\n          navigation.navigate(\"Post\", { post });\n        });\n      })\n      .catch(e => Alert.alert(\"Could not submit post\", e));\n  }\n\n  function reset() {\n    setCommunity(undefined);\n    setTitle(\"\");\n    setLink(\"\");\n    setContent(\"\");\n  }\n\n  return (\n    <KeyboardAvoidingView style={{ width: \"100%\", height: \"100%\" }}>\n      <TouchableWithoutFeedback\n        onPress={() => Platform.OS !== \"web\" && Keyboard.dismiss()}\n      >\n        <View style={styles.container}>\n          <Pressable onPress={() => setCommunity(null)}>\n            {community ? (\n              <ActorDisplay\n                name={community.name}\n                host={community.host}\n                local={community.local}\n                colorize={\"always\"}\n                showHost={\"always\"}\n                newLine\n                style={styles.input}\n              />\n            ) : (\n              <Text style={[styles.input, { color: theme.secondaryText }]}>\n                Select a Community\n              </Text>\n            )}\n          </Pressable>\n          <TextInput\n            style={[styles.input, styles.title, { color: theme.text }]}\n            placeholder=\"Add a Title\"\n            placeholderTextColor={theme.placeholderText}\n            value={title}\n            onChangeText={setTitle}\n          />\n          {title.length >= 4 ? (\n            <>\n              <TextInput\n                style={[styles.input, { color: theme.text }]}\n                placeholder=\"Link\"\n                placeholderTextColor={theme.placeholderText}\n                value={link}\n                onChangeText={setLink}\n                keyboardType=\"url\"\n                textContentType=\"URL\"\n              />\n              <TextInput\n                style={[styles.input, { color: theme.text }]}\n                placeholder=\"Add post content\"\n                placeholderTextColor={theme.placeholderText}\n                value={content}\n                onChangeText={setContent}\n              />\n            </>\n          ) : (\n            <Text style={{ color: theme.secondaryText }}>\n              {title.length > 0 && 4 - title.length}\n            </Text>\n          )}\n          {!!community && (!!link || content.length > 10) && (\n            <Button\n              onPress={submit}\n              title=\"Submit\"\n              color={theme.tint}\n              accessibilityLabel=\"Submit new post\"\n            />\n          )}\n          {content.length < 11 && content.length > 0 && (\n            <Text style={{ color: theme.secondaryText }}>\n              {11 - content.length}\n            </Text>\n          )}\n        </View>\n      </TouchableWithoutFeedback>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"flex-start\",\n    padding: 15,\n    height: \"100%\",\n    width: \"100%\",\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: \"80%\",\n  },\n  inputContainer: {\n    width: \"100%\",\n    padding: 20,\n  },\n  input: {\n    paddingVertical: 10,\n    width: \"100%\",\n    borderRadius: 8,\n  },\n  item: {\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    marginHorizontal: 20,\n    marginBottom: 1,\n  },\n});\n","import React from \"react\";\nimport { View, Text } from \"../components/Themed\";\n\nexport default function SettingsScreen() {\n  return (\n    <View>\n      <Text>Settings screen. It'll be implemented eventually.</Text>\n    </View>\n  );\n}\n","import React, { useContext, useState } from \"react\";\nimport {\n  Alert,\n  Button,\n  Keyboard,\n  KeyboardAvoidingView,\n  Platform,\n  Pressable,\n  StyleSheet,\n} from \"react-native\";\nimport Icon from \"@expo/vector-icons/Ionicons\";\nimport useTheme from \"../hooks/useTheme\";\nimport * as LotideService from \"../services/LotideService\";\nimport LotideContext from \"../store/LotideContext\";\nimport { View, Text, TextInput } from \"../components/Themed\";\nimport { RootStackScreenProps } from \"../types\";\n\nexport default function RegisterScreen({\n  navigation,\n  route,\n}: RootStackScreenProps<\"Register\">) {\n  const [username, setUsername] = useState(\"\");\n  const [host, setHost] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordConf, setPasswordConf] = useState(\"\");\n  const theme = useTheme();\n  const lotideContext = useContext(LotideContext);\n\n  function submit() {\n    // if (password !== passwordConf) {\n    //   Alert.alert(\"Passwords don't match\", \"Make sure your passwords match\");\n    //   return;\n    // }\n    const fHost = host || \"https://hoot.goldandblack.xyz/api/unstable\";\n    LotideService.register(fHost, username, password)\n      .then(data => {\n        lotideContext.setContext({ apiUrl: fHost, login: data });\n        navigation.pop();\n      })\n      .catch(console.error);\n  }\n\n  return (\n    <View style={styles.root}>\n      <Pressable\n        style={styles.container}\n        onPress={() => Platform.OS !== \"web\" && Keyboard.dismiss()}\n      >\n        <Text style={{ fontWeight: \"300\", fontSize: 18, marginBottom: 25 }}>\n          Register a new account\n        </Text>\n        <KeyboardAvoidingView style={{ width: \"100%\" }} behavior=\"position\">\n          <View\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              marginBottom: 20,\n            }}\n          >\n            <TextInput\n              style={[\n                styles.input,\n                { marginBottom: 0, width: \"auto\", flex: 1 },\n              ]}\n              placeholder=\"Host URL\"\n              value={host}\n              onChangeText={setHost}\n              textContentType=\"URL\"\n            />\n            <Pressable onPress={() => Alert.alert(\"unimplemented\")}>\n              <Icon\n                name=\"search-outline\"\n                size={25}\n                color={theme.secondaryText}\n                style={{ marginLeft: 15 }}\n              />\n            </Pressable>\n          </View>\n          <TextInput\n            style={styles.input}\n            placeholder=\"Username\"\n            textContentType=\"username\"\n            value={username}\n            onChangeText={setUsername}\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\"Password\"\n            textContentType=\"password\"\n            secureTextEntry={true}\n            value={password}\n            onChangeText={setPassword}\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\"Confirm Password\"\n            textContentType=\"password\"\n            secureTextEntry={true}\n            value={passwordConf}\n            onChangeText={setPasswordConf}\n          />\n          <View style={styles.actionButtons}>\n            <Button\n              onPress={submit}\n              title=\"Register\"\n              color={theme.tint}\n              accessibilityLabel=\"Login to the Hoot network\"\n            />\n          </View>\n        </KeyboardAvoidingView>\n      </Pressable>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n    padding: 20,\n  },\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  input: {\n    width: \"100%\",\n    marginBottom: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n  },\n  actionButtons: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    width: \"100%\",\n  },\n});\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { Alert, Button, FlatList, Pressable, StyleSheet } from \"react-native\";\nimport { View, Text } from \"../components/Themed\";\nimport useTheme from \"../hooks/useTheme\";\nimport { RootStackScreenProps } from \"../types\";\nimport * as Haptics from \"../services/HapticService\";\nimport * as LotideService from \"../services/LotideService\";\nimport LotideContext from \"../store/LotideContext\";\nimport { usePosts } from \"../hooks/lotide\";\nimport PostDisplay from \"../components/PostDisplay\";\n\nexport default function CommunityScreen({\n  navigation,\n  route,\n}: RootStackScreenProps<\"Community\">) {\n  const [community, setCommunity] = useState(route.params.community);\n  const [posts, isLoadingPosts, refreshPosts, loadNextPage] = usePosts(\n    \"hot\",\n    undefined,\n    community.id,\n  );\n  const [reloadId, setReloadId] = useState(0);\n  const theme = useTheme();\n  const ctx = useContext(LotideContext).ctx;\n\n  useEffect(() => {\n    LotideService.getCommunity(ctx, community.id).then(setCommunity);\n  }, [route.params.community.id, reloadId]);\n\n  const renderItem = ({ item }: { item: Post }) => (\n    <Item post={item} navigation={navigation} />\n  );\n\n  const isFollowing = community.your_follow?.accepted || false;\n\n  function follow() {\n    LotideService.followCommunity(ctx, community.id).then(data => {\n      if (data.accepted === false) {\n        Alert.alert(\n          \"Follow request rejected.\",\n          \"This could be an issue with the node you are connected to.\",\n        );\n      }\n      setReloadId(x => x + 1);\n    });\n  }\n\n  function unfollow() {\n    LotideService.unfollowCommunity(ctx, community.id).then(() => {\n      setReloadId(x => x + 1);\n    });\n  }\n\n  return (\n    <View style={[styles.root, { backgroundColor: theme.background }]}>\n      <View\n        style={[\n          styles.header,\n          { borderBottomColor: theme.secondaryBackground },\n        ]}\n      >\n        <View>\n          <Text style={[styles.title]}>{community.name}</Text>\n          <Text\n            style={{\n              color: community.local ? theme.blue : theme.green,\n              fontWeight: \"500\",\n            }}\n          >\n            {community.host}\n          </Text>\n          {community.description !== \"\" && (\n            <Text>\n              {\"\\n\"}\n              {community.description}\n            </Text>\n          )}\n        </View>\n        {isFollowing ? (\n          <Button\n            onPress={unfollow}\n            title=\"Unfollow\"\n            color={theme.tint}\n            accessibilityLabel=\"Stop seeing posts from this community\"\n          />\n        ) : (\n          <Button\n            onPress={follow}\n            title=\"Follow\"\n            color={theme.tint}\n            accessibilityLabel=\"See posts from this community in your feed\"\n          />\n        )}\n      </View>\n      <FlatList\n        data={posts}\n        renderItem={renderItem}\n        keyExtractor={(post, index) => `${post.id}-${index}`}\n        refreshing={isLoadingPosts}\n        onRefresh={refreshPosts}\n        onEndReachedThreshold={2}\n        onEndReached={loadNextPage}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    height: \"100%\",\n  },\n  header: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    padding: 20,\n    borderBottomWidth: 1,\n  },\n  title: {\n    fontSize: 20,\n  },\n  item: {\n    marginVertical: 0,\n    marginHorizontal: 0,\n    borderBottomWidth: 8,\n  },\n});\n\nconst Item = ({ post, navigation }: { post: Post; navigation: any }) => {\n  const theme = useTheme();\n  return (\n    <Pressable\n      onPress={() => navigation.navigate(\"Post\", { post })}\n      onLongPress={() => {\n        Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n      }}\n    >\n      <View\n        style={[styles.item, { borderBottomColor: theme.secondaryBackground }]}\n      >\n        <PostDisplay post={post} navigation={navigation} />\n      </View>\n    </Pressable>\n  );\n};\n","import React, { useContext, useRef, useState } from \"react\";\nimport {\n  Button,\n  Keyboard,\n  KeyboardAvoidingView,\n  Platform,\n  Pressable,\n  StyleSheet,\n} from \"react-native\";\nimport { Text, TextInput } from \"../components/Themed\";\nimport useTheme from \"../hooks/useTheme\";\nimport { RootStackScreenProps } from \"../types\";\nimport * as LotideService from \"../services/LotideService\";\nimport LotideContext from \"../store/LotideContext\";\nimport ContentDisplay from \"../components/ContentDisplay\";\nimport { ScrollView } from \"react-native-gesture-handler\";\n\nexport default function ReplyScreen({\n  navigation,\n  route,\n}: RootStackScreenProps<\"Reply\">) {\n  const [text, setText] = useState(\"\");\n  const scrollRef = useRef<ScrollView>(null);\n  const theme = useTheme();\n  const ctx = useContext(LotideContext).ctx;\n  const id = route.params.id;\n  const title = route.params.title;\n  const html = route.params.html;\n  const type = route.params.type;\n\n  function submit() {\n    if (type === \"post\") {\n      LotideService.replyToPost(ctx, id, text).then(() => navigation.pop());\n    } else {\n      LotideService.replyToReply(ctx, id, text).then(() => navigation.pop());\n    }\n  }\n\n  function scrollToBottom() {\n    if (scrollRef.current) {\n      scrollRef.current.scrollToEnd({ animated: true });\n    }\n  }\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n    >\n      <ScrollView ref={scrollRef}>\n        <Pressable\n          style={styles.root}\n          onPress={() => Platform.OS !== \"web\" && Keyboard.dismiss()}\n        >\n          <Text>Reply to {type}</Text>\n          {!!title && <Text style={styles.title}>From: {title}</Text>}\n          {html && <ContentDisplay contentHtml={html} />}\n          <TextInput\n            style={styles.input}\n            multiline\n            placeholder=\"Type your reply\"\n            value={text}\n            onChangeText={setText}\n            onFocus={scrollToBottom}\n          />\n          <Button title=\"Submit\" color={theme.tint} onPress={submit} />\n        </Pressable>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: { padding: 20, paddingBottom: 100 },\n  title: {\n    fontSize: 20,\n    marginVertical: 10,\n  },\n  input: {\n    marginVertical: 20,\n    minHeight: 100,\n  },\n});\n","import React, { useContext, useState } from \"react\";\nimport { ColorValue, Pressable } from \"react-native\";\nimport Icon from \"@expo/vector-icons/Ionicons\";\nimport { View, Text } from \"./Themed\";\nimport useTheme from \"../hooks/useTheme\";\nimport * as Haptics from \"../services/HapticService\";\nimport ElapsedTime from \"./ElapsedTime\";\nimport * as LotideService from \"../services/LotideService\";\nimport LotideContext from \"../store/LotideContext\";\nimport ContentDisplay from \"./ContentDisplay\";\n\nexport interface RepliesDisplayProps {\n  replies: Paged<Reply>;\n  navigation: any;\n  layer?: number;\n  postId?: PostId;\n  replyId?: ReplyId;\n  highlightedReplies?: ReplyId[];\n}\n\nexport default function RepliesDisplay({\n  replies,\n  navigation,\n  layer = 0,\n  postId,\n  replyId,\n  highlightedReplies = [],\n}: RepliesDisplayProps) {\n  const [nextPageData, setNextPageData] = useState<Paged<Reply>>();\n  const theme = useTheme();\n  const ctx = useContext(LotideContext).ctx;\n  const layerColors = [\n    theme.text,\n    theme.red,\n    theme.orange,\n    theme.yellow,\n    theme.green,\n    theme.teal,\n    theme.blue,\n    theme.indigo,\n    theme.purple,\n  ];\n\n  return (\n    <View>\n      {replies.items.map(reply => (\n        <ReplyDisplay\n          reply={reply}\n          layer={layer}\n          key={reply.id}\n          navigation={navigation}\n          layerColors={layerColors}\n          postId={postId}\n          highlightedReplies={highlightedReplies}\n        />\n      ))}\n      {replies.next_page !== null &&\n        nextPageData === undefined &&\n        (postId || replyId) && (\n          <Pressable\n            hitSlop={5}\n            onPress={() => {\n              if (replyId) {\n                LotideService.getReplyReplies(\n                  ctx,\n                  replyId,\n                  replies.next_page || undefined,\n                ).then(setNextPageData);\n              } else if (postId) {\n                LotideService.getPostReplies(\n                  ctx,\n                  postId,\n                  replies.next_page || undefined,\n                ).then(setNextPageData);\n              }\n            }}\n          >\n            <Text\n              style={{ color: theme.tint, paddingTop: 5, paddingBottom: 10 }}\n            >\n              More replies <Icon name=\"chevron-down-outline\" />\n            </Text>\n          </Pressable>\n        )}\n      {nextPageData !== undefined && (\n        <RepliesDisplay\n          replies={nextPageData}\n          navigation={navigation}\n          layer={layer}\n          postId={postId}\n          replyId={replyId}\n          highlightedReplies={highlightedReplies}\n        />\n      )}\n      {replies.next_page === null && layer === 0 && (\n        <Text style={{ margin: 17, color: theme.secondaryText }}>\n          {replies.items.length > 0 ? \"No more replies\" : \"No replies yet\"}\n        </Text>\n      )}\n    </View>\n  );\n}\n\nfunction ReplyDisplay({\n  reply,\n  layer = 0,\n  navigation,\n  layerColors,\n  postId,\n  highlightedReplies = [],\n}: {\n  reply: Reply;\n  layer: number;\n  navigation: any;\n  layerColors: ColorValue[];\n  postId?: PostId;\n  highlightedReplies?: ReplyId[];\n}) {\n  const [nextPageData, setNextPageData] = useState<Paged<Reply>>();\n  const [showChildren, setShowChildren] = React.useState(true);\n  const theme = useTheme();\n  const ctx = useContext(LotideContext).ctx;\n\n  return (\n    <View style={{ paddingLeft: 0 }}>\n      <View\n        style={{\n          paddingVertical: 8,\n          borderTopWidth: 0.5,\n          borderTopColor: theme.secondaryBackground,\n        }}\n      >\n        <Pressable\n          onPress={() => setShowChildren(s => !s)}\n          onLongPress={() => {\n            Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n            navigation.navigate(\"Reply\", {\n              id: reply.id,\n              title: reply.author.username,\n              html: reply.content_html,\n              type: \"reply\",\n            });\n          }}\n        >\n          <View\n            style={{\n              borderLeftWidth: 2,\n              borderColor: layerColors[layer % layerColors.length],\n              paddingLeft: 15,\n              paddingVertical: 3,\n              backgroundColor: highlightedReplies.includes(reply.id)\n                ? theme.secondaryBackground\n                : theme.background,\n            }}\n          >\n            <Text\n              style={{\n                color: theme.text,\n                fontSize: 16,\n                marginBottom: 5,\n                fontWeight: \"500\",\n              }}\n            >\n              {reply.author.username}\n              {\"  \"}\n              <Text style={{ color: theme.text, fontSize: 14 }}>\n                <Icon name=\"heart-outline\" size={14} color={theme.text} light />{\" \"}\n                {reply.score}\n                {\"   \"}\n                <ElapsedTime time={reply.created} />\n              </Text>\n            </Text>\n            {showChildren && !!reply.content_html && (\n              <ContentDisplay\n                contentHtml={reply.content_html}\n                contentText={reply.content_text}\n              />\n            )}\n          </View>\n        </Pressable>\n      </View>\n      {reply.replies !== null\n        ? reply.replies.items.length > 0 &&\n          showChildren && (\n            <View style={{ paddingLeft: 15 }}>\n              <RepliesDisplay\n                replies={reply.replies}\n                layer={layer + 1}\n                navigation={navigation}\n                postId={postId}\n                replyId={reply.id}\n                highlightedReplies={highlightedReplies}\n              />\n            </View>\n          )\n        : nextPageData === undefined && (\n            <Pressable\n              hitSlop={5}\n              onPress={() => {\n                LotideService.getReplyReplies(ctx, reply.id).then(\n                  setNextPageData,\n                );\n              }}\n            >\n              <View style={{ paddingHorizontal: 15, paddingBottom: 10 }}>\n                <Text style={{ color: theme.tint }}>\n                  More replies <Icon name=\"chevron-forward-outline\" />\n                </Text>\n              </View>\n            </Pressable>\n          )}\n      {nextPageData !== undefined && (\n        <View style={{ paddingLeft: 15 }}>\n          <RepliesDisplay\n            replies={nextPageData}\n            navigation={navigation}\n            layer={layer + 1}\n            postId={postId}\n            replyId={reply.id}\n          />\n        </View>\n      )}\n    </View>\n  );\n}\n","import Icon from \"@expo/vector-icons/Ionicons\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport {\n  StyleSheet,\n  StatusBar,\n  ScrollView,\n  Pressable,\n  Share,\n} from \"react-native\";\nimport * as Haptics from \"../services/HapticService\";\nimport PostDisplay from \"../components/PostDisplay\";\nimport { View, Text } from \"../components/Themed\";\nimport { useReplies } from \"../hooks/lotide\";\nimport useTheme from \"../hooks/useTheme\";\nimport { RootStackScreenProps } from \"../types\";\nimport LotideContext from \"../store/LotideContext\";\nimport RepliesDisplay from \"../components/RepliesDisplay\";\n\nexport default function ModalScreen({\n  navigation,\n  route,\n}: RootStackScreenProps<\"Post\">) {\n  const post = route.params.post;\n  const [highlightedReplies, setHighlightedReplies] = useState(\n    route.params.highlightedReplies,\n  );\n  const [focusId, setFocusId] = useState(0);\n  const ctx = useContext(LotideContext).ctx;\n  const replies = useReplies(\n    ctx,\n    post.id,\n    [focusId, highlightedReplies?.join(\",\")],\n    highlightedReplies?.[0],\n  );\n  const theme = useTheme();\n\n  useEffect(() => {\n    navigation.addListener(\"focus\", () => {\n      setFocusId(x => x + 1);\n    });\n  });\n\n  return (\n    <ScrollView>\n      <View\n        style={{\n          ...styles.item,\n          backgroundColor: theme.background,\n        }}\n      >\n        <PostDisplay\n          post={post}\n          navigation={navigation}\n          showHtmlContent\n          showCommunityHost\n        />\n        <View style={styles.actions}>\n          <Icon name=\"bookmark-outline\" size={25} color={theme.text} />\n          <Pressable\n            hitSlop={5}\n            onPress={() => {\n              Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n              navigation.navigate(\"Reply\", {\n                id: post.id,\n                title: post.title,\n                html: post.content_html,\n                type: \"post\",\n              });\n            }}\n          >\n            <Icon name=\"arrow-undo-outline\" size={25} color={theme.text} />\n          </Pressable>\n          <Pressable\n            hitSlop={5}\n            onPress={() => {\n              Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n              Share.share({\n                message: post.title,\n                url: `https://dev.goldandblack.xyz/p/posts/${post.id}`,\n                title: \"Hoot\",\n              });\n            }}\n          >\n            <Icon name=\"share-outline\" size={25} color={theme.text} />\n          </Pressable>\n        </View>\n        {highlightedReplies && (\n          <Pressable onPress={() => setHighlightedReplies(undefined)}>\n            <Text style={{ color: theme.tint, paddingVertical: 10 }}>\n              Show all replies\n            </Text>\n          </Pressable>\n        )}\n        <RepliesDisplay\n          replies={replies}\n          navigation={navigation}\n          postId={post.id}\n          highlightedReplies={highlightedReplies}\n        />\n        <View style={{ height: 300 }} />\n      </View>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: StatusBar.currentHeight || 0,\n  },\n  item: {\n    marginVertical: 0,\n    marginHorizontal: 0,\n  },\n  title: {\n    fontSize: 20,\n    padding: 15,\n  },\n  contentText: {\n    fontSize: 12,\n  },\n  link: {\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    backgroundColor: \"#8884\",\n    borderRadius: 5,\n    marginHorizontal: 15,\n  },\n  image: {\n    width: \"100%\",\n    height: undefined,\n    resizeMode: \"contain\",\n  },\n  foot: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: 15,\n    borderBottomColor: \"#8884\",\n    borderBottomWidth: 2,\n  },\n  by: {\n    fontSize: 11,\n  },\n  actions: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n    padding: 10,\n  },\n});\n","import * as React from 'react';\nimport { StyleSheet, Text, TouchableOpacity, View } from 'react-native';\n\nimport { RootStackScreenProps } from '../types';\n\nexport default function NotFoundScreen({ navigation }: RootStackScreenProps<'NotFound'>) {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>This screen doesn't exist.</Text>\n      <TouchableOpacity onPress={() => navigation.replace('Root')} style={styles.link}>\n        <Text style={styles.linkText}>Go to home screen!</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n  linkText: {\n    fontSize: 14,\n    color: '#2e78b7',\n  },\n});\n","import * as LotideService from \"../services/LotideService\";\n\nexport interface Origin {\n  type: \"post\" | \"comment\";\n  id: number;\n  content_text?: string;\n  content_html?: string;\n  author: Profile;\n}\n\nexport async function transformToFullNotification(\n  ctx: LotideContext,\n  notification: UserNotification,\n): Promise<FullNotification> {\n  const post = LotideService.getPost(ctx, notification.post.id);\n  const origin = notification.comment\n    ? originFromComment(ctx, notification.comment!)\n    : originFromPost(await post);\n  const reply = await LotideService.getReply(ctx, notification.reply.id);\n\n  return {\n    unseen: notification.unseen,\n    reply: {\n      id: reply.id,\n      content_text: reply.content_text,\n      content_html: reply.content_html,\n      author: reply.author,\n    },\n    origin: await origin,\n    post: await post,\n  };\n}\n\nexport async function originFromComment(\n  ctx: LotideContext,\n  commentId: ReplyId,\n): Promise<Origin> {\n  const comment = await LotideService.getReply(ctx, commentId);\n  return {\n    type: \"comment\",\n    id: commentId,\n    content_text: comment.content_text,\n    content_html: comment.content_html,\n    author: comment.author,\n  };\n}\n\nexport async function originFromPost(post: Post): Promise<Origin> {\n  return {\n    type: \"post\",\n    id: post.id,\n    content_text: post.title,\n    author: post.author,\n  };\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { FlatList, Pressable, StyleSheet } from \"react-native\";\nimport ActorDisplay from \"../components/ActorDisplay\";\nimport ContentDisplay from \"../components/ContentDisplay\";\nimport SuggestLogin from \"../components/SuggestLogin\";\n\nimport { Text, View } from \"../components/Themed\";\nimport useTheme from \"../hooks/useTheme\";\nimport * as LotideService from \"../services/LotideService\";\nimport LotideContext from \"../store/LotideContext\";\nimport { transformToFullNotification } from \"../transformers/NotificationTransformer\";\nimport { RootTabScreenProps } from \"../types\";\n\nexport default function NotificationScreen({\n  navigation,\n}: RootTabScreenProps<\"NotificationScreen\">) {\n  const [notifications, setNotifications] = useState<FullNotification[]>([]);\n  const [isRefreshing, setIsRefreshing] = useState(true);\n  const [focusId, setFocusId] = useState(0);\n  const theme = useTheme();\n  const ctx = useContext(LotideContext).ctx;\n\n  useEffect(() => {\n    if (!ctx.login) return;\n    LotideService.getNotifications(ctx).then(notifications => {\n      const promises = notifications.map(n =>\n        transformToFullNotification(ctx, n),\n      );\n      Promise.all(promises)\n        .then(setNotifications)\n        .then(() => setIsRefreshing(false));\n    });\n  }, [focusId]);\n\n  useEffect(\n    () => navigation.addListener(\"focus\", () => setFocusId(i => i + 1)),\n    [],\n  );\n\n  if (!ctx.login) return <SuggestLogin />;\n\n  const renderItem = ({ item }: { item: FullNotification }) => {\n    return (\n      <Pressable\n        style={[styles.item, { borderColor: theme.secondaryBackground }]}\n        onPress={() => {\n          const highlightedReplies =\n            item.origin.type === \"comment\"\n              ? [item.origin.id, item.reply.id]\n              : [item.reply.id];\n          navigation.navigate(\"Post\", {\n            post: item.post,\n            highlightedReplies,\n          });\n        }}\n      >\n        <Text style={styles.name}>{item.post.author.username}</Text>\n        <Text style={styles.title}>{item.post.title}</Text>\n        <Text>\n          In{\" \"}\n          <ActorDisplay\n            name={item.post.community.name}\n            host={item.post.community.host}\n            local={item.post.community.local}\n            showHost={\"always\"}\n            colorize={\"never\"}\n          />\n        </Text>\n        {item.origin.type === \"comment\" ? (\n          <>\n            <View style={[styles.level1, { borderColor: theme.secondaryText }]}>\n              <Text style={styles.name}>{item.origin.author.username}</Text>\n              <ContentDisplay\n                contentHtml={item.origin.content_html}\n                contentText={item.origin.content_text}\n              />\n            </View>\n            <View style={[styles.level2, { borderColor: theme.tint }]}>\n              <Text style={styles.name}>{item.reply.author.username}</Text>\n              <ContentDisplay\n                contentHtml={item.reply.content_html}\n                contentText={item.reply.content_text}\n              />\n            </View>\n          </>\n        ) : (\n          <>\n            <View style={[styles.level1, { borderColor: theme.tint }]}>\n              <Text style={styles.name}>{item.reply.author.username}</Text>\n              <ContentDisplay\n                contentHtml={item.reply.content_html}\n                contentText={item.reply.content_text}\n              />\n            </View>\n          </>\n        )}\n      </Pressable>\n    );\n  };\n\n  return (\n    <FlatList\n      style={styles.container}\n      data={notifications}\n      renderItem={renderItem}\n      keyExtractor={(item, index) => `${item.reply.id}-${index}`}\n      refreshing={isRefreshing}\n      onRefresh={() => {\n        setIsRefreshing(true);\n        setFocusId(i => i + 1);\n      }}\n    ></FlatList>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  item: { borderBottomWidth: 5, padding: 15 },\n  title: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n  },\n  level1: {\n    marginTop: 5,\n    borderLeftWidth: 2,\n    paddingLeft: 15,\n    padding: 5,\n  },\n  level2: {\n    marginTop: 5,\n    marginLeft: 15,\n    borderLeftWidth: 2,\n    paddingLeft: 15,\n    padding: 5,\n  },\n  name: {\n    fontWeight: \"600\",\n    marginBottom: 3,\n  },\n  thin: {\n    fontWeight: \"200\",\n  },\n});\n","import React, { useContext, useState } from \"react\";\nimport { Alert, Button, StyleSheet, TextInput } from \"react-native\";\nimport { Text, View } from \"../components/Themed\";\nimport useTheme from \"../hooks/useTheme\";\nimport { RootStackScreenProps } from \"../types\";\nimport * as LotideService from \"../services/LotideService\";\nimport LotideContext from \"../store/LotideContext\";\n\nexport default function NewCommunityScreen({\n  navigation,\n}: RootStackScreenProps<\"NewCommunity\">) {\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const theme = useTheme();\n  const ctx = useContext(LotideContext).ctx;\n\n  function submit() {\n    LotideService.newCommunity(ctx, name)\n      .then(async data => {\n        const id = data.community.id;\n        if (description) {\n          await LotideService.editCommunity(ctx, id, description);\n        }\n        await LotideService.followCommunity(ctx, id);\n        const community = await LotideService.getCommunity(ctx, id);\n        navigation.replace(\"Community\", { community });\n      })\n      .catch(e => Alert.alert(\"Failed to create community\", e));\n  }\n\n  return (\n    <View style={styles.root}>\n      <TextInput\n        style={[styles.input, { fontSize: 20, color: theme.text }]}\n        placeholder=\"Community Name\"\n        value={name}\n        onChangeText={setName}\n      />\n      {name.length >= 4 ? (\n        <>\n          <TextInput\n            style={[styles.input, { color: theme.text }]}\n            placeholder=\"Description (Optional)\"\n            value={description}\n            onChangeText={setDescription}\n          />\n          <Button\n            title=\"Submit\"\n            color={theme.tint}\n            onPress={submit}\n            accessibilityLabel=\"Create new community\"\n          />\n        </>\n      ) : (\n        <Text>{name.length > 0 && 4 - name.length}</Text>\n      )}\n    </View>\n  );\n}\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    alignItems: \"flex-start\",\n    padding: 15,\n    height: \"100%\",\n    width: \"100%\",\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: \"80%\",\n  },\n  inputContainer: {\n    width: \"100%\",\n    padding: 20,\n  },\n  input: {\n    paddingVertical: 10,\n    width: \"100%\",\n    borderRadius: 8,\n  },\n  item: {\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    marginHorizontal: 20,\n    marginBottom: 1,\n  },\n});\n","/**\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\n * https://reactnavigation.org/docs/getting-started\n *\n */\nimport React, { useState } from \"react\";\nimport Icon from \"@expo/vector-icons/Ionicons\";\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\nimport {\n  NavigationContainer,\n  DefaultTheme,\n  DarkTheme,\n} from \"@react-navigation/native\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport { ActionSheetIOS, ColorSchemeName, Pressable } from \"react-native\";\n\nimport Colors from \"../constants/Colors\";\nimport useColorScheme from \"../hooks/useColorScheme\";\nimport {\n  RootStackParamList,\n  RootTabParamList,\n  RootTabScreenProps,\n} from \"../types\";\nimport LinkingConfiguration from \"./LinkingConfiguration\";\n\nimport FeedScreen from \"../screens/FeedScreen\";\nimport SearchScreen from \"../screens/SearchScreen\";\nimport ProfileScreen from \"../screens/ProfileScreen\";\nimport NewPostScreen from \"../screens/NewPostScreen\";\nimport SettingsScreen from \"../screens/SettingsScreen\";\nimport RegisterScreen from \"../screens/RegisterScreen\";\nimport CommunityScreen from \"../screens/CommunityScreen\";\nimport ReplyScreen from \"../screens/ReplyScreen\";\nimport ModalScreen from \"../screens/ModalScreen\";\nimport NotFoundScreen from \"../screens/NotFoundScreen\";\nimport NotificationScreen from \"../screens/NotificationScreen\";\nimport NewCommunityScreen from \"../screens/NewCommunity\";\n\nexport default function Navigation({\n  colorScheme,\n}: {\n  colorScheme: ColorSchemeName;\n}) {\n  return (\n    <NavigationContainer\n      linking={LinkingConfiguration}\n      theme={colorScheme === \"dark\" ? DarkTheme : DefaultTheme}\n    >\n      <RootNavigator />\n    </NavigationContainer>\n  );\n}\n\n/**\n * A root stack navigator is often used for displaying modals on top of all other content.\n * https://reactnavigation.org/docs/modal\n */\nconst Stack = createNativeStackNavigator<RootStackParamList>();\n\nfunction RootNavigator() {\n  return (\n    <Stack.Navigator>\n      <Stack.Screen\n        name=\"Root\"\n        component={BottomTabNavigator}\n        options={{ headerShown: false }}\n      />\n      <Stack.Screen name=\"Web\" component={ModalScreen} />\n      <Stack.Screen name=\"Post\" component={ModalScreen} />\n      <Stack.Screen name=\"Reply\" component={ReplyScreen} />\n      <Stack.Screen name=\"Community\" component={CommunityScreen} />\n      <Stack.Screen name=\"NewCommunity\" component={NewCommunityScreen} />\n      <Stack.Screen name=\"Settings\" component={SettingsScreen} />\n      <Stack.Screen name=\"Register\" component={RegisterScreen} />\n      <Stack.Screen\n        name=\"NotFound\"\n        component={NotFoundScreen}\n        options={{ title: \"Oops!\" }}\n      />\n      <Stack.Group screenOptions={{ presentation: \"modal\" }}>\n        <Stack.Screen name=\"Modal\" component={ModalScreen} />\n      </Stack.Group>\n    </Stack.Navigator>\n  );\n}\n\n/**\n * A bottom tab navigator displays tab buttons on the bottom of the display to switch screens.\n * https://reactnavigation.org/docs/bottom-tab-navigator\n */\nconst BottomTab = createBottomTabNavigator<RootTabParamList>();\n\nfunction BottomTabNavigator({ navigation }: any) {\n  const [sort, setSort] = useState<SortOption>(\"hot\");\n  const colorScheme = useColorScheme();\n\n  return (\n    <BottomTab.Navigator\n      initialRouteName=\"FeedScreen\"\n      screenOptions={{\n        tabBarActiveTintColor: Colors[colorScheme].tint as unknown as string,\n        tabBarShowLabel: false,\n      }}\n    >\n      <BottomTab.Screen\n        name=\"FeedScreen\"\n        component={FeedScreen}\n        initialParams={{ sort }}\n        options={({ navigation }: RootTabScreenProps<\"FeedScreen\">) => ({\n          title: \"Hoot\",\n          tabBarIcon: ({ color }) => (\n            <TabBarIcon name=\"newspaper-outline\" color={color} />\n          ),\n          headerRight: () => (\n            <Pressable\n              onPress={() => {\n                ActionSheetIOS.showActionSheetWithOptions(\n                  {\n                    options: [\"Cancel\", \"Hot\", \"New\"],\n                    title: \"Sort by:\",\n                    cancelButtonIndex: 0,\n                  },\n                  buttonIndex => {\n                    const newSort = [sort, \"hot\", \"new\"][\n                      buttonIndex\n                    ] as SortOption;\n                    setSort(newSort);\n                    navigation.navigate(\"FeedScreen\", { sort: newSort });\n                  },\n                );\n              }}\n              style={({ pressed }) => ({\n                opacity: pressed ? 0.5 : 1,\n              })}\n            >\n              <Icon\n                name={\n                  { hot: \"flame-outline\", new: \"time-outline\" }[sort] as any\n                }\n                size={25}\n                color={Colors[colorScheme].tint}\n                style={{ marginRight: 15 }}\n              />\n            </Pressable>\n          ),\n        })}\n      />\n      <BottomTab.Screen\n        name=\"SearchScreen\"\n        component={SearchScreen}\n        options={{\n          title: \"Communities\",\n          tabBarIcon: ({ color }) => (\n            <TabBarIcon name=\"search-outline\" color={color} />\n          ),\n        }}\n      />\n      <BottomTab.Screen\n        name=\"NewPostScreen\"\n        component={NewPostScreen}\n        options={{\n          title: \"New Post\",\n          tabBarIcon: ({ color }) => (\n            <TabBarIcon name=\"add-outline\" color={color} size={40} />\n          ),\n        }}\n      />\n      <BottomTab.Screen\n        name=\"NotificationScreen\"\n        component={NotificationScreen}\n        options={{\n          title: \"Notifications\",\n          tabBarIcon: ({ color }) => (\n            <TabBarIcon name=\"notifications-outline\" color={color} />\n          ),\n        }}\n      />\n      <BottomTab.Screen\n        name=\"ProfileScreen\"\n        component={ProfileScreen}\n        options={{\n          title: \"Profile\",\n          tabBarIcon: ({ color }) => (\n            <TabBarIcon name=\"person-circle-outline\" color={color} />\n          ),\n          headerLeft: () => (\n            <Pressable\n              onPress={() => {\n                navigation.navigate(\"Settings\");\n              }}\n              style={({ pressed }) => ({\n                opacity: pressed ? 0.5 : 1,\n              })}\n            >\n              <Icon\n                name=\"cog-outline\"\n                size={25}\n                color={Colors[colorScheme].secondaryText}\n                style={{ marginLeft: 15 }}\n              />\n            </Pressable>\n          ),\n        }}\n      />\n    </BottomTab.Navigator>\n  );\n}\n\n/**\n * You can explore the built-in icon families and icons on the web at https://icons.expo.fyi/\n */\nfunction TabBarIcon(props: {\n  name: React.ComponentProps<typeof Icon>[\"name\"];\n  color: string;\n  size?: number;\n}) {\n  return <Icon size={30} style={{ marginBottom: -3 }} {...props} />;\n}\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { StatusBar } from \"expo-status-bar\";\nimport React, { useEffect, useState } from \"react\";\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\n\nimport useCachedResources from \"./hooks/useCachedResources\";\nimport useColorScheme from \"./hooks/useColorScheme\";\nimport Navigation from \"./navigation\";\nimport LotideContext, { defaultLotideContext } from \"./store/LotideContext\";\nimport * as StorageService from \"./services/StorageService\";\nimport * as LotideService from \"./services/LotideService\";\n\nexport default function App() {\n  const isLoadingComplete = useCachedResources();\n  const colorScheme = useColorScheme();\n  const [ctx, setContext] = useState<LotideContext>(defaultLotideContext);\n\n  useEffect(() => {\n    StorageService.lotideContext.query().then(ctx => {\n      if (ctx !== undefined) {\n        setContext(ctx);\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    if (!ctx.apiUrl) return;\n    LotideService.getInstanceInfo(ctx)\n      .then(data => {\n        console.log(data);\n        if (data.software.version !== \"0.9.0-pre\") {\n          throw \"Bad version\";\n        }\n      })\n      .catch(() => {\n        StorageService.lotideContextKV\n          .remove(`${ctx.login?.user.username}@${ctx.apiUrl}`)\n          .then(() => applyNewContext({}));\n      });\n    if (!ctx.login) return;\n    LotideService.getUserData(ctx, ctx.login.user.id).catch(() => {\n      StorageService.lotideContextKV\n        .remove(`${ctx.login?.user.username}@${ctx.apiUrl}`)\n        .then(() => applyNewContext({}));\n    });\n  }, [ctx]);\n\n  function applyNewContext(ctx: LotideContext) {\n    StorageService.lotideContextKV\n      .store(ctx)\n      .then(() => AsyncStorage.setItem(\"@lotide_ctx\", JSON.stringify(ctx)))\n      .then(() => setContext(ctx));\n  }\n\n  if (!isLoadingComplete) {\n    return null;\n  } else {\n    return (\n      <LotideContext.Provider\n        value={{\n          ctx,\n          setContext: (ctx: LotideContext) => applyNewContext(ctx),\n        }}\n      >\n        <SafeAreaProvider>\n          <Navigation colorScheme={colorScheme} />\n          <StatusBar />\n        </SafeAreaProvider>\n      </LotideContext.Provider>\n    );\n  }\n}\n","import { FontAwesome } from '@expo/vector-icons';\nimport * as Font from 'expo-font';\nimport * as SplashScreen from 'expo-splash-screen';\nimport * as React from 'react';\n\nexport default function useCachedResources() {\n  const [isLoadingComplete, setLoadingComplete] = React.useState(false);\n\n  // Load any resources or data that we need prior to rendering the app\n  React.useEffect(() => {\n    async function loadResourcesAndDataAsync() {\n      try {\n        SplashScreen.preventAutoHideAsync();\n\n        // Load fonts\n        await Font.loadAsync({\n          ...FontAwesome.font,\n          'space-mono': require('../assets/fonts/SpaceMono-Regular.ttf'),\n        });\n      } catch (e) {\n        // We might want to provide this error information to an error reporting service\n        console.warn(e);\n      } finally {\n        setLoadingComplete(true);\n        SplashScreen.hideAsync();\n      }\n    }\n\n    loadResourcesAndDataAsync();\n  }, []);\n\n  return isLoadingComplete;\n}\n","module.exports = __webpack_public_path__ + \"./fonts/SpaceMono-Regular.ttf\";"],"sourceRoot":""}
(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{266:function(e,t,n){"use strict";n.d(t,"a",(function(){return gn}));var r=n(8),a=n.n(r),o=n(63),i=n(267),c=n(0),l=n.n(c),s=n(200),u=n(4),d=n.n(u),m=n(6),p=n.n(m),f=n(374),y=n(379),h=n(198);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=n(138);function v(){return Object(E.a)()}var w=n(45),x=n.n(w),O=n(34),S=n(375),j=n(376),P=n(164),T=n(378),C=n(377),k=n(151),z=n(20),L=n(5),_="web"===L.a.OS?function(){}:n(151).PlatformColor,I={light:"ios"===L.a.OS?B():{tint:"orange",secondaryTint:"purple",text:"#111",secondaryText:"#333",placeholderText:"#444",background:"#fff",secondaryBackground:"#eee",tertiaryBackground:"#ccc",tabIconDefault:"#ccc",tabIconSelected:"orange",red:"red",orange:"orange",yellow:"yellow",green:"green",teal:"eeal",blue:"blue",indigo:"indigo",purple:"purple"},dark:"ios"===L.a.OS?B():{tint:"orange",secondaryTint:"purple",text:"#fff",secondaryText:"#666",placeholderText:"#aaa",background:"#111",secondaryBackground:"#222",tertiaryBackground:"#222",tabIconDefault:"#ccc",tabIconSelected:"orange",red:"red",orange:"orange",yellow:"yellow",green:"green",teal:"eeal",blue:"#68f",indigo:"indigo",purple:"purple"}};function B(){return{tint:_("systemOrange"),secondaryTint:_("systemPurple"),text:_("label"),secondaryText:_("secondaryLabel"),placeholderText:_("placeholderText"),background:_("systemBackground"),secondaryBackground:_("secondarySystemBackground"),tertiaryBackground:_("tertiarySystemBackground"),tabIconDefault:_("secondaryLabel"),tabIconSelected:_("systemOrange"),red:_("systemRed"),orange:_("systemOrange"),yellow:_("systemYellow"),green:_("systemGreen"),teal:_("systemTeal"),blue:_("systemBlue"),indigo:_("systemIndigo"),purple:_("systemPurple")}}var D=n(171),H={prefixes:[D.a("/")],config:{screens:{Root:{screens:{TabOne:{screens:{TabOneScreen:"one"}},TabTwo:{screens:{TabTwoScreen:"two"}}}},Modal:"modal",NotFound:"*"}}},R=n(2),V=n(61),W=n(48),N=n(252),F=n(35),U=n(15),A=n.n(U),M=n(29),G=n(7),$=n(66);function J(){var e=v();return I[e]}var K=["style","secondary","tint"],q=["style"],Y=["style","placeholderTextColor"];function X(e){var t=e.style,n=e.secondary,r=e.tint,a=A()(e,K),o=J(),i=n||r?n&&!r?o.secondaryText:r&&!n?o.tint:o.secondaryTint:o.text;return l.a.createElement(M.a,x()({style:[{color:i},t]},a))}function Q(e){var t=e.style,n=A()(e,q),r=J().background;return l.a.createElement(G.a,x()({style:[{backgroundColor:r},t]},n))}var Z=Object(c.forwardRef)((function(e,t){var n=e.style,r=e.placeholderTextColor,a=A()(e,Y),o=J(),i={backgroundColor:o.secondaryBackground,paddingHorizontal:10,paddingVertical:5,borderRadius:8,color:o.text};return l.a.createElement($.a,x()({ref:t,style:[i,n],placeholderTextColor:r||o.placeholderText},a))}));function ee(e){return Object(c.useMemo)((function(){return function(e){var t=Math.round((Date.now()-Date.parse(e))/1e3),n=Math.round(t/60),r=Math.round(n/60),a=Math.round(r/24),o=Math.round(a/7),i=Math.round(a/30.4),c=Math.round(a/365);return n<60&&n+"min"||r<24&&r+"h"||a<7&&a+"d"||o<5&&o+"w"||i<12&&i+"mo"||c+"y"}(e)}),[e])}function te(e){var t=ee(e.time);return l.a.createElement(z.a,{hitSlop:8,onPress:function(){return F.a.alert("Date posted",e.time)}},l.a.createElement(X,{style:ne.root},l.a.createElement(N.a,{name:"time-outline",size:14})," ",t))}var ne=R.a.create({root:{}}),re=n(192),ae=n(123);function oe(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"!==L.a.OS){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,p.a.awrap(re.a(e));case 4:case"end":return t.stop()}}),null,null,null,Promise)}var ie={apiUrl:"https://hoot.goldandblack.xyz/api/unstable",login:void 0},ce=Object(c.createContext)({ctx:ie,setContext:function(e){}}),le=n(135),se=n(172),ue=Object(se.b)({name:"vote",initialState:{post:{},reply:{}},reducers:{setVote:function(e,t){var n=t.payload;e[n.type][n.id]=n.vote}}}),de=ue.actions.setVote,me=ue.reducer;function pe(e,t,n,r){var a,o=arguments;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=o.length>4&&void 0!==o[4]&&o[4],e.apiUrl){i.next=3;break}throw"No API url";case 3:if(a||void 0!=e.login){i.next=5;break}throw"Not logged in";case 5:return i.abrupt("return",fetch(e.apiUrl+"/"+n,{method:t,headers:fe(e),body:void 0!==r?JSON.stringify(r):void 0}).then((function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=4;break}return t.abrupt("return",e);case 4:return t.next=6,p.a.awrap(e.text());case 6:throw t.sent;case 7:case"end":return t.stop()}}),null,null,null,Promise)})).catch((function(r){throw console.error("Lotide Service Error: "+t+" "+e.apiUrl+"/"+n+"\n"+r,e),r})));case 6:case"end":return i.stop()}}),null,null,null,Promise)}function fe(e){return void 0!==e.login?{Authorization:"Bearer "+e.login.token,"Content-Type":"application/json"}:void 0}function ye(e){var t,n,r=arguments;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=r.length>1&&void 0!==r[1]&&r[1],n=r.length>2?r[2]:void 0,a.abrupt("return",pe(e,"GET","communities?include_your=true&limit=100"+(t?"&your_follow.accepted=true":"")+(n?"&page="+n:"")).then((function(e){return e.json()})).then((function(e){return e})));case 3:case"end":return a.stop()}}),null,null,null,Promise)}function he(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"GET","communities/"+t+"?include_your=true").then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function ge(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"GET","users/"+t,void 0,!0).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function be(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"POST","communities/"+t+"/follow",{try_wait_for_accept:!0}).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function Ee(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",pe(e,"PATCH","communities/"+t,{description:n}));case 1:case"end":return r.stop()}}),null,null,null,Promise)}function ve(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",pe(e,"GET","instance",void 0,!0).then((function(e){return e.json()})));case 1:case"end":return t.stop()}}),null,null,null,Promise)}function we(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"GET","posts/"+t,void 0,!0).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function xe(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"GET","comments/"+t,void 0,!0).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function Oe(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",pe(e,"GET","posts/"+t+"/replies?limit=10&include_your=true"+(n?"&page="+n:"")).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}function Se(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",pe(e,"GET","comments/"+t+"/replies?limit=10&include_your=true&sort=hot"+(n?"&page="+n:"")).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}function je(e,t){var n=null!==t.your_vote&&void 0!==t.your_vote,r=Object(le.c)((function(n){return n.vote[e][t.id]})),a=Object(le.b)(),o=Object(c.useContext)(ce).ctx;Object(c.useEffect)((function(){void 0===r&&l(n)}),[n]);var i=!!r;function l(n){a(de({type:e,id:t.id,vote:n}))}var s=i&&!n,u=!i&&n;return{isUpvoted:i,score:t.score+ +s-+u,addVote:function(){"post"==e?function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"PUT","posts/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return l(!0)})):function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"PUT","comments/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return l(!0)}))},removeVote:function(){"post"==e?function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"DELETE","posts/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return l(!1)})):function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"DELETE","comments/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return l(!1)}))}}}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e){var t=J(),n=Object(c.useContext)(ce).ctx,r=je(e.type,e.content),a=r.isUpvoted,o=r.score,i=r.addVote,s=r.removeVote;var u=a?t.red:t.text;return l.a.createElement(z.a,{onPress:function(){return oe(ae.a.Light),void(void 0!==n.login?a?s():i():F.a.alert("Login to like","Leave a like when you login to a community"))},hitSlop:7,style:[ke.root,e.style]},l.a.createElement(Q,{style:ke.root},l.a.createElement(N.a,{name:a?"heart":"heart-outline",color:u,size:25}),!e.hideCount&&l.a.createElement(X,{style:Te(Te({},ke.score),{},{color:u})},"  "+o+"  ")))}var ke=R.a.create({root:Te({display:"flex",flexDirection:"row",alignItems:"center"},"web"==L.a.OS?{cursor:"pointer"}:{}),score:{fontSize:18,minWidth:28}}),ze=n(162),Le=n.n(ze),_e=n(269);function Ie(e){var t=J(),n=Object(c.useMemo)((function(){return e.contentHtml||(""===(t=e.contentMarkdown)||void 0===t?void 0:t.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/^\> (.*$)/gim,"<blockquote>$1</blockquote>").replace(/\*\*(.*)\*\*/gim,"<b>$1</b>").replace(/\*(.*)\*/gim,"<i>$1</i>").replace(/!\[(.*?)\]\((.*?)\)/gim,"<img alt='$1' src='$2' />").replace(/\[(.*?)\]\((.*?)\)/gim,"<a href='$2'>$1</a>").replace(/\n$/gim,"<br />").trim())||"<p>"+e.contentText+"</p>";var t}),[e.contentHtml,e.contentMarkdown,e.contentText]);return l.a.createElement(_e.a,{RootComponent:function(e){return l.a.createElement(M.a,e)},value:n.replace(/\n/g,""),renderNode:Be(t),stylesheet:{a:{color:t.secondaryTint},cite:{fontStyle:"italic"},del:{textDecorationLine:"line-through",textDecorationStyle:"solid"},dfn:{fontStyle:"italic"},ins:{textDecorationLine:"underline"},samp:{fontFamily:"ios"===L.a.OS?"Menlo":"monospace"},small:{fontSize:10}},textComponentProps:{style:{color:t.text}},onLinkLongPress:function(e){return F.a.alert("Link",e)}})}var Be=function(e){return function(t,n,r,a,o){if(["iframe","script"].includes(t.name||""))return null;function i(){return o(t.children,a)}switch(t.name){case"abbr":return l.a.createElement(z.a,{key:n,onPress:function(){return F.a.alert("Abbr.",t.attribs.title)}},l.a.createElement(M.a,{style:{textDecorationLine:"underline",textDecorationStyle:"dotted"}},i()));case"blockquote":return l.a.createElement(M.a,{key:n},l.a.createElement(G.a,{style:{padding:10}},l.a.createElement(G.a,{style:{borderLeftWidth:2,borderColor:e.secondaryText,paddingLeft:10,paddingVertical:5}},i())),"\n");case"details":return l.a.createElement(De,{key:n},i());case"dl":case"dt":case"dd":return l.a.createElement(M.a,{key:n},i(),"\n");case"figure":return l.a.createElement(G.a,{key:n},i());case"hr":return l.a.createElement(G.a,{key:n,style:{width:200,alignSelf:"stretch",borderBottomWidth:R.a.hairlineWidth||1,borderColor:e.secondaryText}});case"kbd":return l.a.createElement(M.a,{key:n,style:{backgroundColor:e.tertiaryBackground}}," ",i()," ");case"img":return l.a.createElement(M.a,{key:n},"[Image not displayed]");case"li":return l.a.createElement(M.a,{key:n},"\u2022 ",i(),"\n");case"sub":return l.a.createElement(M.a,{key:n,style:{fontSize:10}},i());case"summary":return l.a.createElement(M.a,{key:n},i());case"sup":return l.a.createElement(G.a,{key:n},l.a.createElement(M.a,{style:{fontSize:10}},i()));default:return}}};function De(e){var t=e.children,n=Object(c.useState)(!1),r=a()(n,2),o=r[0],i=r[1],s=J(),u=t.filter((function(e){return""!==e.props.children.toString().trim()})),d=Le()(u),m=d[0],p=d.slice(1);return l.a.createElement(G.a,null,l.a.createElement(z.a,{hitSlop:5,onPress:function(){return i((function(e){return!e}))}},l.a.createElement(M.a,{style:{color:s.secondaryTint}},o?l.a.createElement(O.a,{name:"chevron-down-outline"}):l.a.createElement(O.a,{name:"chevron-forward-outline"}),m)),o&&p)}function He(e){var t=J(),n=e.colorize||"never",r=e.showHost||"only_foreign",a=function(e,t){return"always"===e||"never"!==e&&!t},o=a(n,e.local),i=a(r,e.local),c=o?{color:e.local?t.blue:t.green}:{};return l.a.createElement(X,{style:[Re.root,e.style]},l.a.createElement(X,{style:[Re.name,c,e.styleName]},e.name),i&&l.a.createElement(X,{style:[Re.host,{color:t.secondaryText},e.styleHost]},e.newLine&&"\n",!e.newLine&&"@",e.host))}var Re=R.a.create({root:{},name:{fontWeight:"500"},host:{fontWeight:"200"}}),Ve=l.a.memo(He);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e){var t=Object(c.useState)(1),n=a()(t,2),r=n[0],o=n[1],i=Object(c.useMemo)((function(){return!!(t=e.post.href)&&[".png",".jpg",".jpeg",".bmp",".gif",".webp"].some((function(e){return t.endsWith(e)}));var t}),[e.post.href]),s=J(),u=e.post;return l.a.createElement(Q,null,l.a.createElement(X,{style:Ue.title},e.post.sticky&&l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{name:"pin",size:25,color:s.secondaryTint})," "),e.post.title),e.post.href&&(i?l.a.createElement(W.a,{style:Ne(Ne({},Ue.image),{},{aspectRatio:r,backgroundColor:s.secondaryBackground}),source:{uri:e.post.href},onLoad:function(e){return"web"!==L.a.OS&&o(Math.max(e.nativeEvent.source.width/e.nativeEvent.source.height,.5))}}):l.a.createElement(z.a,{style:[Ue.link,{backgroundColor:s.secondaryBackground}],onPress:function(){oe(ae.a.Medium),e.post.href&&Object(D.b)(e.post.href)}},l.a.createElement(X,null,e.post.href))),e.showHtmlContent&&!!e.post.content_html&&l.a.createElement(Q,{style:{padding:15}},l.a.createElement(Ie,{contentHtml:e.post.content_html,contentText:e.post.content_text})),e.showAuthor&&l.a.createElement(Q,{style:{display:"flex",flexDirection:"row",alignItems:"center",paddingHorizontal:15,paddingTop:15}},l.a.createElement(X,{style:Ue.by},"by","   "),l.a.createElement(Ve,{name:u.author.username,host:u.author.host,local:u.author.local,showHost:"only_foreign",colorize:"always",newLine:!0})),l.a.createElement(Q,{style:Ue.foot},l.a.createElement(z.a,{hitSlop:8,onPress:function(){return e.navigation.navigate("Community",{community:e.post.community})},style:[Ue.footItem,Ue.pointer,{display:"flex",flexDirection:"row",alignItems:"center"}]},e.showAuthor&&l.a.createElement(X,{style:Ue.by},"in","   "),l.a.createElement(Ve,{name:u.community.name,host:u.community.host,local:u.community.local,showHost:"only_foreign",colorize:e.showAuthor?"always":"never",newLine:!0})),l.a.createElement(Q,{style:{flex:1}}),l.a.createElement(Q,{style:Ue.footItem},l.a.createElement(te,{time:e.post.created})),l.a.createElement(Q,{style:Ue.footItem},l.a.createElement(X,{style:Ue.footText},l.a.createElement(O.a,{name:"chatbubble-outline",size:12})," ",e.post.replies_count_total)),l.a.createElement(Q,{style:Ue.footItem},l.a.createElement(Ce,{type:"post",content:u}))))}var Ue=R.a.create({item:{marginVertical:0,marginHorizontal:0},pointer:Ne({},"web"==L.a.OS?{cursor:"pointer"}:{}),title:{fontSize:20,padding:15},contentText:{fontSize:12},link:Ne({paddingVertical:10,paddingHorizontal:15,borderRadius:5,marginHorizontal:15},"web"==L.a.OS?{cursor:"pointer"}:{}),image:{width:"100%",height:void 0,resizeMode:"contain"},foot:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},footText:{},footItem:{padding:15},by:{fontSize:11},score:{fontSize:18},actions:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",padding:10}});var Ae=n(19),Me=n.n(Ae);function Ge(e,t,n){var r=Object(c.useState)([]),o=a()(r,2),i=o[0],l=o[1],s=Object(c.useState)(null),u=a()(s,2),d=u[0],m=u[1],f=Object(c.useState)(null),y=a()(f,2),h=y[0],g=y[1],b=Object(c.useState)(void 0),E=a()(b,2),v=E[0],w=E[1],x=Object(c.useState)(0),O=a()(x,2),S=O[0],j=O[1],P=Object(c.useContext)(ce).ctx,T=function(e,t){var n=Object(c.useState)(0),r=a()(n,2),o=r[0],i=r[1],l=Object(c.useState)(!0),s=a()(l,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){e((function(){return d(!1)}))}),[o].concat(Me()(t))),[u,function(){i((function(e){return e+1})),d(!0)}]}((function(r){P.login&&void 0===v&&(w(d),function(e,t){var n,r,a,o,i=arguments;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:"hot",r=i.length>3?i[3]:void 0,a=i.length>4?i[4]:void 0,o=[null===t?"posts?sort="+n:"posts?page="+t+"&sort="+n,"include_your=true",void 0!==r&&"in_your_follows="+r,a&&"community="+a].filter((function(e){return e})).join("&"),c.abrupt("return",pe(e,"GET",o).then((function(e){return e.json()})));case 5:case"end":return c.stop()}}),null,null,null,Promise)}(P,d,e,t,n).then((function(e){l((function(t){return[].concat(Me()(t),Me()(e.items))})),g(e.next_page),w(void 0)})).then((function(){return r()})).catch((function(e){r(),l((function(t){return[].concat(Me()(t),[{id:-1,title:"Lotide error",content_html:"<p>Error: "+e+"</p>",created:"",replies_count_total:0,score:0,sticky:!0,author:{id:-1,username:"Failure",local:!1,host:"hoot-mobile"},community:{id:-1,name:"something-went-wrong",local:!1,host:"hoot-mobile"}}])}))})))}),[S,d]),C=a()(T,2),k=C[0],z=C[1];return Object(c.useEffect)((function(){l([]),m(null),g(null),z()}),[P,e]),[i,k,function(){l([]),m(null),g(null),j((function(e){return e+1})),z()},function(){null!==h&&m(h)}]}var $e=n(46),Je=[{name:"Gold&Black",domain:"hoot.goldandblack.xyz"},{name:"Narwhal.City",domain:"narwhal.city"},{name:"FBXL",domain:"lotide.fbxl.net"},{name:"Tide C",domain:"c.tide.tk"},{name:"Exopla",domain:"lotide.exopla.net.eu.org"},{name:"Narwhal.City (Dev)",domain:"dev.narwhal.city"},{name:"Tide B",domain:"b.tide.tk"},{name:"Tide A",domain:"a.tide.tk"}],Ke=function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.getItem("@lotide_ctx").then((function(e){return null!==e?JSON.parse(e):void 0})));case 1:case"end":return e.stop()}}),null,null,null,Promise)},qe=function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.login){n.next=2;break}return n.abrupt("return");case 2:t=e.login.user.username+"@"+e.apiUrl,tt.store("@lotide_ctx_arr",t,e);case 4:case"end":return n.stop()}}),null,null,null,Promise)},Ye=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",tt.query("@lotide_ctx_arr",e));case 1:case"end":return t.stop()}}),null,null,null,Promise)},Xe=function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tt.listKeys("@lotide_ctx_arr"));case 1:case"end":return e.stop()}}),null,null,null,Promise)},Qe=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",tt.remove("@lotide_ctx_arr",e));case 1:case"end":return t.stop()}}),null,null,null,Promise)},Ze=function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.login){n.next=2;break}return n.abrupt("return");case 2:t=e.login.user.username+"@"+e.apiUrl,tt.store("@lotide_ctx_arr",t,{apiUrl:e.apiUrl});case 4:case"end":return n.stop()}}),null,null,null,Promise)},et=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(o.a.getItem("@lotide_ctx_arr"));case 2:return e=t.sent,t.abrupt("return",e?JSON.parse(e):{});case 4:case"end":return t.stop()}}),null,null,null,Promise)},tt={store:function(e,t,n){var r,a;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,p.a.awrap(o.a.getItem(e));case 2:return r=i.sent,a=r?JSON.parse(r):{},a[t]=n,i.next=7,p.a.awrap(o.a.setItem(e,JSON.stringify(a)));case 7:case"end":return i.stop()}}),null,null,null,Promise)},query:function(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(o.a.getItem(e));case 2:return n=r.sent,r.abrupt("return",n?JSON.parse(n)[t]:void 0);case 4:case"end":return r.stop()}}),null,null,null,Promise)},listKeys:function(e){var t,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(o.a.getItem(e));case 2:return t=r.sent,n=t?JSON.parse(t):{},r.abrupt("return",Object.keys(n));case 5:case"end":return r.stop()}}),null,null,null,Promise)},remove:function(e,t){var n,r,a;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,p.a.awrap(o.a.getItem(e));case 2:return n=i.sent,r=n?JSON.parse(n):{},a=r[t],delete r[t],i.next=8,p.a.awrap(o.a.setItem(e,JSON.stringify(r)));case 8:return i.abrupt("return",a);case 9:case"end":return i.stop()}}),null,null,null,Promise)}};function nt(e){var t=Object(c.useState)(""),n=a()(t,2),r=n[0],o=n[1],i=Object(c.useState)(Je),s=a()(i,2),u=s[0],d=s[1],m=Object(c.useState)([]),p=a()(m,2),f=p[0],y=p[1],h=J(),g=Object(c.useContext)(ce);Object(c.useEffect)((function(){Je.map((function(e,t){return ve({apiUrl:"https://"+e.domain+"/api/unstable"}).then((function(e){d((function(n){return n.map((function(n,r){return t!==r?n:{name:n.name,domain:n.domain,instanceInfo:e}}))}))})).catch((function(){d((function(e){return e.map((function(e,n){return t!==n?e:{name:e.name,domain:e.domain,instanceInfo:null}}))}))}))}))}),[]),Object(c.useEffect)((function(){et().then((function(e){return Object.entries(e)})).then(y)}),[]);return l.a.createElement($e.a,{contentContainerStyle:rt.root},l.a.createElement(X,{style:rt.title},"Login to continue"),f.length>0&&l.a.createElement(X,{style:rt.subtitle},"Select an existing profile"),f.map((function(t){var n,r=t[0].split("@"),o=a()(r,2),i=o[0],c=o[1],s=!!t[1].login,u=s?h.text:h.secondaryText,d=c.replace("http://","").replace("https://","").split(/[/?#]/)[0],m=null==(n=Je.find((function(e){return e.domain==d})))?void 0:n.name;return l.a.createElement(z.a,{key:t[0],onPress:function(){s?g.setContext(t[1]):e.onSelect(d.toLowerCase(),void 0,i)},style:{display:"flex",flexDirection:"row",alignItems:"center"}},l.a.createElement(O.a,{name:s?"lock-open-outline":"lock-closed-outline",color:u,style:{marginRight:10},size:20}),l.a.createElement(Ve,{name:i,host:d,local:!0,showHost:"always",newLine:!0,style:{paddingVertical:15,paddingBottom:10},styleName:{color:u}}),l.a.createElement(Q,{style:{flex:1}}),l.a.createElement(X,{style:{fontSize:16,color:u,fontFamily:"ios"===L.a.OS?"Georgia":"serif"}},m))})),l.a.createElement(X,{style:rt.subtitle},f.length>0?"Or sign into a new acount":"Enter a host or select one below"),l.a.createElement(Z,{placeholder:"Host domain",style:{paddingVertical:10,paddingHorizontal:10},value:r,onChangeText:o,onSubmitEditing:function(){return e.onSelect(r.toLowerCase())},keyboardType:"url",returnKeyType:"next"}),u.filter((function(e){return""===r||e.domain.includes(r.toLowerCase())||e.name.toLowerCase().includes(r.toLowerCase())})).map((function(t){return l.a.createElement(Q,{key:t.domain},function(t){var n,r=t.item,a=null==(n=r.instanceInfo)?void 0:n.software.version.startsWith("0.9."),o=a?h.text:h.secondaryText;return l.a.createElement(Q,{style:{borderBottomWidth:R.a.hairlineWidth||1,borderColor:h.secondaryText,paddingVertical:25}},l.a.createElement(z.a,{onPress:function(){return a&&e.onSelect(r.domain,r.name)}},l.a.createElement(Ve,{name:r.name,host:r.domain,local:!1,newLine:!0,styleName:{fontSize:24,fontWeight:"300",fontFamily:"ios"===L.a.OS?"Georgia":"serif",color:o}}),r.instanceInfo?l.a.createElement(l.a.Fragment,null,l.a.createElement(X,{style:{color:h.secondaryText}},r.instanceInfo.software.version,!a&&" - Out of date"),!!r.instanceInfo.description&&l.a.createElement(X,{style:{color:o}},r.instanceInfo.description)):null===r.instanceInfo?l.a.createElement(X,{style:{color:o}},"Failed to load info"):l.a.createElement(X,{style:{color:o}},"Loading...")))}({item:t}))})))}var rt=R.a.create({root:{padding:20},title:{fontSize:24,marginBottom:10,textAlign:"center"},subtitle:{fontWeight:"300",marginBottom:10,marginTop:15,textAlign:"center"}}),at=n(37),ot=n(53),it=n(64),ct=n(33);function lt(e){var t=Object(c.useState)(!1),n=a()(t,2),r=n[0],o=n[1],i=Object(c.useState)(e.username||""),s=a()(i,2),u=s[0],d=s[1],m=Object(c.useState)(""),f=a()(m,2),y=f[0],h=f[1],g=Object(c.useState)(""),b=a()(g,2),E=b[0],v=b[1],w=Object(c.useRef)(null),x=Object(c.useRef)(null),O=J(),S=Object(c.useContext)(ce),j=Object(ct.p)();function P(e){F.a.alert("Failed to submit",e)}function T(){return u?y?E?void function(e,t,n,r){return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",pe({apiUrl:e},"POST","users",{username:t,password:n,email_address:r,login:!0},!0).then((function(e){return e.json()})));case 1:case"end":return a.stop()}}),null,null,null,Promise)}("https://"+e.domain+"/api/unstable",u,y,E).then((function(t){S.setContext({apiUrl:"https://"+e.domain+"/api/unstable",login:t})})).catch((function(e){F.a.alert("Failed to register",e),console.error(e)})):P("Please enter an email address"):P("Enter a password"):P("Please enter a username")}function C(){return u?y?void function(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",pe({apiUrl:e},"POST","logins",{username:t,password:n},!0).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}("https://"+e.domain+"/api/unstable",u,y).then((function(t){S.setContext({apiUrl:"https://"+e.domain+"/api/unstable",login:t})})).catch((function(e){F.a.alert("Failed to login",e),console.error(e)})):P("Enter a password"):P("Please enter a username")}function k(){r?T():C()}return l.a.createElement(z.a,{style:{flex:1},onPress:function(){return"web"!==L.a.OS&&ot.a.dismiss()}},l.a.createElement(it.a,{style:st.root,behavior:"padding"},e.hostName?l.a.createElement(z.a,{style:{alignItems:"center"}},l.a.createElement(X,{style:st.name},e.hostName),l.a.createElement(X,{style:[st.domain,{color:O.secondaryText}]},e.domain)):l.a.createElement(z.a,null,l.a.createElement(X,{style:{fontSize:24}},e.domain)),l.a.createElement(z.a,{hitSlop:5,onPress:function(){return o((function(e){return!e}))}},l.a.createElement(X,{style:[st.loginRegister,{color:O.secondaryText}]},l.a.createElement(X,{style:{color:r?O.secondaryText:O.secondaryTint}},"Login")," | ",l.a.createElement(X,{style:{color:r?O.secondaryTint:O.secondaryText}},"Register"))),r&&l.a.createElement(Z,{style:st.input,placeholder:"Email Address",value:E,onChangeText:v,keyboardType:"email-address",textContentType:"emailAddress",autoCompleteType:"email",returnKeyType:"next",onSubmitEditing:function(){var e;return null==(e=w.current)?void 0:e.focus()}}),l.a.createElement(Z,{ref:w,style:st.input,placeholder:"Username",value:u,onChangeText:d,keyboardType:"ascii-capable",textContentType:"username",autoCompleteType:"username",returnKeyType:"next",onSubmitEditing:function(){var e;return null==(e=x.current)?void 0:e.focus()}}),l.a.createElement(Z,{ref:x,style:st.input,placeholder:"Password",value:y,onChangeText:h,secureTextEntry:!0,textContentType:r?"newPassword":"password",autoCompleteType:"password",returnKeyType:"done",onSubmitEditing:k}),!r&&l.a.createElement(z.a,{style:{padding:15},onPress:function(){return j.navigate("ForgotPassword",{node:e.domain})}},l.a.createElement(X,{secondary:!0},"Forgot Password")),l.a.createElement(Q,{style:st.actionButtons},l.a.createElement(at.a,{title:"Change Host",onPress:e.onGoBack,color:O.secondaryTint}),l.a.createElement(at.a,{title:r?"Register":"Login",onPress:k,color:O.tint}))))}var st=R.a.create({root:{flex:1,alignItems:"center",justifyContent:"center",padding:35},name:{fontSize:50,fontFamily:"ios"===L.a.OS?"Georgia":"serif"},domain:{fontWeight:"300"},loginRegister:{padding:15},input:{width:"100%",marginVertical:5,paddingHorizontal:20,paddingVertical:10},actionButtons:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around"}});function ut(){var e=Object(c.useState)(),t=a()(e,2),n=t[0],r=t[1],o=Object(c.useState)(),i=a()(o,2),s=i[0],u=i[1],d=Object(c.useState)(),m=a()(d,2),p=m[0],f=m[1];return l.a.createElement(Q,{style:dt.root},s?l.a.createElement(lt,{hostName:n,domain:s,username:p,onGoBack:function(){return u(void 0)}}):l.a.createElement(nt,{onSelect:function(e,t,n){r(t),u(e),f(n)}}))}var dt=R.a.create({root:{width:"100%",height:"100%"},container:{flex:1,alignItems:"center",justifyContent:"center"},input:{width:"100%",marginBottom:20,paddingHorizontal:20,paddingVertical:10},actionButtons:{display:"flex",flexDirection:"row",justifyContent:"space-around",width:"100%"}}),mt=n(148);function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e){if("ios"!==L.a.OS)return l.a.createElement(G.a,{style:e.style},e.children);var t=e.distanceToActivate||60,n=Object(c.useState)(!1),r=a()(n,2),o=r[0],i=r[1],s=Object(c.useState)(0),u=a()(s,2),d=u[0],m=u[1],p=Object(c.useState)(!1),f=a()(p,2),y=f[0],h=f[1],g=Object(c.useState)(!1),b=a()(g,2),E=b[0],v=b[1],w=Object(c.useState)(!1),x=a()(w,2),S=x[0],j=x[1],P=Object(mt.a)(),T=Object(c.useRef)(null);return Object(c.useEffect)((function(){d<0&&!y?(oe(ae.a.Light),h(!0)):d>=0&&y&&(h(!1),o||(j(!0),e.onLeftSide())),d>=2*t&&!E?(oe(ae.a.Light),v(!0)):d<2*t&&E&&(v(!1),o||(j(!0),e.onRightSide())),d==t&&(null==e.onReturnToCenter||e.onReturnToCenter(),v(!1),h(!1),j(!1))}),[d]),l.a.createElement($e.a,{ref:T,horizontal:!0,snapToOffsets:[t,t+P.width],snapToStart:!1,snapToEnd:!1,onScrollBeginDrag:function(){return i(!0)},onScrollEndDrag:function(){var e;null==(e=T.current)||e.scrollTo({x:t}),i(!1)},contentOffset:{x:t,y:0},onScroll:function(e){var t,n,r=null==e||null==(t=e.nativeEvent)||null==(n=t.contentOffset)?void 0:n.x;m(r)},scrollEventThrottle:100,showsHorizontalScrollIndicator:!1,style:ft({backgroundColor:e.backgroundColor},e.style),overScrollMode:"always"},l.a.createElement(G.a,{style:{width:t,display:"flex",justifyContent:"center",alignItems:"center"}},l.a.createElement(O.a,{name:e.iconLeftSide[+y||+S],color:e.colorLeftSide,size:25})),l.a.createElement(G.a,{style:{width:P.width}},e.children),l.a.createElement(G.a,{style:{width:t,display:"flex",justifyContent:"center",alignItems:"center"}},l.a.createElement(O.a,{name:e.iconRightSide[+E||+S],color:e.colorRightSide,size:25})))}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e){var t=e.navigation,n=e.route.params.sort,r=Object(c.useContext)(ce).ctx,o=Ge(n,!0),i=a()(o,4),s=i[0],u=i[1],d=i[2],m=i[3];if(!function(e){return!!e.apiUrl&&!!e.login}(r))return l.a.createElement(ut,null);return l.a.createElement(Q,{style:Et.container},l.a.createElement(V.a,{data:s,renderItem:function(e){var n=e.item;return l.a.createElement(vt,{post:n,navigation:t})},keyExtractor:function(e,t){return e.id+"-"+t},refreshing:u,onRefresh:d,onEndReachedThreshold:2,onEndReached:m}))}var Et=R.a.create({container:{flex:1},item:{marginVertical:0,marginHorizontal:0,borderBottomWidth:8},title:{fontSize:20,padding:15,color:"#eee"},contentText:{fontSize:12},link:{paddingVertical:10,paddingHorizontal:15,backgroundColor:"#8884",borderRadius:5,marginHorizontal:15},image:{width:"100%",height:void 0,resizeMode:"contain"},foot:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",padding:15},footText:{color:"#ccc"},by:{fontSize:11},score:{fontSize:18,color:"#bbb"}}),vt=function(e){var t=e.post,n=e.navigation,r=je("post",t),o=r.isUpvoted,i=r.addVote,s=r.removeVote,u=Object(c.useState)(!1),d=a()(u,2),m=d[0],p=d[1],f=J();return l.a.createElement(yt,{iconLeftSide:o!==m?["heart-dislike","heart-dislike-outline"]:["heart-outline","heart"],iconRightSide:["arrow-undo-outline","arrow-undo"],colorLeftSide:f.red,colorRightSide:f.blue,onLeftSide:function(){o?s():i(),p(!0)},onRightSide:function(){n.navigate("Reply",{id:t.id,title:t.title,html:t.content_html,type:"post"})},onReturnToCenter:function(){return p(!1)},backgroundColor:f.secondaryBackground,style:{borderBottomWidth:8,borderColor:f.secondaryBackground}},l.a.createElement(z.a,{style:gt({width:"100%"},"web"==L.a.OS?{cursor:"pointer"}:{}),onPress:function(){return n.navigate("Post",{post:t})},onLongPress:function(){oe(ae.a.Heavy),console.log(t)}},l.a.createElement(Q,{style:[]},l.a.createElement(Fe,{post:t,navigation:n}))))};function wt(e){var t,n=Object(c.useState)(),r=a()(n,2),o=r[0],i=r[1],s=Object(c.useState)(""),u=a()(s,2),d=u[0],m=u[1],p=Object(c.useContext)(ce).ctx,f=J(),y=e.onlyWhenTyping&&""===d?[]:o?""===d?o.items:o.items.filter((function(e){return e.name.toLowerCase().includes(d.toLowerCase())||e.host.includes(d.toLowerCase())})):[];Object(c.useEffect)((function(){ye(p,!1).then(i)}),[null==(t=p.login)?void 0:t.token,e.focusId]);return l.a.createElement(Q,null,l.a.createElement(Z,{placeholder:e.placeholder||"Filter communities",value:d,onChangeText:m,style:xt.input}),l.a.createElement(V.a,{data:y,renderItem:function(t){var n,r=t.item;return l.a.createElement(z.a,{onPress:function(){return e.onSelect(r)},style:[xt.item,{borderColor:f.secondaryBackground}]},l.a.createElement(Ve,{name:r.name,host:r.host,local:r.local,colorize:"always",newLine:!0}),l.a.createElement(Q,{style:{display:"flex",flexDirection:"row"}},r.you_are_moderator&&l.a.createElement(O.a,{name:"shield-outline",size:20,color:f.secondaryTint}),(null==(n=r.your_follow)?void 0:n.accepted)&&l.a.createElement(O.a,{name:"checkmark",size:20,color:f.secondaryTint,style:{marginLeft:5}})))},keyExtractor:function(e,t){return e.id+"-"+t},contentContainerStyle:xt.list}))}var xt=R.a.create({root:{flex:1,alignItems:"center",justifyContent:"center"},input:{paddingVertical:10,marginHorizontal:20,marginTop:20},list:{padding:20,paddingBottom:100},item:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:50,borderBottomWidth:1,paddingHorizontal:20}});function Ot(e){var t=e.navigation,n=Object(c.useState)(0),r=a()(n,2),o=r[0],i=r[1],s=Object(c.useContext)(ce).ctx;return Object(c.useEffect)((function(){return t.addListener("focus",(function(){return i((function(e){return e+1}))}))}),[]),s.login?l.a.createElement(wt,{onSelect:function(e){return t.navigate("Community",{community:e})},focusId:o}):l.a.createElement(ut,null)}function St(e){var t,n,r,o=e.navigation,i=Object(c.useState)(),s=a()(i,2),u=s[0],d=s[1],m=Object(c.useState)([]),f=a()(m,2),y=f[0],h=f[1],g=Object(c.useState)([]),b=a()(g,2),E=b[0],v=b[1],w=Object(c.useState)(!1),x=a()(w,2),S=x[0],j=x[1],P=Object(c.useState)(0),T=a()(P,2),C=T[0],k=T[1],L=J(),_=Object(c.useContext)(ce),I=_.ctx,B=_.setContext;if(Object(c.useEffect)((function(){return o.addListener("focus",(function(){return k((function(e){return e+1}))}))}),[]),Object(c.useEffect)((function(){I.login&&ye(I,!0).then((function(e){return v(e.items)}))}),[null==(t=I.login)?void 0:t.user.id,C]),Object(c.useEffect)((function(){var e;void 0!==I.login&&void 0!==I.login.user&&ge(I,(null==(e=I.login)?void 0:e.user.id)||0).then(d)}),[null==(n=I.login)?void 0:n.token,C]),Object(c.useEffect)((function(){Xe().then((function(e){return h(e)}))}),[I,C]),void 0===I.login)return l.a.createElement(ut,null);return l.a.createElement($e.a,{style:[jt.container,{backgroundColor:L.background}]},l.a.createElement(Q,{style:jt.header},l.a.createElement(Q,null,l.a.createElement(z.a,{hitSlop:10,onPress:function(){return j((function(e){return!e}))}},l.a.createElement(X,{style:jt.title},(null==u?void 0:u.username)||I.login.user.username,"  ",l.a.createElement(O.a,{name:"pencil-outline",size:20,color:L.secondaryText}))),l.a.createElement(X,{style:{color:L.secondaryText}},null==u?void 0:u.host),!(null==u||!u.avatar)&&l.a.createElement(X,null,null==u||null==(r=u.avatar)?void 0:r.url),!(null==u||!u.description)&&l.a.createElement(X,null,null==u?void 0:u.description)),l.a.createElement(at.a,{onPress:function(){F.a.alert("Log out","Would you like to keep the login profile handy for later?",[{text:"Cancel",style:"cancel"},{text:"Remove",onPress:function(){var e;Qe((null==(e=I.login)?void 0:e.user.username)+"@"+I.apiUrl).then((function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",pe(e,"DELETE","logins/~current"));case 1:case"end":return t.stop()}}),null,null,null,Promise)}(I)})).then((function(){return B({})}))}},{text:"Keep",style:"default",onPress:function(){Ze(I),B({})}}],{cancelable:!0})},title:"Log Out",color:L.secondaryTint,accessibilityLabel:"Log out of the Hoot network"})),S&&l.a.createElement(Q,{style:jt.editView},l.a.createElement(Z,{style:jt.editViewText,placeholder:"New email"}),l.a.createElement(Z,{style:jt.editViewText,placeholder:"User bio",multiline:!0}),l.a.createElement(Z,{style:jt.editViewText,placeholder:"New password"}),l.a.createElement(Z,{style:jt.editViewText,placeholder:"Confirm new password"}),l.a.createElement(Q,{style:jt.editViewActionButtons},l.a.createElement(at.a,{onPress:function(){return j(!1)},title:"Cancel",color:L.secondaryTint,accessibilityLabel:"Add profile"}),l.a.createElement(at.a,{onPress:function(){return F.a.alert("unimplemented")},title:"Submit",color:L.tint,accessibilityLabel:"Add profile"}))),l.a.createElement(at.a,{onPress:function(){return B({})},title:"Add Profile",color:L.tint,accessibilityLabel:"Add profile"}),y.map((function(e){return[e].concat(Me()(e.split("@")))})).map((function(e){return[e[0],e[1],e[2].replace("http://","").replace("https://","").split(/[/?#]/)[0]]})).map((function(e){return l.a.createElement(z.a,{key:e[0],style:[jt.altProfileButton,{borderColor:L.secondaryBackground}],onPress:function(){Ye(e[0]).then((function(e){void 0!==e&&(B(e),j(!1))}))}},l.a.createElement(Ve,{name:e[1],host:e[2],local:!0,showHost:"always",colorize:"never",newLine:!0}))})),l.a.createElement(Q,{style:{paddingTop:10}},l.a.createElement(at.a,{onPress:function(){return o.navigate("NewCommunity")},title:"Create Community",color:L.tint,accessibilityLabel:"Create a new community"})),l.a.createElement(X,{style:jt.followingTitle},"Communities You Follow:"),E.map((function(e){return l.a.createElement(Q,{key:e.id,style:[jt.altProfileButton,{borderColor:L.secondaryBackground}]},l.a.createElement(Ve,{name:e.name,host:e.host,local:e.local,showHost:"always",colorize:"always",newLine:!0}))})))}var jt=R.a.create({container:{height:"100%"},header:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:20},title:{fontSize:20,fontWeight:"bold"},followingTitle:{fontSize:18,fontWeight:"500",padding:20},editView:{margin:20},editViewText:{marginBottom:15,paddingVertical:10,paddingHorizontal:15},editViewActionButtons:{display:"flex",flexDirection:"row",justifyContent:"space-around"},separator:{marginVertical:30,height:1,width:"80%"},inputContainer:{width:"100%",padding:20},input:{height:40,borderWidth:1,paddingVertical:10,paddingHorizontal:20,width:"100%",borderRadius:8},altProfileButton:{marginHorizontal:20,paddingVertical:15,borderBottomWidth:1}}),Pt=n(147);function Tt(e){var t,n=e.navigation,r=e.route,o=Object(c.useState)(r.params.community),i=a()(o,2),s=i[0],u=i[1],d=Object(c.useState)(""),m=a()(d,2),f=m[0],y=m[1],h=Object(c.useState)(""),g=a()(h,2),b=g[0],E=g[1],v=Object(c.useState)(""),w=a()(v,2),x=w[0],O=w[1],S=J(),j=Object(c.useContext)(ce).ctx;if(Object(c.useEffect)((function(){return n.addListener("focus",(function(){return r.params.community?u(r.params.community):null===s?u(void 0):void 0}))}),[s,null==s?void 0:s.id,null==(t=r.params.community)?void 0:t.id]),void 0===j.login)return l.a.createElement(ut,null);if(null===s)return l.a.createElement(wt,{onSelect:u,onlyWhenTyping:!0});return l.a.createElement(it.a,{style:{width:"100%",height:"100%"}},l.a.createElement(Pt.a,{onPress:function(){return"web"!==L.a.OS&&ot.a.dismiss()}},l.a.createElement(Q,{style:Ct.container},l.a.createElement(z.a,{onPress:function(){return u(null)}},s?l.a.createElement(Ve,{name:s.name,host:s.host,local:s.local,colorize:"always",showHost:"always",newLine:!0,style:Ct.input}):l.a.createElement(X,{style:[Ct.input,{color:S.secondaryText}]},"Select a Community")),l.a.createElement($.a,{style:[Ct.input,Ct.title,{color:S.text}],placeholder:"Add a Title",placeholderTextColor:S.placeholderText,value:f,onChangeText:y}),f.length>=4?l.a.createElement(l.a.Fragment,null,l.a.createElement($.a,{style:[Ct.input,{color:S.text}],placeholder:"Link",placeholderTextColor:S.placeholderText,value:b,onChangeText:E,keyboardType:"url",textContentType:"URL"}),l.a.createElement(Z,{style:{marginVertical:20,minHeight:100},multiline:!0,placeholder:"Add post content",value:x,onChangeText:O})):l.a.createElement(X,{style:{color:S.secondaryText}},f.length>0&&4-f.length),!!s&&f.length>=4&&l.a.createElement(at.a,{onPress:function(){s&&function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"POST","posts",t).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(j,{community:s.id,title:f,href:b||void 0,content_markdown:x||" "}).then((function(e){we(j,e.id).then((function(e){u(void 0),y(""),E(""),O(""),n.navigate("Post",{post:e})}))})).catch((function(e){return F.a.alert("Could not submit post",e)}))},title:"Submit",color:S.tint,accessibilityLabel:"Submit new post"}))))}var Ct=R.a.create({container:{flex:1,alignItems:"stretch",padding:15,height:"100%",width:"100%"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},inputContainer:{width:"100%",padding:20},input:{paddingVertical:10,width:"100%",borderRadius:8},item:{paddingHorizontal:20,paddingVertical:10,marginHorizontal:20,marginBottom:1}});function kt(){return l.a.createElement(Q,null,l.a.createElement(X,null,"Settings screen. It'll be implemented eventually."))}function zt(e){var t=e.navigation,n=e.route,r=Object(c.useState)(n.params.community),o=a()(r,2),i=o[0],s=o[1],u=Ge("hot",void 0,i.id),d=a()(u,4),m=d[0],p=d[1],f=d[2],y=d[3],h=Object(c.useState)(0),g=a()(h,2),b=g[0],E=g[1],v=J(),w=Object(c.useContext)(ce).ctx;Object(c.useEffect)((function(){he(w,i.id).then(s)}),[n.params.community.id,n.params.community.description,b]);return l.a.createElement(Q,{style:[Lt.root,{backgroundColor:v.background}]},l.a.createElement(V.a,{data:m,renderItem:function(e){var n=e.item;return l.a.createElement(_t,{post:n,navigation:t})},ListHeaderComponent:l.a.createElement(It,{community:i,setReloadId:E}),keyExtractor:function(e,t){return e.id+"-"+t},refreshing:p,onRefresh:f,onEndReachedThreshold:2,onEndReached:y}))}var Lt=R.a.create({root:{height:"100%"},header:{padding:20,paddingVertical:15,borderBottomWidth:R.a.hairlineWidth||1},title:{fontSize:20},description:{marginTop:10},buttons:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-around",alignItems:"center"},item:{marginVertical:0,marginHorizontal:0,borderBottomWidth:8}}),_t=function(e){var t=e.post,n=e.navigation,r=J();return l.a.createElement(z.a,{onPress:function(){return n.navigate("Post",{post:t})},onLongPress:function(){oe(ae.a.Heavy)}},l.a.createElement(Q,{style:[Lt.item,{borderBottomColor:r.secondaryBackground}]},l.a.createElement(Fe,{post:t,navigation:n})))},It=l.a.memo((function(e){var t,n=J(),r=Object(ct.p)(),a=e.community,o=e.setReloadId,i=Object(c.useContext)(ce).ctx,s=(null==(t=a.your_follow)?void 0:t.accepted)||!1;return l.a.createElement(Q,{style:[Lt.header,{borderBottomColor:n.tertiaryBackground}]},l.a.createElement(Q,null,l.a.createElement(He,{name:a.name,host:a.host,local:a.local,newLine:!0,colorize:"always",showHost:"always",styleName:[Lt.title]}),""!==a.description&&l.a.createElement(X,{style:Lt.description},a.description)),l.a.createElement(Q,{style:[Lt.buttons]},l.a.createElement(at.a,{onPress:function(){return r.navigate("NewPostScreen",{community:a})},title:"Post",color:n.tint,accessibilityLabel:"Post to this community"}),a.you_are_moderator&&l.a.createElement(at.a,{onPress:function(){return r.navigate("EditCommunity",{community:a})},title:"Edit",color:n.tint,accessibilityLabel:"Edit your community community"}),s?l.a.createElement(at.a,{onPress:function(){(function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"POST","communities/"+t+"/unfollow"));case 1:case"end":return n.stop()}}),null,null,null,Promise)})(i,a.id).then((function(){o((function(e){return e+1}))}))},title:"Unfollow",color:n.secondaryTint,accessibilityLabel:"Stop seeing posts from this community"}):l.a.createElement(at.a,{onPress:function(){be(i,a.id).then((function(e){!1===e.accepted&&F.a.alert("Follow request rejected.","This could be an issue with the node you are connected to."),o((function(e){return e+1}))}))},title:"Follow",color:n.tint,accessibilityLabel:"See posts from this community in your feed"})))})),Bt=n(96);function Dt(e){var t=e.navigation,n=e.route,r=Object(c.useState)(""),o=a()(r,2),i=o[0],s=o[1],u=Object(c.useRef)(null),d=J(),m=Object(c.useContext)(ce).ctx,f=n.params.id,y=n.params.title,h=n.params.html,g=n.params.type;return l.a.createElement(it.a,{behavior:"ios"===L.a.OS?"padding":"height"},l.a.createElement(Bt.b,{ref:u},l.a.createElement(z.a,{style:Ht.root,onPress:function(){return"web"!==L.a.OS&&ot.a.dismiss()}},l.a.createElement(X,null,"Reply to ",g),!!y&&l.a.createElement(X,{style:Ht.title},y),h&&l.a.createElement(Ie,{contentHtml:h}),l.a.createElement(Z,{style:Ht.input,multiline:!0,placeholder:"Type your reply",value:i,onChangeText:s,onFocus:function(){u.current&&u.current.scrollToEnd({animated:!0})}}),l.a.createElement(at.a,{title:"Submit",color:d.tint,onPress:function(){"post"===g?function(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",pe(e,"POST","posts/"+t+"/replies",{content_markdown:n}).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}(m,f,i).then((function(){return t.pop()})):function(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",pe(e,"POST","comments/"+t+"/replies",{content_markdown:n}).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}(m,f,i).then((function(){return t.pop()}))}}))))}var Ht=R.a.create({root:{padding:20,paddingBottom:100},title:{fontSize:20,marginVertical:10},input:{marginVertical:20,minHeight:100}}),Rt=n(50),Vt=n(144),Wt=[void 0,function(){}],Nt=l.a.createContext(Wt);function Ft(e){var t=e.replies,n=e.navigation,r=e.layer,o=void 0===r?0:r,i=e.postId,s=e.replyId,u=e.highlightedReplies,d=void 0===u?[]:u,m=Object(c.useState)(),p=a()(m,2),f=p[0],y=p[1],h=J(),g=Object(c.useContext)(ce).ctx,b=[h.text,h.red,h.orange,h.yellow,h.green,h.teal,h.blue,h.indigo,h.purple];return l.a.createElement(Q,null,t.items.map((function(e){return l.a.createElement(Ut,{reply:e,layer:o,key:e.id,navigation:n,layerColors:b,postId:i,highlightedReplies:d})})),null!==t.next_page&&void 0===f&&(i||s)&&l.a.createElement(z.a,{hitSlop:5,onPress:function(){s?Se(g,s,t.next_page||void 0).then(y):i&&Oe(g,i,t.next_page||void 0).then(y)}},l.a.createElement(X,{style:{color:h.tint,paddingTop:5,paddingBottom:10}},"More replies ",l.a.createElement(O.a,{name:"chevron-down-outline"}))),void 0!==f&&l.a.createElement(Ft,{replies:f,navigation:n,layer:o,postId:i,replyId:s,highlightedReplies:d}),null===t.next_page&&0===o&&l.a.createElement(X,{style:{margin:17,color:h.secondaryText}},t.items.length>0?"No more replies":"No replies yet"))}function Ut(e){var t,n=e.reply,r=e.layer,o=void 0===r?0:r,i=e.navigation,s=e.layerColors,u=e.postId,d=e.highlightedReplies,m=void 0===d?[]:d,p=Object(c.useState)(),f=a()(p,2),y=f[0],h=f[1],g=l.a.useState(!0),b=a()(g,2),E=b[0],v=b[1],w=J(),x=Object(c.useContext)(ce).ctx,S=Object(c.useContext)(Nt),j=a()(S,2),P=j[0],T=j[1];return l.a.createElement(Q,{style:{paddingLeft:0}},l.a.createElement(Q,{style:{paddingVertical:8,borderTopWidth:.5,borderTopColor:w.secondaryBackground}},l.a.createElement(z.a,{onPress:function(){return T(P!=n.id?n.id:void 0)}},l.a.createElement(Q,{style:{borderLeftWidth:2,borderColor:s[o%s.length],paddingLeft:15,paddingVertical:3,backgroundColor:m.includes(n.id)?w.secondaryBackground:w.background}},l.a.createElement(Q,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap",marginBottom:5}},l.a.createElement(Ve,{name:n.author.username,host:n.author.host,local:n.author.local,showHost:"only_foreign",colorize:"only_foreign",style:{fontSize:16,fontWeight:"500"}}),l.a.createElement(Q,{style:{marginRight:15,display:"flex",flexDirection:"row",alignItems:"center"}},l.a.createElement(X,null,!E&&"...    "),l.a.createElement(O.a,{name:"heart-outline",size:14,color:w.text,light:!0}),l.a.createElement(X,null," "+n.score+"   "),l.a.createElement(te,{time:n.created}))),E&&!!n.content_html&&l.a.createElement(Ie,{contentHtml:n.content_html,contentText:n.content_text})),P==n.id&&l.a.createElement(Q,{style:At.buttons},l.a.createElement(Ce,{type:"reply",content:n,hideCount:!0,style:At.button}),l.a.createElement(z.a,{style:At.button,onPress:function(){oe(ae.a.Medium),i.navigate("Reply",{id:n.id,title:n.author.username,html:n.content_html,type:"reply"})}},l.a.createElement(O.a,{color:w.text,size:20,name:"arrow-undo-outline"})),l.a.createElement(z.a,{style:At.button,onPress:function(){v((function(e){return!e}))}},l.a.createElement(O.a,{color:((null==(t=n.replies)?void 0:t.items.length)||0)>0?w.text:w.secondaryText,size:20,name:E?"chevron-up-outline":"chevron-down-outline"}))))),null!==n.replies?n.replies.items.length>0&&(E?l.a.createElement(Q,{style:{paddingLeft:15}},l.a.createElement(Ft,{replies:n.replies,layer:o+1,navigation:i,postId:u,replyId:n.id,highlightedReplies:m})):l.a.createElement(X,null,"...")):void 0===y&&l.a.createElement(z.a,{hitSlop:5,onPress:function(){Se(x,n.id).then(h)}},l.a.createElement(Q,{style:{paddingHorizontal:15,paddingBottom:10}},l.a.createElement(X,{style:{color:w.tint}},"More replies ",l.a.createElement(O.a,{name:"chevron-forward-outline"})))),void 0!==y&&l.a.createElement(Q,{style:{paddingLeft:15}},l.a.createElement(Ft,{replies:y,navigation:i,layer:o+1,postId:u,replyId:n.id})))}var At=R.a.create({buttons:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",paddingHorizontal:15},button:{padding:10,paddingHorizontal:15}});function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $t(e){var t=e.navigation,n=e.route,r=n.params.post,o=Object(c.useState)(n.params.highlightedReplies),i=a()(o,2),s=i[0],u=i[1],d=Object(c.useState)(0),m=a()(d,2),f=m[0],y=m[1],h=Object(c.useState)(),g=a()(h,2),b=g[0],E=g[1],v=function(e,t,n,r){var o=Object(c.useState)({items:[]}),i=a()(o,2),l=i[0],s=i[1];return Object(c.useEffect)((function(){r?xe(e,r).then((function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(Se(e,t.id));case 2:t.replies=n.sent,s({items:[t],next_page:null});case 4:case"end":return n.stop()}}),null,null,null,Promise)})):Oe(e,t).then((function(e){s(e)}))}),n),l}(Object(c.useContext)(ce).ctx,r.id,[f,null==s?void 0:s.join(",")],null==s?void 0:s[0]),w=J();return Object(c.useEffect)((function(){return t.addListener("focus",(function(){return y((function(e){return e+1}))}))}),[]),l.a.createElement($e.a,null,l.a.createElement(Q,{style:Gt(Gt({},Jt.item),{},{backgroundColor:w.background})},l.a.createElement(Fe,{post:r,navigation:t,showHtmlContent:!0,showAuthor:!0}),l.a.createElement(Q,{style:Jt.actions},l.a.createElement(O.a,{name:"bookmark-outline",size:25,color:w.text}),l.a.createElement(z.a,{hitSlop:5,onPress:function(){oe(ae.a.Medium),t.navigate("Reply",{id:r.id,title:r.title,html:r.content_html,type:"post"})}},l.a.createElement(O.a,{name:"arrow-undo-outline",size:25,color:w.text})),l.a.createElement(z.a,{hitSlop:5,onPress:function(){oe(ae.a.Medium),Vt.a.share({message:r.title,url:"https://dev.goldandblack.xyz/p/posts/"+r.id,title:"Hoot"})}},l.a.createElement(O.a,{name:"share-outline",size:25,color:w.text}))),s&&l.a.createElement(z.a,{onPress:function(){return u(void 0)}},l.a.createElement(X,{style:{color:w.tint,paddingVertical:10}},"Show all replies")),l.a.createElement(Nt.Provider,{value:[b,E]},l.a.createElement(Ft,{replies:v,navigation:t,postId:r.id,highlightedReplies:s})),l.a.createElement(Q,{style:{height:300}})))}var Jt=R.a.create({container:{flex:1,marginTop:Rt.a.currentHeight||0},item:{marginVertical:0,marginHorizontal:0},title:{fontSize:20,padding:15},contentText:{fontSize:12},link:{paddingVertical:10,paddingHorizontal:15,backgroundColor:"#8884",borderRadius:5,marginHorizontal:15},image:{width:"100%",height:void 0,resizeMode:"contain"},foot:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",padding:15,borderBottomColor:"#8884",borderBottomWidth:2},by:{fontSize:11},actions:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",padding:10}}),Kt=n(100);function qt(e){var t=e.navigation;return c.createElement(G.a,{style:Yt.container},c.createElement(M.a,{style:Yt.title},"This screen doesn't exist."),c.createElement(Kt.a,{onPress:function(){return t.replace("Root")},style:Yt.link},c.createElement(M.a,{style:Yt.linkText},"Go to home screen!")))}var Yt=R.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}});function Xt(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(xe(e,t));case 2:return n=r.sent,r.abrupt("return",{type:"comment",id:t,content_text:n.content_text,content_html:n.content_html,author:n.author});case 4:case"end":return r.stop()}}),null,null,null,Promise)}function Qt(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{type:"post",id:e.id,content_text:e.title,author:e.author});case 1:case"end":return t.stop()}}),null,null,null,Promise)}function Zt(e){var t=e.navigation,n=Object(c.useState)([]),r=a()(n,2),o=r[0],i=r[1],s=Object(c.useState)(!0),u=a()(s,2),d=u[0],m=u[1],f=Object(c.useState)(0),y=a()(f,2),h=y[0],g=y[1],b=J(),E=Object(c.useContext)(ce).ctx;if(Object(c.useEffect)((function(){E.login&&function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",pe(e,"GET","users/~me/notifications").then((function(e){return e.json()})));case 1:case"end":return t.stop()}}),null,null,null,Promise)}(E).then((function(e){var t=e.map((function(e){return function(e,t){var n,r,a;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=we(e,t.post.id),!t.comment){o.next=5;break}o.t0=Xt(e,t.comment),o.next=10;break;case 5:return o.t1=Qt,o.next=8,p.a.awrap(n);case 8:o.t2=o.sent,o.t0=(0,o.t1)(o.t2);case 10:return r=o.t0,o.next=13,p.a.awrap(xe(e,t.reply.id));case 13:return a=o.sent,o.t3=t.unseen,o.t4={id:a.id,content_text:a.content_text,content_html:a.content_html,author:a.author},o.next=18,p.a.awrap(r);case 18:return o.t5=o.sent,o.next=21,p.a.awrap(n);case 21:return o.t6=o.sent,o.abrupt("return",{unseen:o.t3,reply:o.t4,origin:o.t5,post:o.t6});case 23:case"end":return o.stop()}}),null,null,null,Promise)}(E,e)}));Promise.all(t).then(i).then((function(){return m(!1)}))}))}),[h]),Object(c.useEffect)((function(){return t.addListener("focus",(function(){return g((function(e){return e+1}))}))}),[]),!E.login)return l.a.createElement(ut,null);return l.a.createElement(V.a,{style:en.container,data:o,renderItem:function(e){var n=e.item;return l.a.createElement(z.a,{style:[en.item,{borderColor:b.secondaryBackground}],onPress:function(){var e="comment"===n.origin.type?[n.origin.id,n.reply.id]:[n.reply.id];t.navigate("Post",{post:n.post,highlightedReplies:e})}},l.a.createElement(X,{style:en.name},n.post.author.username),l.a.createElement(X,{style:en.title},n.post.title),l.a.createElement(X,null,"In"," ",l.a.createElement(Ve,{name:n.post.community.name,host:n.post.community.host,local:n.post.community.local,showHost:"always",colorize:"never"})),"comment"===n.origin.type?l.a.createElement(l.a.Fragment,null,l.a.createElement(Q,{style:[en.level1,{borderColor:b.secondaryText}]},l.a.createElement(X,{style:en.name},n.origin.author.username),l.a.createElement(Ie,{contentHtml:n.origin.content_html,contentText:n.origin.content_text})),l.a.createElement(Q,{style:[en.level2,{borderColor:b.tint}]},l.a.createElement(X,{style:en.name},n.reply.author.username),l.a.createElement(Ie,{contentHtml:n.reply.content_html,contentText:n.reply.content_text}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(Q,{style:[en.level1,{borderColor:b.tint}]},l.a.createElement(X,{style:en.name},n.reply.author.username),l.a.createElement(Ie,{contentHtml:n.reply.content_html,contentText:n.reply.content_text}))))},keyExtractor:function(e,t){return e.reply.id+"-"+t},refreshing:d,onRefresh:function(){m(!0),g((function(e){return e+1}))}})}var en=R.a.create({container:{flex:1},item:{borderBottomWidth:5,padding:15},title:{fontSize:20,fontWeight:"bold"},level1:{marginTop:5,borderLeftWidth:2,paddingLeft:15,padding:5},level2:{marginTop:5,marginLeft:15,borderLeftWidth:2,paddingLeft:15,padding:5},name:{fontWeight:"600",marginBottom:3},thin:{fontWeight:"200"}});function tn(e){var t=e.navigation,n=Object(c.useState)(""),r=a()(n,2),o=r[0],i=r[1],s=Object(c.useState)(""),u=a()(s,2),d=u[0],m=u[1],f=J(),y=Object(c.useContext)(ce).ctx;return l.a.createElement(Q,{style:nn.root},l.a.createElement($.a,{style:[nn.input,{fontSize:20,color:f.text}],placeholder:"Community Name",value:o,onChangeText:i}),o.length>=4?l.a.createElement(l.a.Fragment,null,l.a.createElement($.a,{style:[nn.input,{color:f.text}],placeholder:"Description (Optional)",value:d,onChangeText:m}),l.a.createElement(at.a,{title:"Submit",color:f.tint,onPress:function(){(function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"POST","communities",{name:t}).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)})(y,o).then((function(e){var n,r;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.community.id,!d){a.next=4;break}return a.next=4,p.a.awrap(Ee(y,n,d));case 4:return a.next=6,p.a.awrap(be(y,n));case 6:return a.next=8,p.a.awrap(he(y,n));case 8:r=a.sent,t.replace("Community",{community:r});case 10:case"end":return a.stop()}}),null,null,null,Promise)})).catch((function(e){return F.a.alert("Failed to create community",e)}))},accessibilityLabel:"Create new community"})):l.a.createElement(X,null,o.length>0&&4-o.length))}var nn=R.a.create({root:{flex:1,alignItems:"flex-start",padding:15,height:"100%",width:"100%"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},inputContainer:{width:"100%",padding:20},input:{paddingVertical:10,width:"100%",borderRadius:8},item:{paddingHorizontal:20,paddingVertical:10,marginHorizontal:20,marginBottom:1}});function rn(e){var t=e.navigation,n=e.route,r=Object(c.useState)(!1),o=a()(r,2),i=o[0],s=o[1],u=Object(c.useState)(""),d=a()(u,2),m=d[0],f=d[1],y=Object(c.useState)(),h=a()(y,2),g=h[0],b=h[1],E=Object(c.useState)(""),v=a()(E,2),w=v[0],x=v[1],O=J();return l.a.createElement(z.a,{style:{flex:1},onPress:function(){return"web"!==L.a.OS&&ot.a.dismiss()}},l.a.createElement(it.a,{style:an.root,behavior:"padding"},l.a.createElement(z.a,null,l.a.createElement(X,null,n.params.node)),i?l.a.createElement(l.a.Fragment,null,g?l.a.createElement(l.a.Fragment,null,l.a.createElement(Z,{placeholder:"New Password",style:an.input,value:w,onChangeText:x,autoCapitalize:"none",secureTextEntry:!0,textContentType:"password",autoCompleteType:"password"}),l.a.createElement(Q,{style:an.actionButtons},l.a.createElement(at.a,{title:"Go Back",onPress:function(){return s(!1)},color:O.secondaryTint}),l.a.createElement(at.a,{title:"Submit",onPress:function(){return w?g?void(e={apiUrl:"https://"+n.params.node+"/api/unstable"},r=g,a=w,p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",pe(e,"POST","forgot_password/keys/"+r+"/reset",{new_password:a},!0));case 1:case"end":return t.stop()}}),null,null,null,Promise)).then((function(){return t.popToTop()})):F.a.alert("No key","Fail. This shouldn't happen"):F.a.alert("Password required");var e,r,a},color:O.tint}))):l.a.createElement(Z,{placeholder:"Key",style:an.input,onChangeText:function(e){e.length<6||function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"GET","forgot_password/keys/"+t,void 0,!0));case 1:case"end":return n.stop()}}),null,null,null,Promise)}({apiUrl:"https://"+n.params.node+"/api/unstable"},e).then((function(){return b(e)}))},autoCapitalize:"none"})):l.a.createElement(l.a.Fragment,null,l.a.createElement(Z,{style:an.input,placeholder:"Email Address",value:m,onChangeText:f,keyboardType:"email-address",textContentType:"emailAddress",autoCompleteType:"email",returnKeyType:"go",autoCapitalize:"none"}),l.a.createElement(at.a,{title:"Submit",onPress:function(){if(!m)return F.a.alert("Email address required","An email with a password reset key will be emailed to you");(function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pe(e,"POST","forgot_password/keys",{email_address:t},!0));case 1:case"end":return n.stop()}}),null,null,null,Promise)})({apiUrl:"https://"+n.params.node+"/api/unstable"},m).then((function(){s(!0)})).catch((function(e){return F.a.alert("Failed to send reset key",e)}))},color:O.tint}))))}var an=R.a.create({root:{flex:1,alignItems:"center",justifyContent:"center",padding:30},input:{width:"100%",paddingVertical:10,paddingHorizontal:15,marginTop:15},actionButtons:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"space-around"}});function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ln(e){var t=e.navigation,n=e.route.params.community,r=Object(c.useState)(n.description||""),o=a()(r,2),i=o[0],s=o[1],u=J(),d=Object(c.useContext)(ce).ctx;return l.a.createElement(it.a,{behavior:"ios"===L.a.OS?"padding":"height"},l.a.createElement(z.a,{style:sn.root,onPress:function(){return"web"!==L.a.OS&&ot.a.dismiss()}},l.a.createElement(Ve,{name:n.name,host:n.host,local:n.local,showHost:"always",newLine:!0,style:sn.title}),l.a.createElement(Z,{style:sn.input,multiline:!0,placeholder:"Add a description",value:i,onChangeText:s}),l.a.createElement(at.a,{title:"Submit",color:u.tint,onPress:function(){Ee(d,n.id,i).then((function(){return he(d,n.id)})).then((function(e){return t.navigate("Community",{community:cn(cn({},e),{},{description:i})})})).catch((function(e){return F.a.alert("Failed to edit community",e)}))}})))}var sn=R.a.create({root:{padding:20,paddingBottom:100},title:{fontSize:20,marginVertical:10},input:{marginVertical:20,minHeight:100}});function un(e){var t=e.colorScheme;return l.a.createElement(S.a,{linking:H,theme:"dark"===t?j.a:P.a},l.a.createElement(mn,null))}var dn=Object(T.a)();function mn(){return l.a.createElement(dn.Navigator,null,l.a.createElement(dn.Screen,{name:"Root",component:fn,options:{headerShown:!1}}),l.a.createElement(dn.Screen,{name:"Web",component:$t}),l.a.createElement(dn.Screen,{name:"Post",component:$t}),l.a.createElement(dn.Screen,{name:"Reply",component:Dt}),l.a.createElement(dn.Screen,{name:"Community",component:zt}),l.a.createElement(dn.Screen,{name:"NewCommunity",component:tn}),l.a.createElement(dn.Screen,{name:"EditCommunity",component:ln}),l.a.createElement(dn.Screen,{name:"Settings",component:kt}),l.a.createElement(dn.Screen,{name:"ForgotPassword",component:rn,options:{title:"Forgot Password"}}),l.a.createElement(dn.Screen,{name:"NotFound",component:qt,options:{title:"Oops!"}}),l.a.createElement(dn.Group,{screenOptions:{presentation:"modal"}},l.a.createElement(dn.Screen,{name:"Modal",component:$t})))}var pn=Object(C.a)();function fn(e){var t=e.navigation,n=Object(c.useState)("hot"),r=a()(n,2),o=r[0],i=r[1],s=v();return l.a.createElement(pn.Navigator,{initialRouteName:"FeedScreen",screenOptions:{drawerActiveTintColor:I[s].tint,headerTintColor:I[s].text,headerPressColor:I[s].text,drawerType:"permanent",drawerHideStatusBarOnOpen:!0}},l.a.createElement(pn.Screen,{name:"FeedScreen",component:bt,initialParams:{sort:o},options:function(e){var t=e.navigation;return{title:"Hoot",drawerIcon:function(e){var t=e.color;return l.a.createElement(yn,{name:"newspaper-outline",color:t})},headerRight:function(){return l.a.createElement(z.a,{onPress:function(){k.ActionSheetIOS.showActionSheetWithOptions({options:["Cancel","Hot","New"],title:"Sort by:",cancelButtonIndex:0},(function(e){var n=[o,"hot","new"][e];i(n),t.navigate("FeedScreen",{sort:n})}))},style:function(e){return{opacity:e.pressed?.5:1}}},l.a.createElement(O.a,{name:{hot:"flame-outline",new:"time-outline"}[o],size:25,color:I[s].tint,style:{marginRight:15}}))}}}}),l.a.createElement(pn.Screen,{name:"SearchScreen",component:Ot,options:{title:"Communities",drawerIcon:function(e){var t=e.color;return l.a.createElement(yn,{name:"search-outline",color:t})}}}),l.a.createElement(pn.Screen,{name:"NewPostScreen",component:Tt,initialParams:{community:void 0},options:{title:"New Post",drawerIcon:function(e){var t=e.color;return l.a.createElement(yn,{name:"add-outline",color:t,size:40})}}}),l.a.createElement(pn.Screen,{name:"NotificationScreen",component:Zt,options:{title:"Notifications",drawerIcon:function(e){var t=e.color;return l.a.createElement(yn,{name:"notifications-outline",color:t})}}}),l.a.createElement(pn.Screen,{name:"ProfileScreen",component:St,options:{title:"Profile",drawerIcon:function(e){var t=e.color;return l.a.createElement(yn,{name:"person-circle-outline",color:t})},headerRight:function(){return l.a.createElement(z.a,{onPress:function(){t.navigate("Settings")},style:function(e){return{opacity:e.pressed?.5:1}}},l.a.createElement(O.a,{name:"settings-outline",size:25,color:I[s].secondaryText,style:{marginRight:15}}))}}}))}function yn(e){return l.a.createElement(O.a,x()({size:30,style:{marginBottom:-3}},e))}var hn=Object(se.a)({reducer:{vote:me}});function gn(){var e=function(){var e=c.useState(!1),t=a()(e,2),r=t[0],o=t[1];return c.useEffect((function(){p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h.b(),e.next=4,p.a.awrap(y.b(b(b({},f.a.font),{},{"space-mono":n(295)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,o(!0),h.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}(),t=v(),r=Object(c.useState)(ie),u=a()(r,2),d=u[0],m=u[1];function g(e){qe(e).then((function(){return o.a.setItem("@lotide_ctx",JSON.stringify(e))})).then((function(){return m(e)}))}return Object(c.useEffect)((function(){Ke().then((function(e){void 0!==e&&m(e)}))}),[]),Object(c.useEffect)((function(){d.apiUrl&&(ve(d).then((function(e){if(console.log(e),!e.software.version.startsWith("0.9."))throw"Bad version"})).catch((function(){var e;Qe((null==(e=d.login)?void 0:e.user.username)+"@"+d.apiUrl).then((function(){return g({})}))})),d.login&&ge(d,d.login.user.id).catch((function(){var e;Qe((null==(e=d.login)?void 0:e.user.username)+"@"+d.apiUrl).then((function(){return g({})}))})))}),[d]),e?l.a.createElement(le.a,{store:hn},l.a.createElement(ce.Provider,{value:{ctx:d,setContext:function(e){return g(e)}}},l.a.createElement(s.b,null,l.a.createElement(un,{colorScheme:t}),l.a.createElement(i.a,null)))):null}},277:function(e,t,n){e.exports=n(361)},295:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},311:function(e,t){}},[[277,1,2]]]);
//# sourceMappingURL=app.33281f76.chunk.js.map
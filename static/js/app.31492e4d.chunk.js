(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{272:function(e,t,n){"use strict";var r=n(4),o=n.n(r),a=n(65),i=n(273),l=n(0),c=n.n(l),s=n(143),u=n(7),d=n.n(u),p=n(8),m=n.n(p),f=n(378),y=n(387),g=n(204);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=n(144);function E(){return Object(v.a)()}var O=n(47),w=n.n(O),j=n(32),x=n(385),P=n(379),S=n(380),T=n(170),k=n(386),C=n(157),I=n(3),z=n(20),D=n(105),_="web"===I.a.OS?function(){}:n(157).PlatformColor,L={light:"ios"===I.a.OS?R():{tint:"orange",secondaryTint:"purple",text:"#111",secondaryText:"#333",placeholderText:"#444",background:"#fff",secondaryBackground:"#eee",tertiaryBackground:"#ccc",tabIconDefault:"#ccc",tabIconSelected:"orange",red:"red",orange:"orange",yellow:"yellow",green:"green",teal:"eeal",blue:"blue",indigo:"indigo",purple:"purple"},dark:"ios"===I.a.OS?R():{tint:"orange",secondaryTint:"purple",text:"#fff",secondaryText:"#666",placeholderText:"#aaa",background:"#111",secondaryBackground:"#222",tertiaryBackground:"#222",tabIconDefault:"#ccc",tabIconSelected:"orange",red:"red",orange:"orange",yellow:"yellow",green:"green",teal:"eeal",blue:"#68f",indigo:"indigo",purple:"purple"}};function R(){return{tint:_("systemOrange"),secondaryTint:_("systemPurple"),text:_("label"),secondaryText:_("secondaryLabel"),placeholderText:_("placeholderText"),background:_("systemBackground"),secondaryBackground:_("secondarySystemBackground"),tertiaryBackground:_("tertiarySystemBackground"),tabIconDefault:_("secondaryLabel"),tabIconSelected:_("systemOrange"),red:_("systemRed"),orange:_("systemOrange"),yellow:_("systemYellow"),green:_("systemGreen"),teal:_("systemTeal"),blue:_("systemBlue"),indigo:_("systemIndigo"),purple:_("systemPurple")}}var B=n(178),V={prefixes:[B.a("/")],config:{screens:{Root:{screens:{TabOne:{screens:{TabOneScreen:"one"}},TabTwo:{screens:{TabTwoScreen:"two"}}}},Modal:"modal",NotFound:"*"}}},H=n(2),N=n(62),F=n(258),U=n(35),W=n(14),M=n.n(W),A=n(25),G=n(5),$=n(63);function q(){var e=E();return L[e]}var J=["style","secondary","tint"],K=["style"],Y=["style","placeholderTextColor"];function X(e){var t=e.style,n=e.secondary,r=e.tint,o=M()(e,J),a=q(),i=n||r?n&&!r?a.secondaryText:r&&!n?a.tint:a.secondaryTint:a.text;return c.a.createElement(A.a,w()({style:[{color:i},t]},o))}function Q(e){var t=e.style,n=M()(e,K),r=q().background;return c.a.createElement(G.a,w()({style:[{backgroundColor:r},t]},n))}var Z=Object(l.forwardRef)((function(e,t){var n=e.style,r=e.placeholderTextColor,o=M()(e,Y),a=q(),i={backgroundColor:a.secondaryBackground,paddingHorizontal:10,paddingVertical:5,borderRadius:8,color:a.text};return c.a.createElement($.a,w()({ref:t,style:[i,n],placeholderTextColor:r||a.placeholderText},o))}));function ee(e){return Object(l.useMemo)((function(){return function(e){var t=Math.round((Date.now()-Date.parse(e))/1e3),n=Math.round(t/60),r=Math.round(n/60),o=Math.round(r/24),a=Math.round(o/7),i=Math.round(o/30.4),l=Math.round(o/365);return n<60&&n+"min"||r<24&&r+"h"||o<7&&o+"d"||a<5&&a+"w"||i<12&&i+"mo"||l+"y"}(e)}),[e])}function te(e){var t=ee(e.time);return c.a.createElement(z.a,{hitSlop:8,onPress:function(){return U.a.alert("Date posted",e.time)}},c.a.createElement(X,{style:ne.root},c.a.createElement(F.a,{name:"time-outline",size:14})," ",t))}var ne=H.a.create({root:{}}),re=n(199),oe=n(128);function ae(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"!==I.a.OS){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,m.a.awrap(re.a(e));case 4:case"end":return t.stop()}}),null,null,null,Promise)}var ie=n(36),le=n(90);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=Object(le.b)({name:"posts",initialState:{posts:{}},reducers:{setPost:function(e,t){var n=t.payload;e.posts[n.post.id]=n.post},setPostMulti:function(e,t){t.payload.posts.forEach((function(t){e.posts[t.id]=t}))},editPost:function(e,t){var n=t.payload,r=e.posts[n.id];e.posts[n.id]=se(se({},r),n.post)},clearPosts:function(e){e.posts={}},setPostVote:function(e,t){var n=t.payload,r=e.posts[n.id];r.your_vote!==n.vote&&(r.your_vote=n.vote,n.vote?r.score+=1:r.score-=1)}}}),de=ue.actions,pe=de.setPost,me=de.setPostMulti,fe=de.editPost,ye=(de.clearPosts,de.setPostVote),ge=ue.reducer;function he(e,t,n,r){var o,a,i=arguments;return m.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(a=i.length>4&&void 0!==i[4]&&i[4],e.apiUrl){l.next=3;break}throw"No API url";case 3:if(a||null!=(o=e.login)&&o.token){l.next=5;break}throw"Not logged in";case 5:return l.abrupt("return",fetch(e.apiUrl+"/"+n,{method:t,headers:be(e),body:void 0!==r?JSON.stringify(r):void 0}).then((function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=4;break}return t.abrupt("return",e);case 4:return t.next=6,m.a.awrap(e.text());case 6:throw t.sent;case 7:case"end":return t.stop()}}),null,null,null,Promise)})).catch((function(r){throw console.error("Lotide Service Error: "+t+" "+e.apiUrl+"/"+n+"\n"+r,e),r})));case 6:case"end":return l.stop()}}),null,null,null,Promise)}function be(e){return void 0!==e.login?{Authorization:"Bearer "+e.login.token,"Content-Type":"application/json"}:void 0}function ve(e){var t,n,r=arguments;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=r.length>1&&void 0!==r[1]&&r[1],n=r.length>2?r[2]:void 0,o.abrupt("return",he(e,"GET","communities?include_your=true&limit=100"+(t?"&your_follow.accepted=true":"")+(n?"&page="+n:"")).then((function(e){return e.json()})).then((function(e){return e})));case 3:case"end":return o.stop()}}),null,null,null,Promise)}function Ee(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"GET","communities/"+t+"?include_your=true").then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function Oe(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"GET","users/"+t,void 0,!0).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function we(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"POST","communities/"+t+"/follow",{try_wait_for_accept:!0}).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function je(e,t,n){return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",he(e,"PATCH","communities/"+t,{description:n}));case 1:case"end":return r.stop()}}),null,null,null,Promise)}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",he(e,"GET","instance",void 0,!0).then((function(e){return e.json()})).then((function(e){var t=parseInt(e.software.version.split(".")[1]);return Pe(Pe({},e),{},{apiVersion:t})})));case 1:case"end":return t.stop()}}),null,null,null,Promise)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"GET","posts/"+t,void 0,!0).then((function(e){return e.json()})).then(Ie));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function Ie(e){return void 0!==e.your_vote?ke(ke({},e),{},{your_vote:null!==e.your_vote}):e}var ze=n(18),De=n.n(ze);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){var t=Be(e.replies||void 0),n=d()(t,2),r=n[0],o=n[1];return[Le(Le({},e),{},{replies:r,your_vote:null!==e.your_vote&&void 0!==e.your_vote})].concat(De()(o))}function Be(e){return e?[{items:e.items.map((function(e){return e.id})),next_page:e.next_page},e.items.flatMap(Re)]:[void 0,[]]}function Ve(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",he(e,"DELETE","logins/~current"));case 1:case"end":return t.stop()}}),null,null,null,Promise)}function He(){return Object(ie.c)((function(e){return e.lotide.ctx}))}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=Object(le.b)({name:"replies",initialState:{replies:{}},reducers:{setReply:function(e,t){var n=t.payload;e.replies[n.reply.id]=n.reply},setReplyMulti:function(e,t){t.payload.replies.forEach((function(t){e.replies[t.id]=t}))},editReply:function(e,t){var n=t.payload,r=e.replies[n.id];e.replies[n.id]=Fe(Fe({},r),n.reply)},clearReplies:function(e){e.replies={}},setReplyVote:function(e,t){var n=t.payload,r=e.replies[n.id];r.your_vote!==n.vote&&(r.your_vote=n.vote,n.vote?r.score+=1:r.score-=1)},setSelectedReply:function(e,t){e.selectedReply=t.payload}}}),We=Ue.actions,Me=(We.setReply,We.setReplyMulti),Ae=We.editReply,Ge=(We.clearReplies,We.setReplyVote),$e=We.setSelectedReply,qe=Ue.reducer;function Je(e,t){var n=!!t.your_vote,r=Object(ie.b)(),o=He();function a(n){r("post"==e?ye({id:t.id,vote:n}):Ge({id:t.id,vote:n}))}return{isUpvoted:n,addVote:function(){null!=o&&o.login&&("post"==e?function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"PUT","posts/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return a(!0)})):function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"PUT","comments/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return a(!0)})))},removeVote:function(){null!=o&&o.login&&("post"==e?function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"DELETE","posts/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return a(!1)})):function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"DELETE","comments/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return a(!1)})))}}}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e){var t=q(),n=He(),r=Je(e.type,e.content),o=r.isUpvoted,a=r.addVote,i=r.removeVote;var l=o?t.red:t.text;return c.a.createElement(z.a,{onPress:function(){return ae(oe.a.Light),void(null!=n&&n.login?o?i():a():U.a.alert("Login to like","Leave a like when you login to a community"))},hitSlop:7,style:[Qe.root,e.style]},c.a.createElement(Q,{style:Qe.root},c.a.createElement(F.a,{name:o?"heart":"heart-outline",color:l,size:25}),!e.hideCount&&c.a.createElement(X,{style:Ye(Ye({},Qe.score),{},{color:l})},"  "+e.content.score+"  ")))}var Qe=H.a.create({root:Ye({display:"flex",flexDirection:"row",alignItems:"center"},"web"==I.a.OS?{cursor:"pointer"}:{}),score:{fontSize:18,minWidth:28}}),Ze=n(168),et=n.n(Ze),tt=n(275);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e){var t=Object(l.useState)(!1),n=d()(t,2),r=n[0],o=n[1],a=q(),i=Object(l.useMemo)((function(){return e.contentHtml||(""===(t=e.contentMarkdown)||void 0===t?void 0:t.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/^\> (.*$)/gim,"<blockquote>$1</blockquote>").replace(/\*\*(.*)\*\*/gim,"<b>$1</b>").replace(/\*(.*)\*/gim,"<i>$1</i>").replace(/!\[(.*?)\]\((.*?)\)/gim,"<img alt='$1' src='$2' />").replace(/\[(.*?)\]\((.*?)\)/gim,"<a href='$2'>$1</a>").replace(/\n$/gim,"<br />").trim())||"<p>"+e.contentText+"</p>";var t}),[e.contentHtml,e.contentMarkdown,e.contentText]),s=e.maxChars;return c.a.createElement(G.a,null,c.a.createElement(tt.a,{RootComponent:function(e){return c.a.createElement(A.a,e)},value:i.replace(/\n/g,""),renderNode:function(){var e=0,t=!1;return function(n,r,i,l,c){if(!s)return at(a)(n,r,i,l,c);if(!t){if(e>=s)return null;if(void 0===n.name&&n.data&&e<s){var u=e+n.data.length;if(u>=s&&e<s){var d=s-e;e=u,t=!0;var p=c([rt(rt({},n),{},{data:n.data.substring(0,d)+"..."})],l);return t=!1,o(!0),p}e=u}return at(a)(n,r,i,l,c)}}}(),stylesheet:{a:{color:a.secondaryTint},cite:{fontStyle:"italic"},del:{textDecorationLine:"line-through",textDecorationStyle:"solid"},dfn:{fontStyle:"italic"},ins:{textDecorationLine:"underline"},samp:{fontFamily:"ios"===I.a.OS?"Menlo":"monospace"},small:{fontSize:10}},textComponentProps:{style:{color:a.text}},onLinkLongPress:function(e){return U.a.alert("Link",e,void 0,{cancelable:!0})}}),r&&c.a.createElement(A.a,{style:{color:a.secondaryText,paddingVertical:15}},"Read More"))}var at=function(e){return function(t,n,r,o,a){if(["iframe","script"].includes(t.name||""))return null;function i(){return a(t.children,o)}switch(t.name){case"abbr":return c.a.createElement(z.a,{key:n,onPress:function(){return U.a.alert("Abbr.",t.attribs.title)}},c.a.createElement(A.a,{style:{textDecorationLine:"underline",textDecorationStyle:"dotted"}},i()));case"blockquote":return c.a.createElement(A.a,{key:n},c.a.createElement(G.a,{style:{padding:10}},c.a.createElement(G.a,{style:{borderLeftWidth:2,borderColor:e.secondaryText,paddingLeft:10,paddingVertical:5}},i())),"\n");case"details":return c.a.createElement(it,{key:n},i());case"dl":case"dt":case"dd":return c.a.createElement(A.a,{key:n},i(),"\n");case"figure":return c.a.createElement(G.a,{key:n},i());case"hr":return c.a.createElement(G.a,{key:n,style:{width:200,alignSelf:"stretch",borderBottomWidth:H.a.hairlineWidth||1,borderColor:e.secondaryText}});case"kbd":return c.a.createElement(A.a,{key:n,style:{backgroundColor:e.tertiaryBackground}}," ",i()," ");case"img":return c.a.createElement(A.a,{key:n},"[Image not displayed]");case"li":return c.a.createElement(A.a,{key:n},"\u2022 ",i(),"\n");case"sub":return c.a.createElement(A.a,{key:n,style:{fontSize:10}},i());case"summary":return c.a.createElement(A.a,{key:n},i());case"sup":return c.a.createElement(G.a,{key:n},c.a.createElement(A.a,{style:{fontSize:10}},i()));default:return}}};function it(e){var t=e.children,n=Object(l.useState)(!1),r=d()(n,2),o=r[0],a=r[1],i=q(),s=t.filter((function(e){var t,n;return""!==(null==e||null==(t=e.props)||null==(n=t.children)?void 0:n.toString().trim())})),u=et()(s),p=u[0],m=u.slice(1);return c.a.createElement(G.a,null,c.a.createElement(z.a,{hitSlop:5,onPress:function(){return a((function(e){return!e}))}},c.a.createElement(A.a,{style:{color:i.secondaryTint}},o?c.a.createElement(j.a,{name:"chevron-down-outline"}):c.a.createElement(j.a,{name:"chevron-forward-outline"}),p)),o&&m)}function lt(e){var t,n=q(),r=He(),o=e.colorize||"never",a=e.showHost||"only_foreign",i=e.userId&&e.userId==(null==r||null==(t=r.login)?void 0:t.user.id)||!1,l=function(e,t){return"always"===e||"never"!==e&&!t},s=l(o,e.local),u=l(a,e.local),d=i?{color:n.secondaryTint}:s?{color:e.local?n.blue:n.green}:{};return c.a.createElement(X,{style:[ct.root,e.style]},c.a.createElement(X,{style:[ct.name,d,e.styleName]},e.name),u&&c.a.createElement(X,{style:[ct.host,{color:n.secondaryText},e.styleHost]},e.newLine&&"\n",!e.newLine&&"@",e.host),i&&c.a.createElement(X,{style:[ct.host,{color:n.secondaryText},e.styleHost]}," (you)"))}var ct=H.a.create({root:{},name:{fontWeight:"500"},host:{fontWeight:"200"}}),st=c.a.memo(lt);function ut(e){var t=Object(ie.b)(),n=He(),r=Object(ie.c)((function(t){return t.posts.posts[e]}));return Object(l.useEffect)((function(){n&&(r||Ce(n,e).then((function(e){t(pe({post:e}))})))}),[null==r?void 0:r.id]),r}var dt=n(151);function pt(e){return Object(l.useMemo)((function(){if((t=e)&&([".png",".jpg",".jpeg",".bmp",".gif",".webp"].includes(function(e){return(e=e.substr(1+e.lastIndexOf("/")).split("?")[0]).split("#")[0].substr(e.lastIndexOf("."))}(t))||t.match(/https:\/\/.*\/api\/stable\/posts\/.*\/href/)))return{imageUrl:e};var t,n=e.match(/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/);return n?{imageUrl:"https://img.youtube.com/vi/"+n[1]+"/mqdefault.jpg",linkUrl:e,isVideo:!0}:{linkUrl:e}}),[e])}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){var t=e.href,n=Object(l.useState)(1),r=d()(n,2),o=r[0],a=r[1],i=pt(t),s=q();function u(){i.linkUrl&&(ae(oe.a.Medium),Object(B.b)(i.linkUrl))}return c.a.createElement(c.a.Fragment,null,!!i.imageUrl&&c.a.createElement(dt.a,{style:[yt.image,{aspectRatio:o,backgroundColor:s.secondaryBackground}],imageStyle:{resizeMode:"contain"},source:{uri:i.imageUrl},onLoad:function(e){"web"!==I.a.OS&&a(Math.max(e.nativeEvent.source.width/e.nativeEvent.source.height,.5))}},i.isVideo&&c.a.createElement(z.a,{onPress:u},c.a.createElement(j.a,{name:"play-outline",size:70,color:"#fffa",style:yt.playIcon}))),!!i.linkUrl&&c.a.createElement(z.a,{style:[yt.link,!!i.imageUrl&&yt.wideLink,{backgroundColor:s.secondaryBackground}],onPress:u},c.a.createElement(X,null,t)))}var yt=H.a.create({link:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({paddingVertical:10,paddingHorizontal:15,borderRadius:5,marginHorizontal:15},"web"==I.a.OS?{cursor:"pointer"}:{}),wideLink:{marginHorizontal:0,borderRadius:0},image:{height:"web"==I.a.OS?400:void 0,resizeMode:"contain",display:"flex",justifyContent:"center",alignItems:"center"},playIcon:"web"==I.a.OS?{}:{shadowColor:"black",shadowOpacity:1,shadowRadius:5,shadowOffset:{width:0,height:3}}});function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e){var t=ut(e.postId),n=q();return t?c.a.createElement(Q,null,c.a.createElement(X,{style:vt.title},t.sticky&&c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,{name:"pin",size:25,color:n.secondaryTint})," "),t.title.trim()),c.a.createElement(st,{name:t.author.username,host:t.author.host,local:t.author.local,showHost:"only_foreign",colorize:"never",newLine:!0,userId:t.author.id,style:vt.username}),!!t.href&&c.a.createElement(ft,{href:t.href}),!!t.href&&!!t.content_html&&c.a.createElement(Q,{style:{marginTop:15}}),!!t.content_html&&c.a.createElement(Q,{style:{paddingHorizontal:15}},c.a.createElement(ot,{contentHtml:t.content_html,contentText:t.content_text,maxChars:e.truncateContent?256:void 0,postId:t.id})),c.a.createElement(Q,{style:vt.foot},c.a.createElement(z.a,{hitSlop:8,onPress:function(){return e.navigation.navigate("Community",{community:t.community})},style:[vt.footItem,vt.pointer]},c.a.createElement(st,{name:t.community.name,host:t.community.host,local:t.community.local,showHost:"only_foreign",colorize:e.showAuthor?"always":"never",newLine:!0})),c.a.createElement(Q,{style:{flex:1}}),c.a.createElement(Q,{style:vt.footItem},c.a.createElement(te,{time:t.created})),c.a.createElement(Q,{style:vt.footItem},c.a.createElement(X,{style:vt.footText},c.a.createElement(j.a,{name:"chatbubble-outline",size:12})," ",t.replies_count_total)),c.a.createElement(Q,{style:vt.footItem},c.a.createElement(Xe,{type:"post",content:t})))):c.a.createElement(X,null,"Failed to load post")}var vt=H.a.create({item:{marginVertical:0,marginHorizontal:0},pointer:ht({},"web"==I.a.OS?{cursor:"pointer"}:{}),title:{fontSize:20,padding:15},username:{paddingLeft:15,paddingBottom:15},contentText:{fontSize:12},link:ht({paddingVertical:10,paddingHorizontal:15,borderRadius:5,marginHorizontal:15},"web"==I.a.OS?{cursor:"pointer"}:{}),image:{width:"100%",height:void 0,resizeMode:"contain"},foot:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},footText:{},footItem:{padding:15},by:{fontSize:11},score:{fontSize:18},actions:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",padding:10}});function Et(e){var t=Object(ie.b)(),n=He(),r=Object(l.useState)([]),o=d()(r,2),a=o[0],i=o[1],c=Object(l.useState)(null),s=d()(c,2),u=s[0],p=s[1],f=Object(l.useState)(null),y=d()(f,2),g=y[0],h=y[1],b=Object(l.useState)(0),v=d()(b,2),E=v[0],O=v[1];return Object(l.useEffect)((function(){n&&function(e,t){var n,r,o,a,i=arguments;return m.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:"hot",r=i.length>3?i[3]:void 0,o=i.length>4?i[4]:void 0,a=[null===t?"posts?sort="+n:"posts?page="+t+"&sort="+n,"include_your=true",void 0!==r&&"in_your_follows="+r,o&&"community="+o].filter((function(e){return e})).join("&"),l.abrupt("return",he(e,"GET",a).then((function(e){return e.json()})).then((function(e){return ke(ke({},e),{},{items:e.items.map(Ie)})})));case 5:case"end":return l.stop()}}),null,null,null,Promise)}(n,u,e.sort,e.inYourFollows,e.communityId).then((function(e){t(me({posts:e.items})),i((function(t){return[].concat(De()(t),De()(e.items.map((function(e){return e.id}))))})),h(e.next_page)}))}),[u,E]),[a,function(){p(g),h(null)},function(){i([]),p(null),h(null),O((function(e){return e+1}))}]}var Ot=n(49),wt=[{name:"Gold&Black",domain:"hoot.goldandblack.xyz"},{name:"Narwhal.City",domain:"narwhal.city"},{name:"FBXL",domain:"lotide.fbxl.net"},{name:"Tide C",domain:"c.tide.tk"},{name:"Exopla",domain:"lotide.exopla.net.eu.org"},{name:"Narwhal.City (Dev)",domain:"dev.narwhal.city"},{name:"Tide B",domain:"b.tide.tk"},{name:"Tide A",domain:"a.tide.tk"}],jt=function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.a.setItem("@lotide_ctx",JSON.stringify(e)));case 1:case"end":return t.stop()}}),null,null,null,Promise)},xt=function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.a.getItem("@lotide_ctx").then((function(e){return null!==e?JSON.parse(e):void 0})));case 1:case"end":return e.stop()}}),null,null,null,Promise)},Pt=function(e){var t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.login){n.next=2;break}return n.abrupt("return");case 2:t=e.login.user.username+"@"+e.apiUrl,zt.store("@lotide_ctx_arr",t,e);case 4:case"end":return n.stop()}}),null,null,null,Promise)},St=function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",zt.query("@lotide_ctx_arr",e));case 1:case"end":return t.stop()}}),null,null,null,Promise)},Tt=function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zt.listKeys("@lotide_ctx_arr"));case 1:case"end":return e.stop()}}),null,null,null,Promise)},kt=function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",zt.remove("@lotide_ctx_arr",e));case 1:case"end":return t.stop()}}),null,null,null,Promise)},Ct=function(e){var t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.login){n.next=2;break}return n.abrupt("return");case 2:t=e.login.user.username+"@"+e.apiUrl,zt.store("@lotide_ctx_arr",t,{apiUrl:e.apiUrl});case 4:case"end":return n.stop()}}),null,null,null,Promise)},It=function(){var e;return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.awrap(a.a.getItem("@lotide_ctx_arr"));case 2:return e=t.sent,t.abrupt("return",e?JSON.parse(e):{});case 4:case"end":return t.stop()}}),null,null,null,Promise)},zt={store:function(e,t,n){var r,o;return m.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,m.a.awrap(a.a.getItem(e));case 2:return r=i.sent,o=r?JSON.parse(r):{},o[t]=n,i.next=7,m.a.awrap(a.a.setItem(e,JSON.stringify(o)));case 7:case"end":return i.stop()}}),null,null,null,Promise)},query:function(e,t){var n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m.a.awrap(a.a.getItem(e));case 2:return n=r.sent,r.abrupt("return",n?JSON.parse(n)[t]:void 0);case 4:case"end":return r.stop()}}),null,null,null,Promise)},listKeys:function(e){var t,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m.a.awrap(a.a.getItem(e));case 2:return t=r.sent,n=t?JSON.parse(t):{},r.abrupt("return",Object.keys(n));case 5:case"end":return r.stop()}}),null,null,null,Promise)},remove:function(e,t){var n,r,o;return m.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,m.a.awrap(a.a.getItem(e));case 2:return n=i.sent,r=n?JSON.parse(n):{},o=r[t],delete r[t],i.next=8,m.a.awrap(a.a.setItem(e,JSON.stringify(r)));case 8:return i.abrupt("return",o);case 9:case"end":return i.stop()}}),null,null,null,Promise)}},Dt=Object(le.b)({name:"lotide",initialState:{ctx:null},reducers:{setCtx:function(e,t){e.ctx=t.payload}}}),_t=Dt.actions.setCtx,Lt=Dt.reducer;function Rt(e){var t=Object(l.useState)(""),n=d()(t,2),r=n[0],o=n[1],a=Object(l.useState)(wt),i=d()(a,2),s=i[0],u=i[1],p=Object(l.useState)([]),m=d()(p,2),f=m[0],y=m[1],g=q(),h=Object(ie.b)();Object(l.useEffect)((function(){wt.map((function(e,t){return Se({apiUrl:"https://"+e.domain+"/api/unstable"}).then((function(e){u((function(n){return n.map((function(n,r){return t!==r?n:{name:n.name,domain:n.domain,instanceInfo:e}}))}))})).catch((function(){u((function(e){return e.map((function(e,n){return t!==n?e:{name:e.name,domain:e.domain,instanceInfo:null}}))}))}))}))}),[]),Object(l.useEffect)((function(){It().then((function(e){return Object.entries(e)})).then(y)}),[]);return c.a.createElement(Ot.a,{contentContainerStyle:Bt.root},c.a.createElement(X,{style:Bt.title},"Login to continue"),f.length>0&&c.a.createElement(X,{style:Bt.subtitle},"Select an existing profile"),f.map((function(t){var n,r=t[0].split("@"),o=d()(r,2),a=o[0],i=o[1],l=!!t[1].login,s=l?g.text:g.secondaryText,u=i.replace("http://","").replace("https://","").split(/[/?#]/)[0],p=null==(n=wt.find((function(e){return e.domain==u})))?void 0:n.name;return c.a.createElement(z.a,{key:t[0],onPress:function(){l?h(_t(t[1])):e.onSelect(u.toLowerCase(),void 0,a)},style:{display:"flex",flexDirection:"row",alignItems:"center"}},c.a.createElement(j.a,{name:l?"lock-open-outline":"lock-closed-outline",color:s,style:{marginRight:10},size:20}),c.a.createElement(st,{name:a,host:u,local:!0,showHost:"always",newLine:!0,style:{paddingVertical:15,paddingBottom:10},styleName:{color:s}}),c.a.createElement(Q,{style:{flex:1}}),c.a.createElement(X,{style:{fontSize:16,color:s,fontFamily:"ios"===I.a.OS?"Georgia":"serif"}},p))})),c.a.createElement(X,{style:Bt.subtitle},f.length>0?"Or sign into a new acount":"Enter a host or select one below"),c.a.createElement(Z,{placeholder:"Host domain",style:{paddingVertical:10,paddingHorizontal:10},value:r,onChangeText:o,onSubmitEditing:function(){return e.onSelect(r.toLowerCase())},keyboardType:"url",returnKeyType:"next"}),s.filter((function(e){return""===r||e.domain.includes(r.toLowerCase())||e.name.toLowerCase().includes(r.toLowerCase())})).map((function(t){return c.a.createElement(Q,{key:t.domain},function(t){var n,r=t.item,o=((null==(n=r.instanceInfo)?void 0:n.apiVersion)||0)>8,a=o?g.text:g.secondaryText;return c.a.createElement(Q,{style:{borderBottomWidth:H.a.hairlineWidth||1,borderColor:g.secondaryText,paddingVertical:25}},c.a.createElement(z.a,{onPress:function(){return o&&e.onSelect(r.domain,r.name)}},c.a.createElement(st,{name:r.name,host:r.domain,local:!1,newLine:!0,styleName:{fontSize:24,fontWeight:"300",fontFamily:"ios"===I.a.OS?"Georgia":"serif",color:a}}),r.instanceInfo?c.a.createElement(c.a.Fragment,null,c.a.createElement(X,{style:{color:g.secondaryText}},r.instanceInfo.software.name," ",r.instanceInfo.software.version,!o&&" - Out of date"),!!r.instanceInfo.description&&c.a.createElement(X,{style:{color:a}},r.instanceInfo.description)):null===r.instanceInfo?c.a.createElement(X,{style:{color:a}},"Failed to load info"):c.a.createElement(X,{style:{color:a}},"Loading...")))}({item:t}))})))}var Bt=H.a.create({root:{padding:20},title:{fontSize:24,marginBottom:10,textAlign:"center"},subtitle:{fontWeight:"300",marginBottom:10,marginTop:15,textAlign:"center"}}),Vt=n(38),Ht=n(46),Nt=n(66),Ft=n(30);function Ut(e){var t=Object(l.useState)(!1),n=d()(t,2),r=n[0],o=n[1],a=Object(l.useState)(e.username||""),i=d()(a,2),s=i[0],u=i[1],p=Object(l.useState)(""),f=d()(p,2),y=f[0],g=f[1],h=Object(l.useState)(""),b=d()(h,2),v=b[0],E=b[1],O=Object(l.useRef)(null),w=Object(l.useRef)(null),j=q(),x=Object(ie.b)(),P=Object(Ft.q)();function S(e){U.a.alert("Failed to submit",e)}function T(){return s?y?v?void function(e,t,n,r){return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",he({apiUrl:e},"POST","users",{username:t,password:n,email_address:r,login:!0},!0).then((function(e){return e.json()})));case 1:case"end":return o.stop()}}),null,null,null,Promise)}("https://"+e.domain+"/api/unstable",s,y,v).then((function(t){x(_t({apiUrl:"https://"+e.domain+"/api/unstable",login:t}))})).catch((function(e){U.a.alert("Failed to register",e),console.error(e)})):S("Please enter an email address"):S("Enter a password"):S("Please enter a username")}function k(){return s?y?void function(e,t,n){return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",he({apiUrl:e},"POST","logins",{username:t,password:n},!0).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}("https://"+e.domain+"/api/unstable",s,y).then((function(t){x(_t({apiUrl:"https://"+e.domain+"/api/unstable",login:t}))})).catch((function(e){U.a.alert("Failed to login",e),console.error(e)})):S("Enter a password"):S("Please enter a username")}function C(){r?T():k()}return c.a.createElement(z.a,{style:{flex:1},onPress:function(){return"web"!==I.a.OS&&Ht.a.dismiss()}},c.a.createElement(Nt.a,{style:Wt.root,behavior:"padding"},e.hostName?c.a.createElement(z.a,{style:{alignItems:"center"}},c.a.createElement(X,{style:Wt.name},e.hostName),c.a.createElement(X,{style:[Wt.domain,{color:j.secondaryText}]},e.domain)):c.a.createElement(z.a,null,c.a.createElement(X,{style:{fontSize:24}},e.domain)),c.a.createElement(z.a,{hitSlop:5,onPress:function(){return o((function(e){return!e}))}},c.a.createElement(X,{style:[Wt.loginRegister,{color:j.secondaryText}]},c.a.createElement(X,{style:{color:r?j.secondaryText:j.secondaryTint}},"Login")," | ",c.a.createElement(X,{style:{color:r?j.secondaryTint:j.secondaryText}},"Register"))),r&&c.a.createElement(Z,{style:Wt.input,placeholder:"Email Address",value:v,onChangeText:E,keyboardType:"email-address",textContentType:"emailAddress",autoCompleteType:"email",returnKeyType:"next",onSubmitEditing:function(){var e;return null==(e=O.current)?void 0:e.focus()}}),c.a.createElement(Z,{ref:O,style:Wt.input,placeholder:"Username",value:s,onChangeText:u,keyboardType:"ascii-capable",textContentType:"username",autoCompleteType:"username",returnKeyType:"next",onSubmitEditing:function(){var e;return null==(e=w.current)?void 0:e.focus()}}),c.a.createElement(Z,{ref:w,style:Wt.input,placeholder:"Password",value:y,onChangeText:g,secureTextEntry:!0,textContentType:r?"newPassword":"password",autoCompleteType:"password",returnKeyType:"done",onSubmitEditing:C}),!r&&c.a.createElement(z.a,{style:{padding:15},onPress:function(){return P.navigate("ForgotPassword",{node:e.domain})}},c.a.createElement(X,{secondary:!0},"Forgot Password")),c.a.createElement(Q,{style:Wt.actionButtons},c.a.createElement(Vt.a,{title:"Change Host",onPress:e.onGoBack,color:j.secondaryTint}),c.a.createElement(Vt.a,{title:r?"Register":"Login",onPress:C,color:j.tint}))))}var Wt=H.a.create({root:{flex:1,alignItems:"center",justifyContent:"center",padding:35},name:{fontSize:50,fontFamily:"ios"===I.a.OS?"Georgia":"serif"},domain:{fontWeight:"300"},loginRegister:{padding:15},input:{width:"100%",marginVertical:5,paddingHorizontal:20,paddingVertical:10},actionButtons:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around"}});function Mt(){var e=Object(l.useState)(),t=d()(e,2),n=t[0],r=t[1],o=Object(l.useState)(),a=d()(o,2),i=a[0],s=a[1],u=Object(l.useState)(),p=d()(u,2),m=p[0],f=p[1];return c.a.createElement(Q,{style:At.root},i?c.a.createElement(Ut,{hostName:n,domain:i,username:m,onGoBack:function(){return s(void 0)}}):c.a.createElement(Rt,{onSelect:function(e,t,n){r(t),s(e),f(n)}}))}var At=H.a.create({root:{width:"100%",height:"100%"},container:{flex:1,alignItems:"center",justifyContent:"center"},input:{width:"100%",marginBottom:20,paddingHorizontal:20,paddingVertical:10},actionButtons:{display:"flex",flexDirection:"row",justifyContent:"space-around",width:"100%"}});function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e){if("ios"!==I.a.OS)return c.a.createElement(G.a,{style:e.style},e.children);var t=e.distanceToActivate||60,n=Object(l.useState)(!1),r=d()(n,2),o=r[0],a=r[1],i=Object(l.useState)(0),s=d()(i,2),u=s[0],p=s[1],m=Object(l.useState)(!1),f=d()(m,2),y=f[0],g=f[1],h=Object(l.useState)(!1),b=d()(h,2),v=b[0],E=b[1],O=Object(l.useState)(!1),w=d()(O,2),x=w[0],P=w[1],S=Object(D.a)(),T=Object(l.useState)(S.width),k=d()(T,2),C=k[0],z=k[1],_=Object(l.useRef)(null);return Object(l.useEffect)((function(){u<0&&!y?(ae(oe.a.Light),g(!0)):u>=0&&y&&(g(!1),o||(P(!0),e.onLeftSide())),u>=2*t&&!v?(ae(oe.a.Light),E(!0)):u<2*t&&v&&(E(!1),o||(P(!0),e.onRightSide())),u==t&&(null==e.onReturnToCenter||e.onReturnToCenter(),E(!1),g(!1),P(!1))}),[u]),c.a.createElement(G.a,{onLayout:function(e){return z(e.nativeEvent.layout.width)},style:{width:"100%"}},c.a.createElement(Ot.a,{ref:_,horizontal:!0,snapToOffsets:[t,t+C],snapToStart:!1,snapToEnd:!1,onScrollBeginDrag:function(){return a(!0)},onScrollEndDrag:function(){var e;null==(e=_.current)||e.scrollTo({x:t}),a(!1)},contentOffset:{x:t,y:0},onScroll:function(e){var t,n,r=null==e||null==(t=e.nativeEvent)||null==(n=t.contentOffset)?void 0:n.x;p(r)},scrollEventThrottle:100,showsHorizontalScrollIndicator:!1,style:$t({backgroundColor:e.backgroundColor},e.style),overScrollMode:"always"},c.a.createElement(G.a,{style:{width:t,display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(j.a,{name:e.iconLeftSide[+y||+x],color:e.colorLeftSide,size:25})),c.a.createElement(G.a,{style:{width:C}},e.children),c.a.createElement(G.a,{style:{width:t,display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(j.a,{name:e.iconRightSide[+v||+x],color:e.colorRightSide,size:25}))))}function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yt(e){e.navigation;var t=e.route.params.sort,n=He(),r=Et({sort:t,inYourFollows:!0}),o=d()(r,3),a=o[0],i=o[1],l=o[2];if(null==n||!n.login)return c.a.createElement(Mt,null);return c.a.createElement(Q,{style:Xt.container},c.a.createElement(N.a,{data:a,renderItem:function(e){var t=e.item;return c.a.createElement(Qt,{postId:t})},keyExtractor:function(e,t){return e+"-"+t},refreshing:0==a.length,onRefresh:l,onEndReachedThreshold:2,onEndReached:i}))}var Xt=H.a.create({container:{flex:1},item:{marginVertical:0,marginHorizontal:0,borderBottomWidth:8},title:{fontSize:20,padding:15,color:"#eee"},contentText:{fontSize:12},link:{paddingVertical:10,paddingHorizontal:15,backgroundColor:"#8884",borderRadius:5,marginHorizontal:15},image:{width:"100%",height:void 0,resizeMode:"contain"},foot:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",padding:15},footText:{color:"#ccc"},by:{fontSize:11},score:{fontSize:18,color:"#bbb"}}),Qt=function(e){var t=e.postId,n=Object(ie.c)((function(e){return e.posts.posts[t]})),r=Je("post",n),o=r.isUpvoted,a=r.addVote,i=r.removeVote,s=Object(l.useState)(!1),u=d()(s,2),p=u[0],m=u[1],f=q(),y=Object(Ft.q)();return c.a.createElement(qt,{iconLeftSide:o!==p?["heart-dislike","heart-dislike-outline"]:["heart-outline","heart"],iconRightSide:["arrow-undo-outline","arrow-undo"],colorLeftSide:f.red,colorRightSide:f.blue,onLeftSide:function(){o?i():a(),m(!0)},onRightSide:function(){y.navigate("Reply",{id:n.id,title:n.title,html:n.content_html,type:"post"})},onReturnToCenter:function(){return m(!1)},backgroundColor:f.secondaryBackground,style:{borderBottomWidth:8,borderColor:f.secondaryBackground}},c.a.createElement(z.a,{style:Kt({width:"100%"},"web"==I.a.OS?{cursor:"pointer"}:{}),onPress:function(){return y.navigate("Post",{postId:t})},onLongPress:function(){ae(oe.a.Heavy),console.log(n)}},c.a.createElement(Q,{style:[]},c.a.createElement(bt,{postId:t,navigation:y,truncateContent:!0}))))};function Zt(e){var t,n=Object(l.useState)(),r=d()(n,2),o=r[0],a=r[1],i=Object(l.useState)(""),s=d()(i,2),u=s[0],p=s[1],m=He(),f=q(),y=e.onlyWhenTyping&&""===u?[]:o?""===u?o.items:o.items.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())})):[];Object(l.useEffect)((function(){m&&ve(m,!1).then(a)}),[null==m||null==(t=m.login)?void 0:t.token,e.focusId]);return c.a.createElement(N.a,{data:y,renderItem:function(t){var n,r,o,a=t.item;return c.a.createElement(z.a,{onPress:function(){return e.onSelect(a)},style:[en.item,{borderColor:f.tertiaryBackground}]},c.a.createElement(G.a,{style:{flex:1,flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},c.a.createElement(st,{name:a.name,host:a.host,local:a.local,colorize:"always",newLine:!0}),c.a.createElement(G.a,{style:{display:"flex",flexDirection:"row"}},a.you_are_moderator&&c.a.createElement(j.a,{name:"shield-outline",size:20,color:f.secondaryTint}),(null==(n=a.your_follow)?void 0:n.accepted)&&c.a.createElement(j.a,{name:"checkmark",size:20,color:f.secondaryTint,style:{marginLeft:5}}))),!!a.description&&a.description.length>0&&c.a.createElement(A.a,{style:{color:f.secondaryText,marginTop:10}},null==(r=a.description)?void 0:r.substring(0,120),((null==(o=a.description)?void 0:o.length)||0)>120&&"..."))},keyExtractor:function(e,t){return e.id+"-"+t},contentContainerStyle:en.list,stickyHeaderIndices:[0],style:{backgroundColor:f.background},ListHeaderComponent:c.a.createElement(G.a,{style:{backgroundColor:f.background,padding:15}},c.a.createElement($.a,{placeholder:e.placeholder||"Filter communities",placeholderTextColor:f.placeholderText,value:u,onChangeText:p,style:[en.input,{color:f.text}]}))})}var en=H.a.create({input:{marginHorizontal:25,paddingVertical:10},list:{paddingBottom:50},item:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch",paddingVertical:10,borderTopWidth:H.a.hairlineWidth||1,paddingHorizontal:20,marginHorizontal:20}});function tn(e){var t=e.navigation,n=Object(l.useState)(0),r=d()(n,2),o=r[0],a=r[1],i=He();return Object(l.useEffect)((function(){return t.addListener("focus",(function(){return a((function(e){return e+1}))}))}),[]),null!=i&&i.login?c.a.createElement(Zt,{onSelect:function(e){return t.navigate("Community",{community:e})},focusId:o}):c.a.createElement(Mt,null)}function nn(e){var t,n,r,o=e.navigation,a=Object(l.useState)(),i=d()(a,2),s=i[0],u=i[1],p=Object(l.useState)([]),m=d()(p,2),f=m[0],y=m[1],g=Object(l.useState)([]),h=d()(g,2),b=h[0],v=h[1],E=Object(l.useState)(!1),O=d()(E,2),w=O[0],x=O[1],P=Object(l.useState)(0),S=d()(P,2),T=S[0],k=S[1],C=q(),D=He(),_=Object(ie.b)();if(Object(l.useEffect)((function(){return o.addListener("focus",(function(){return k((function(e){return e+1}))}))}),[]),Object(l.useEffect)((function(){null!=D&&D.login&&ve(D,!0).then((function(e){return v(e.items)}))}),[null==D||null==(t=D.login)?void 0:t.user.id,T]),Object(l.useEffect)((function(){var e;void 0!==(null==D?void 0:D.login)&&void 0!==D.login.user&&Oe(D,(null==(e=D.login)?void 0:e.user.id)||0).then(u)}),[null==D||null==(n=D.login)?void 0:n.token,T]),Object(l.useEffect)((function(){Tt().then((function(e){return y(e)}))}),[D,T]),void 0===(null==D?void 0:D.login))return c.a.createElement(Mt,null);return c.a.createElement(Ot.a,{style:[rn.container,{backgroundColor:C.background}]},c.a.createElement(Q,{style:rn.header},c.a.createElement(Q,null,c.a.createElement(z.a,{hitSlop:10,onPress:function(){return x((function(e){return!e}))}},c.a.createElement(X,{style:rn.title},(null==s?void 0:s.username)||D.login.user.username,"  ",c.a.createElement(j.a,{name:"pencil-outline",size:20,color:C.secondaryText}))),c.a.createElement(X,{style:{color:C.secondaryText}},null==s?void 0:s.host),!(null==s||!s.avatar)&&c.a.createElement(X,null,null==s||null==(r=s.avatar)?void 0:r.url),!(null==s||!s.description)&&c.a.createElement(X,null,null==s?void 0:s.description)),c.a.createElement(Vt.a,{onPress:function(){var e;null!=D&&D.login&&("web"!==I.a.OS?U.a.alert("Log out","Would you like to keep the login profile handy for later?",[{text:"Cancel",style:"cancel"},{text:"Remove",onPress:function(){var e;kt((null==(e=D.login)?void 0:e.user.username)+"@"+D.apiUrl).then((function(){return Ve(D)})).then((function(){return _(_t({}))}))}},{text:"Keep",style:"default",onPress:function(){Ct(D),_(_t({}))}}],{cancelable:!0}):kt((null==(e=D.login)?void 0:e.user.username)+"@"+D.apiUrl).then((function(){return Ve(D)})).then((function(){return _(_t({}))})))},title:"Log Out",color:C.secondaryTint,accessibilityLabel:"Log out of the Hoot network"})),w&&c.a.createElement(Q,{style:rn.editView},c.a.createElement(Z,{style:rn.editViewText,placeholder:"New email"}),c.a.createElement(Z,{style:rn.editViewText,placeholder:"User bio",multiline:!0}),c.a.createElement(Z,{style:rn.editViewText,placeholder:"New password"}),c.a.createElement(Z,{style:rn.editViewText,placeholder:"Confirm new password"}),c.a.createElement(Q,{style:rn.editViewActionButtons},c.a.createElement(Vt.a,{onPress:function(){return x(!1)},title:"Cancel",color:C.secondaryTint,accessibilityLabel:"Add profile"}),c.a.createElement(Vt.a,{onPress:function(){return U.a.alert("unimplemented")},title:"Submit",color:C.tint,accessibilityLabel:"Add profile"}))),c.a.createElement(Q,{style:rn.buttonView},c.a.createElement(Vt.a,{onPress:function(){return _(_t({}))},title:"Add Profile",color:C.tint,accessibilityLabel:"Add profile"})),f.map((function(e){return[e].concat(De()(e.split("@")))})).map((function(e){return[e[0],e[1],e[2].replace("http://","").replace("https://","").split(/[/?#]/)[0]]})).map((function(e){return c.a.createElement(z.a,{key:e[0],style:[rn.altProfileButton,{borderColor:C.secondaryBackground}],onPress:function(){St(e[0]).then((function(e){void 0!==e&&(_(_t(e)),jt(e),x(!1))}))}},c.a.createElement(st,{name:e[1],host:e[2],local:!0,showHost:"always",colorize:"never",newLine:!0}))})),c.a.createElement(Q,{style:[rn.buttonView,{paddingTop:10}]},c.a.createElement(Vt.a,{onPress:function(){return o.navigate("NewCommunity")},title:"Create Community",color:C.tint,accessibilityLabel:"Create a new community"})),c.a.createElement(X,{style:rn.followingTitle},"Communities You Follow:"),b.map((function(e){return c.a.createElement(Q,{key:e.id,style:[rn.altProfileButton,{borderColor:C.secondaryBackground}]},c.a.createElement(st,{name:e.name,host:e.host,local:e.local,showHost:"always",colorize:"always",newLine:!0}))})))}var rn=H.a.create({container:{height:"100%"},header:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",padding:20},title:{fontSize:20,fontWeight:"bold"},followingTitle:{fontSize:18,fontWeight:"500",padding:20},editView:{margin:20},editViewText:{marginBottom:15,paddingVertical:10,paddingHorizontal:15},editViewActionButtons:{display:"flex",flexDirection:"row",justifyContent:"space-around"},buttonView:{display:"flex",alignItems:"center"},separator:{marginVertical:30,height:1,width:"80%"},inputContainer:{width:"100%",padding:20},input:{height:40,borderWidth:1,paddingVertical:10,paddingHorizontal:20,width:"100%",borderRadius:8},altProfileButton:{marginHorizontal:20,paddingVertical:15,borderBottomWidth:1}}),on=n(154);function an(e){var t,n=e.navigation,r=e.route,o=Object(ie.b)(),a=Object(l.useState)(r.params.community),i=d()(a,2),s=i[0],u=i[1],p=Object(l.useState)(""),f=d()(p,2),y=f[0],g=f[1],h=Object(l.useState)(""),b=d()(h,2),v=b[0],E=b[1],O=Object(l.useState)(""),w=d()(O,2),j=w[0],x=w[1],P=q(),S=He();if(Object(l.useEffect)((function(){return n.addListener("focus",(function(){return r.params.community?u(r.params.community):null===s?u(void 0):void 0}))}),[s,null==s?void 0:s.id,null==(t=r.params.community)?void 0:t.id]),null==S||!S.login)return c.a.createElement(Mt,null);if(null===s)return c.a.createElement(Zt,{onSelect:u,onlyWhenTyping:!0});return c.a.createElement(Nt.a,{style:{width:"100%",height:"100%"}},c.a.createElement(on.a,{onPress:function(){return"web"!==I.a.OS&&Ht.a.dismiss()}},c.a.createElement(Q,{style:ln.container},c.a.createElement(z.a,{onPress:function(){return u(null)}},s?c.a.createElement(st,{name:s.name,host:s.host,local:s.local,colorize:"always",showHost:"always",newLine:!0,style:ln.input}):c.a.createElement(X,{style:[ln.input,{color:P.secondaryText}]},"Select a Community")),c.a.createElement($.a,{style:[ln.input,ln.title,{color:P.text}],placeholder:"Add a Title",placeholderTextColor:P.placeholderText,value:y,onChangeText:g}),y.length>=4?c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{style:[ln.input,{color:P.text}],placeholder:"Link",placeholderTextColor:P.placeholderText,value:v,onChangeText:E,keyboardType:"url",textContentType:"URL"}),c.a.createElement(Z,{style:{marginVertical:20,minHeight:100},multiline:!0,placeholder:"Add post content",value:j,onChangeText:x})):c.a.createElement(X,{style:{color:P.secondaryText}},y.length>0&&4-y.length),!!s&&y.length>=4&&c.a.createElement(Vt.a,{onPress:function(){S&&s&&function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"POST","posts",t).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(S,{community:s.id,title:y,href:v||void 0,content_markdown:j||" "}).then((function(e){Ce(S,e.id).then((function(e){u(void 0),g(""),E(""),x(""),o(pe({post:e})),n.navigate("Post",{postId:e.id})}))})).catch((function(e){return U.a.alert("Could not submit post",e)}))},title:"Submit",color:P.tint,accessibilityLabel:"Submit new post"}))))}var ln=H.a.create({container:{flex:1,alignItems:"stretch",padding:15,height:"100%",width:"100%"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},inputContainer:{width:"100%",padding:20},input:{paddingVertical:10,width:"100%",borderRadius:8},item:{paddingHorizontal:20,paddingVertical:10,marginHorizontal:20,marginBottom:1}});function cn(){return c.a.createElement(Q,null,c.a.createElement(X,null,"Settings screen. It'll be implemented eventually."))}function sn(e){var t=e.route,n=Object(l.useState)(t.params.community),r=d()(n,2),o=r[0],a=r[1],i=Et({sort:"hot",communityId:o.id}),s=d()(i,3),u=s[0],p=s[1],m=s[2],f=Object(l.useState)(0),y=d()(f,2),g=y[0],h=y[1],b=q(),v=He();Object(l.useEffect)((function(){v&&Ee(v,o.id).then(a)}),[null==v?void 0:v.apiUrl,t.params.community.id,t.params.community.description,g]);return c.a.createElement(Q,{style:[un.root,{backgroundColor:b.background}]},c.a.createElement(N.a,{data:u,renderItem:function(e){var t=e.item;return c.a.createElement(dn,{postId:t})},ListHeaderComponent:c.a.createElement(pn,{community:o,setReloadId:h}),keyExtractor:function(e,t){return e+"-"+t},refreshing:0==u.length,onRefresh:m,onEndReachedThreshold:2,onEndReached:p}))}var un=H.a.create({root:{height:"100%"},header:{padding:20,paddingVertical:15,borderBottomWidth:H.a.hairlineWidth||1},title:{fontSize:20},description:{marginTop:10},buttons:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-around",alignItems:"center"},item:{marginVertical:0,marginHorizontal:0,borderBottomWidth:8}}),dn=function(e){var t=e.postId,n=q(),r=Object(Ft.q)();return c.a.createElement(z.a,{onPress:function(){return r.navigate("Post",{postId:t})},onLongPress:function(){ae(oe.a.Heavy)}},c.a.createElement(Q,{style:[un.item,{borderBottomColor:n.secondaryBackground}]},c.a.createElement(bt,{postId:t,navigation:r,truncateContent:!0})))},pn=c.a.memo((function(e){var t,n=q(),r=Object(Ft.q)(),o=e.community,a=e.setReloadId,i=He(),l=(null==(t=o.your_follow)?void 0:t.accepted)||!1;return c.a.createElement(Q,{style:[un.header,{borderBottomColor:n.tertiaryBackground}]},c.a.createElement(Q,null,c.a.createElement(lt,{name:o.name,host:o.host,local:o.local,newLine:!0,colorize:"always",showHost:"always",styleName:[un.title]}),""!==o.description&&c.a.createElement(X,{style:un.description},o.description)),!!i&&c.a.createElement(Q,{style:[un.buttons]},c.a.createElement(Vt.a,{onPress:function(){return r.navigate("NewPostScreen",{community:o})},title:"Post",color:n.tint,accessibilityLabel:"Post to this community"}),o.you_are_moderator&&c.a.createElement(Vt.a,{onPress:function(){return r.navigate("EditCommunity",{community:o})},title:"Edit",color:n.tint,accessibilityLabel:"Edit your community community"}),l?c.a.createElement(Vt.a,{onPress:function(){i&&function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"POST","communities/"+t+"/unfollow"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(i,o.id).then((function(){a((function(e){return e+1}))}))},title:"Unfollow",color:n.secondaryTint,accessibilityLabel:"Stop seeing posts from this community"}):c.a.createElement(Vt.a,{onPress:function(){i&&we(i,o.id).then((function(e){!1===e.accepted&&U.a.alert("Follow request rejected.","This could be an issue with the node you are connected to."),a((function(e){return e+1}))}))},title:"Follow",color:n.tint,accessibilityLabel:"See posts from this community in your feed"})))})),mn=n(100);function fn(e){var t=e.navigation,n=e.route,r=Object(l.useState)(""),o=d()(r,2),a=o[0],i=o[1],s=Object(l.useRef)(null),u=q(),p=He(),f=n.params.id,y=n.params.title,g=n.params.html,h=n.params.type;return c.a.createElement(Nt.a,{behavior:"ios"===I.a.OS?"padding":"height",style:{flex:1,backgroundColor:u.background}},c.a.createElement(mn.b,{ref:s},c.a.createElement(z.a,{style:yn.root,onPress:function(){return"web"!==I.a.OS&&Ht.a.dismiss()}},c.a.createElement(X,null,"Reply to ",h),!!y&&c.a.createElement(X,{style:yn.title},y),!!g&&c.a.createElement(ot,{contentHtml:g}),c.a.createElement(Z,{style:yn.input,multiline:!0,placeholder:"Type your reply",value:a,onChangeText:i,onFocus:function(){s.current&&s.current.scrollToEnd({animated:!0})}}),c.a.createElement(Vt.a,{title:"Submit",color:u.tint,onPress:function(){null!=p&&p.login&&("post"===h?function(e,t,n){return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",he(e,"POST","posts/"+t+"/replies",{content_markdown:n}).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}(p,f,a).then((function(){return t.pop()})):function(e,t,n){return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",he(e,"POST","comments/"+t+"/replies",{content_markdown:n}).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}(p,f,a).then((function(){return t.pop()})))}}))))}var yn=H.a.create({root:{padding:20,paddingBottom:100},title:{fontSize:20,marginVertical:10},input:{marginVertical:20,minHeight:100}}),gn=n(52),hn=n(150);function bn(e,t){var n=Object(ie.b)(),r=Object(ie.c)((function(n){var r,o;return"post"==e?null==(r=n.posts.posts[t])?void 0:r.replies:null==(o=n.replies.replies[t])?void 0:o.replies})),o=He();function a(){if(o&&(!r||null!==r.next_page))switch(e){case"post":(function(e,t,n){return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",he(e,"GET","posts/"+t+"/replies?limit=10&include_your=true"+(n?"&page="+n:"")).then((function(e){return e.json()})).then(Be));case 1:case"end":return r.stop()}}),null,null,null,Promise)})(o,t,(null==r?void 0:r.next_page)||void 0).then((function(e){var o,a;n(Me({replies:e[1]})),n(fe({id:t,post:{replies:{items:[].concat(De()((null==r?void 0:r.items)||[]),De()((null==(o=e[0])?void 0:o.items)||[])),next_page:(null==(a=e[0])?void 0:a.next_page)||null}}}))}));break;case"reply":(function(e,t,n){return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",he(e,"GET","comments/"+t+"/replies?limit=10&include_your=true&sort=hot"+(n?"&page="+n:"")).then((function(e){return e.json()})).then(Be));case 1:case"end":return r.stop()}}),null,null,null,Promise)})(o,t,(null==r?void 0:r.next_page)||void 0).then((function(e){var o,a;n(Me({replies:e[1]})),n(Ae({id:t,reply:{replies:{items:[].concat(De()((null==r?void 0:r.items)||[]),De()((null==(o=e[0])?void 0:o.items)||[])),next_page:(null==(a=e[0])?void 0:a.next_page)||null}}}))}))}}return Object(l.useEffect)((function(){r||"post"!=e||a()}),[!!r]),{replies:r,loadNextPage:a}}function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function On(e){var t=Object(ie.b)(),n=Object(ie.c)((function(t){return e?t.replies.replies[e]:void 0})),r=He();return Object(l.useEffect)((function(){r&&e&&(n||function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"GET","comments/"+t,void 0,!0).then((function(e){return e.json()})).then(Re));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(r,e).then((function(e){t(Me({replies:e}))})).catch((function(){return console.log("Reply "+e+" could not be loaded")})))}),[null==n?void 0:n.id]),n&&En(En({},n),{},{replies:void 0})}function wn(e){var t=e.parentType,n=e.parentId,r=e.navigation,o=e.layer,a=void 0===o?0:o,i=e.postId,l=e.highlightedReplies,s=void 0===l?[]:l,u=bn(t,n),d=u.replies,p=u.loadNextPage,m=q();if(!He())return null;var f=[m.text,m.red,m.orange,m.yellow,m.green,m.teal,m.blue,m.indigo,m.purple];return d?c.a.createElement(G.a,null,d.items.map((function(e){return c.a.createElement(jn,{replyId:e,layer:a,key:e,navigation:r,layerColors:f,postId:i,highlightedReplies:s})})),null!==d.next_page&&c.a.createElement(z.a,{hitSlop:5,onPress:p},c.a.createElement(X,{style:{color:m.tint,paddingTop:5,paddingBottom:10}},"More replies ",c.a.createElement(j.a,{name:"chevron-down-outline"}))),null===d.next_page&&0===a&&c.a.createElement(X,{style:{margin:17,color:m.secondaryText}},d.items.length>0?"No more replies":"No replies yet")):c.a.createElement(X,null,"Can't find replies")}function jn(e){var t,n=e.replyId,r=e.layer,o=void 0===r?0:r,a=e.navigation,i=e.layerColors,l=e.postId,s=e.highlightedReplies,u=void 0===s?[]:s,p=On(n),m=bn("reply",n),f=m.replies,y=m.loadNextPage,g=c.a.useState(!0),h=d()(g,2),b=h[0],v=h[1],E=q(),O=He(),w=function(){var e=Object(ie.b)();return[Object(ie.c)((function(e){return e.replies.selectedReply})),function(t){e($e(t))}]}(),x=d()(w,2),P=x[0],S=x[1];return O?p?c.a.createElement(G.a,{style:{paddingLeft:0}},c.a.createElement(G.a,{style:{paddingVertical:8,borderTopWidth:.5,borderTopColor:E.secondaryBackground}},c.a.createElement(z.a,{onPress:function(){return S(P!=p.id?p.id:void 0)}},c.a.createElement(G.a,{style:{borderLeftWidth:2,borderColor:i[o%i.length],paddingLeft:15,paddingVertical:3,backgroundColor:u.includes(p.id)?E.secondaryBackground:E.background}},c.a.createElement(G.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap",marginBottom:5}},c.a.createElement(st,{name:p.author.username,host:p.author.host,local:p.author.local,showHost:"only_foreign",colorize:"only_foreign",style:{fontSize:16,fontWeight:"500"},userId:p.author.id}),c.a.createElement(G.a,{style:{marginRight:15,display:"flex",flexDirection:"row",alignItems:"center"}},c.a.createElement(X,null,!b&&"...    "),c.a.createElement(j.a,{name:p.your_vote?"heart":"heart-outline",size:14,color:E.text,light:!0}),c.a.createElement(X,null," "+p.score+"   "),c.a.createElement(te,{time:p.created}))),b&&!!p.content_html&&c.a.createElement(ot,{contentHtml:p.content_html,contentText:p.content_text})),P==p.id&&c.a.createElement(G.a,{style:xn.buttons},c.a.createElement(Xe,{type:"reply",content:p,hideCount:!0,style:xn.button}),c.a.createElement(z.a,{style:xn.button,onPress:function(){ae(oe.a.Medium),a.navigate("Reply",{id:p.id,title:p.author.username,html:p.content_html,type:"reply"})}},c.a.createElement(j.a,{color:E.text,size:20,name:"arrow-undo-outline"})),c.a.createElement(z.a,{style:xn.button,onPress:function(){v((function(e){return!e}))}},c.a.createElement(j.a,{color:((null==(t=p.replies)?void 0:t.items.length)||0)>0?E.text:E.secondaryText,size:20,name:b?"chevron-up-outline":"chevron-down-outline"}))))),f&&f.items.length>0&&(b?c.a.createElement(G.a,{style:{paddingLeft:15}},c.a.createElement(wn,{parentType:"reply",parentId:n,layer:o+1,navigation:a,postId:l,highlightedReplies:u})):c.a.createElement(X,null,"...")),void 0==f&&c.a.createElement(z.a,{hitSlop:5,onPress:y},c.a.createElement(G.a,{style:{paddingHorizontal:15,paddingBottom:10}},c.a.createElement(X,{style:{color:E.tint}},"More replies ",c.a.createElement(j.a,{name:"chevron-forward-outline"}))))):c.a.createElement(X,null,"Failed to load reply"):null}var xn=H.a.create({buttons:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",paddingHorizontal:15},button:{padding:10,paddingHorizontal:15}});function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tn(e){var t=e.navigation,n=e.route,r=ut(n.params.postId),o=Object(l.useState)(n.params.highlightedReplies),a=d()(o,2),i=a[0],s=a[1],u=q();return r?c.a.createElement(Ot.a,{style:{backgroundColor:u.background}},c.a.createElement(Q,{style:Sn(Sn({},kn.item),{},{backgroundColor:u.background})},c.a.createElement(bt,{postId:r.id,navigation:t,showAuthor:!0}),c.a.createElement(Q,{style:kn.actions},c.a.createElement(j.a,{name:"bookmark-outline",size:25,color:u.text}),c.a.createElement(z.a,{hitSlop:5,onPress:function(){ae(oe.a.Medium),t.navigate("Reply",{id:r.id,title:r.title,html:r.content_html,type:"post"})}},c.a.createElement(j.a,{name:"arrow-undo-outline",size:25,color:u.text})),c.a.createElement(z.a,{hitSlop:5,onPress:function(){ae(oe.a.Medium),hn.a.share({message:r.title,url:"https://dev.goldandblack.xyz/p/posts/"+r.id,title:"Hoot"})}},c.a.createElement(j.a,{name:"share-outline",size:25,color:u.text}))),i&&c.a.createElement(z.a,{onPress:function(){return s(void 0)}},c.a.createElement(X,{style:{color:u.tint,paddingVertical:10}},"Show all replies")),c.a.createElement(wn,{parentType:"post",parentId:r.id,navigation:t,postId:r.id,highlightedReplies:i}),c.a.createElement(Q,{style:{height:300}}))):c.a.createElement(X,null,"No post")}var kn=H.a.create({container:{flex:1,marginTop:gn.a.currentHeight||0},item:{marginVertical:0,marginHorizontal:0},title:{fontSize:20,padding:15},contentText:{fontSize:12},link:{paddingVertical:10,paddingHorizontal:15,backgroundColor:"#8884",borderRadius:5,marginHorizontal:15},image:{width:"100%",height:void 0,resizeMode:"contain"},foot:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",padding:15,borderBottomColor:"#8884",borderBottomWidth:2},by:{fontSize:11},actions:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",padding:10}}),Cn=n(104);function In(e){var t=e.navigation;return l.createElement(G.a,{style:zn.container},l.createElement(A.a,{style:zn.title},"This screen doesn't exist."),l.createElement(Cn.a,{onPress:function(){return t.replace("Root")},style:zn.link},l.createElement(A.a,{style:zn.linkText},"Go to home screen!")))}var zn=H.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}});function Dn(e){var t=e.navigation,n=Object(l.useState)([]),r=d()(n,2),o=r[0],a=r[1],i=Object(l.useState)(!0),s=d()(i,2),u=s[0],p=s[1],f=Object(l.useState)(0),y=d()(f,2),g=y[0],h=y[1],b=q(),v=He();if(Object(l.useEffect)((function(){null!=v&&v.login&&function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",he(e,"GET","users/~me/notifications").then((function(e){return e.json()})).then((function(e){return e.map((function(e){return{unseen:(t=e).unseen,replyId:t.reply.id,origin:t.comment?{type:"reply",id:t.comment}:{type:"post",id:t.post.id},postId:t.post.id};var t}))})));case 1:case"end":return t.stop()}}),null,null,null,Promise)}(v).then(a).then((function(){return p(!1)}))}),[g]),Object(l.useEffect)((function(){return t.addListener("focus",(function(){return h((function(e){return e+1}))}))}),[]),null==v||!v.login)return c.a.createElement(Mt,null);return c.a.createElement(N.a,{style:[Ln.container,{backgroundColor:b.background}],data:o,renderItem:function(e){var t=e.item;return c.a.createElement(_n,{item:t})},keyExtractor:function(e,t){return e.replyId+"-"+t},refreshing:u,onRefresh:function(){p(!0),h((function(e){return e+1}))}})}var _n=function(e){var t=e.item,n=ut(t.postId),r=On("reply"==t.origin.type?t.origin.id:void 0),o=On(t.replyId),a=q(),i=Object(Ft.q)();return n&&o&&("reply"!==t.origin.type||r)?c.a.createElement(z.a,{style:[Ln.item,{borderBottomColor:a.secondaryBackground}],onPress:function(){var e="reply"===t.origin.type?[t.origin.id,t.replyId]:[t.replyId];i.navigate("Post",{postId:t.postId,highlightedReplies:e})}},c.a.createElement(X,null,"New reply to your ","post"==t.origin.type?"Post":"Reply"),c.a.createElement(X,{style:Ln.title},n.title),c.a.createElement(st,{name:n.author.username,host:n.author.host,local:n.author.local,showHost:"only_foreign",colorize:"never",userId:n.author.id}),"reply"===t.origin.type&&r?c.a.createElement(c.a.Fragment,null,c.a.createElement(Q,{style:[Ln.level1,{borderColor:a.secondaryText}]},c.a.createElement(st,{name:r.author.username,host:r.author.host,local:r.author.local,showHost:"only_foreign",colorize:"only_foreign",userId:r.author.id}),c.a.createElement(ot,{contentHtml:r.content_html,contentText:r.content_text})),c.a.createElement(Q,{style:[Ln.level2,{borderColor:a.tint,backgroundColor:a.secondaryBackground}]},c.a.createElement(st,{name:o.author.username,host:o.author.host,local:o.author.local,showHost:"only_foreign",colorize:"only_foreign"}),c.a.createElement(ot,{contentHtml:o.content_html,contentText:o.content_text}))):c.a.createElement(c.a.Fragment,null,c.a.createElement(Q,{style:[Ln.level1,{borderColor:a.tint,backgroundColor:a.secondaryBackground}]},c.a.createElement(st,{name:o.author.username,host:o.author.host,local:o.author.local,showHost:"only_foreign",colorize:"only_foreign"}),c.a.createElement(ot,{contentHtml:o.content_html,contentText:o.content_text}))),c.a.createElement(Q,{style:Ln.community},c.a.createElement(st,{name:n.community.name,host:n.community.host,local:n.community.local,showHost:"always",colorize:"never",newLine:!0}))):null},Ln=H.a.create({container:{flex:1},item:{borderBottomWidth:5,padding:15},title:{fontSize:20,marginTop:15},level1:{marginTop:15,borderLeftWidth:2,paddingLeft:15,padding:5},level2:{marginTop:5,marginLeft:15,borderLeftWidth:2,paddingLeft:15,padding:5},name:{fontWeight:"600",marginBottom:3},thin:{fontWeight:"200"},community:{marginTop:15}});function Rn(e){var t=e.navigation,n=Object(l.useState)(""),r=d()(n,2),o=r[0],a=r[1],i=Object(l.useState)(""),s=d()(i,2),u=s[0],p=s[1],f=q(),y=He();if(!y)return null;return c.a.createElement(Q,{style:Bn.root},c.a.createElement($.a,{style:[Bn.input,{fontSize:20,color:f.text}],placeholder:"Community Name",placeholderTextColor:f.placeholderText,value:o,onChangeText:a}),o.length>=4?c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{style:[Bn.input,{color:f.text}],placeholder:"Description (Optional)",placeholderTextColor:f.placeholderText,value:u,onChangeText:p}),c.a.createElement(Vt.a,{title:"Submit",color:f.tint,onPress:function(){null!=y&&y.login&&function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"POST","communities",{name:t}).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(y,o).then((function(e){var n,r;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=e.community.id,!u){o.next=4;break}return o.next=4,m.a.awrap(je(y,n,u));case 4:return o.next=6,m.a.awrap(we(y,n));case 6:return o.next=8,m.a.awrap(Ee(y,n));case 8:r=o.sent,t.replace("Community",{community:r});case 10:case"end":return o.stop()}}),null,null,null,Promise)})).catch((function(e){return U.a.alert("Failed to create community",e)}))},accessibilityLabel:"Create new community"})):c.a.createElement(X,null,o.length>0&&4-o.length))}var Bn=H.a.create({root:{flex:1,alignItems:"flex-start",padding:15,height:"100%",width:"100%"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},inputContainer:{width:"100%",padding:20},input:{paddingVertical:10,width:"100%",borderRadius:8},item:{paddingHorizontal:20,paddingVertical:10,marginHorizontal:20,marginBottom:1}});function Vn(e){var t=e.navigation,n=e.route,r=Object(l.useState)(!1),o=d()(r,2),a=o[0],i=o[1],s=Object(l.useState)(""),u=d()(s,2),p=u[0],f=u[1],y=Object(l.useState)(),g=d()(y,2),h=g[0],b=g[1],v=Object(l.useState)(""),E=d()(v,2),O=E[0],w=E[1],j=q();return c.a.createElement(z.a,{style:{flex:1},onPress:function(){return"web"!==I.a.OS&&Ht.a.dismiss()}},c.a.createElement(Nt.a,{style:Hn.root,behavior:"padding"},c.a.createElement(z.a,null,c.a.createElement(X,null,n.params.node)),a?c.a.createElement(c.a.Fragment,null,h?c.a.createElement(c.a.Fragment,null,c.a.createElement(Z,{placeholder:"New Password",style:Hn.input,value:O,onChangeText:w,autoCapitalize:"none",secureTextEntry:!0,textContentType:"password",autoCompleteType:"password"}),c.a.createElement(Q,{style:Hn.actionButtons},c.a.createElement(Vt.a,{title:"Go Back",onPress:function(){return i(!1)},color:j.secondaryTint}),c.a.createElement(Vt.a,{title:"Submit",onPress:function(){return O?h?void(e={apiUrl:"https://"+n.params.node+"/api/unstable"},r=h,o=O,m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",he(e,"POST","forgot_password/keys/"+r+"/reset",{new_password:o},!0));case 1:case"end":return t.stop()}}),null,null,null,Promise)).then((function(){return t.popToTop()})):U.a.alert("No key","Fail. This shouldn't happen"):U.a.alert("Password required");var e,r,o},color:j.tint}))):c.a.createElement(Z,{placeholder:"Key",style:Hn.input,onChangeText:function(e){e.length<6||function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"GET","forgot_password/keys/"+t,void 0,!0));case 1:case"end":return n.stop()}}),null,null,null,Promise)}({apiUrl:"https://"+n.params.node+"/api/unstable"},e).then((function(){return b(e)}))},autoCapitalize:"none"})):c.a.createElement(c.a.Fragment,null,c.a.createElement(Z,{style:Hn.input,placeholder:"Email Address",value:p,onChangeText:f,keyboardType:"email-address",textContentType:"emailAddress",autoCompleteType:"email",returnKeyType:"go",autoCapitalize:"none"}),c.a.createElement(Vt.a,{title:"Submit",onPress:function(){if(!p)return U.a.alert("Email address required","An email with a password reset key will be emailed to you");(function(e,t){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",he(e,"POST","forgot_password/keys",{email_address:t},!0));case 1:case"end":return n.stop()}}),null,null,null,Promise)})({apiUrl:"https://"+n.params.node+"/api/unstable"},p).then((function(){i(!0)})).catch((function(e){return U.a.alert("Failed to send reset key",e)}))},color:j.tint}))))}var Hn=H.a.create({root:{flex:1,alignItems:"center",justifyContent:"center",padding:30},input:{width:"100%",paddingVertical:10,paddingHorizontal:15,marginTop:15},actionButtons:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"space-around"}});function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Un(e){var t=e.navigation,n=e.route.params.community,r=Object(l.useState)(n.description||""),o=d()(r,2),a=o[0],i=o[1],s=q(),u=He();return c.a.createElement(Nt.a,{behavior:"ios"===I.a.OS?"padding":"height"},c.a.createElement(z.a,{style:Wn.root,onPress:function(){return"web"!==I.a.OS&&Ht.a.dismiss()}},c.a.createElement(st,{name:n.name,host:n.host,local:n.local,showHost:"always",newLine:!0,style:Wn.title}),c.a.createElement(Z,{style:Wn.input,multiline:!0,placeholder:"Add a description",value:a,onChangeText:i}),c.a.createElement(Vt.a,{title:"Submit",color:s.tint,onPress:function(){u&&je(u,n.id,a).then((function(){return Ee(u,n.id)})).then((function(e){return t.navigate("Community",{community:Fn(Fn({},e),{},{description:a})})})).catch((function(e){return U.a.alert("Failed to edit community",e)}))}})))}var Wn=H.a.create({root:{padding:20,paddingBottom:100},title:{fontSize:20,marginVertical:10},input:{marginVertical:20,minHeight:100}}),Mn=n(384);function An(e){var t=e.colorScheme;return c.a.createElement(P.a,{linking:V,theme:"dark"===t?S.a:T.a},c.a.createElement($n,null))}var Gn=Object(k.a)();function $n(){var e=Object(D.a)();return c.a.createElement(Gn.Navigator,null,c.a.createElement(Gn.Screen,{name:"Root",component:e.width<1200?Jn:Yn,options:{headerShown:!1}}),c.a.createElement(Gn.Screen,{name:"Web",component:Tn}),c.a.createElement(Gn.Screen,{name:"Post",component:Tn}),c.a.createElement(Gn.Screen,{name:"Reply",component:fn}),c.a.createElement(Gn.Screen,{name:"Community",component:sn}),c.a.createElement(Gn.Screen,{name:"NewCommunity",component:Rn}),c.a.createElement(Gn.Screen,{name:"EditCommunity",component:Un}),c.a.createElement(Gn.Screen,{name:"Settings",component:cn}),c.a.createElement(Gn.Screen,{name:"ForgotPassword",component:Vn,options:{title:"Forgot Password"}}),c.a.createElement(Gn.Screen,{name:"NotFound",component:In,options:{title:"Oops!"}}),c.a.createElement(Gn.Group,{screenOptions:{presentation:"modal"}},c.a.createElement(Gn.Screen,{name:"Modal",component:Tn})))}var qn=Object(x.a)();function Jn(e){var t=e.navigation,n=Object(l.useState)("hot"),r=d()(n,2),o=r[0],a=r[1],i=He(),s=E();return Object(l.useEffect)((function(){((null==i?void 0:i.apiVersion)||0)<10&&"top"==o&&(a("hot"),t.navigate("FeedScreen",{sort:"hot"}))}),[null==i?void 0:i.apiVersion]),c.a.createElement(qn.Navigator,{initialRouteName:"FeedScreen",screenOptions:{tabBarActiveTintColor:L[s].tint,tabBarShowLabel:!1}},c.a.createElement(qn.Screen,{name:"FeedScreen",component:Yt,initialParams:{sort:o},options:function(e){var t=e.navigation;return{title:"Hoot",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"newspaper-outline",color:t})},headerRight:function(){return c.a.createElement(z.a,{onPress:function(){if(console.log(i),"ios"==I.a.OS)C.ActionSheetIOS.showActionSheetWithOptions({options:["Cancel","Hot","New",((null==i?void 0:i.apiVersion)||0)>=10?"Top":""].filter((function(e){return!!e})),title:"Sort by:",cancelButtonIndex:0},(function(e){var n=[o,"hot","new","top"][e];a(n),t.navigate("FeedScreen",{sort:n})}));else{var e={top:"hot",hot:"new",new:((null==i?void 0:i.apiVersion)||0)<10?"hot":"top"}[o];a(e),t.navigate("FeedScreen",{sort:e})}},style:function(e){return{opacity:e.pressed?.5:1}}},c.a.createElement(j.a,{name:{hot:"flame-outline",new:"time-outline",top:"trophy-outline"}[o],size:25,color:L[s].tint,style:{marginRight:15}}))}}}}),c.a.createElement(qn.Screen,{name:"SearchScreen",component:tn,options:{title:"Communities",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"search-outline",color:t})}}}),c.a.createElement(qn.Screen,{name:"NewPostScreen",component:an,initialParams:{community:void 0},options:{title:"New Post",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"add-outline",color:t,size:40})}}}),c.a.createElement(qn.Screen,{name:"NotificationScreen",component:Dn,options:{title:"Notifications",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"notifications-outline",color:t})}}}),c.a.createElement(qn.Screen,{name:"ProfileScreen",component:nn,options:{title:"Profile",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"person-circle-outline",color:t})},headerLeft:function(){return c.a.createElement(z.a,{onPress:function(){t.navigate("Settings")},style:function(e){return{opacity:e.pressed?.5:1}}},c.a.createElement(j.a,{name:"cog-outline",size:25,color:L[s].secondaryText,style:{marginLeft:15}}))}}}))}var Kn=Object(Mn.a)();function Yn(e){var t=e.navigation,n=Object(l.useState)("hot"),r=d()(n,2),o=r[0],a=r[1],i=He(),s=E();return c.a.createElement(Kn.Navigator,{initialRouteName:"FeedScreen",screenOptions:{drawerActiveTintColor:"orange",drawerType:"permanent"}},c.a.createElement(Kn.Screen,{name:"FeedScreen",component:Yt,initialParams:{sort:o},options:function(e){var t=e.navigation;return{title:"Hoot",drawerIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"newspaper-outline",color:t})},headerRight:function(){return c.a.createElement(z.a,{onPress:function(){var e={top:"hot",hot:"new",new:((null==i?void 0:i.apiVersion)||0)<10?"hot":"top"}[o];a(e),t.navigate("FeedScreen",{sort:e})},style:function(e){return{opacity:e.pressed?.5:1}}},c.a.createElement(j.a,{name:{hot:"flame-outline",new:"time-outline",top:"arrow-up-outline"}[o],size:25,color:L[s].tint,style:{marginRight:15}}))}}}}),c.a.createElement(Kn.Screen,{name:"SearchScreen",component:tn,options:{title:"Communities",drawerIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"search-outline",color:t})}}}),c.a.createElement(Kn.Screen,{name:"NewPostScreen",component:an,initialParams:{community:void 0},options:{title:"New Post",drawerIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"add-outline",color:t,size:40})}}}),c.a.createElement(Kn.Screen,{name:"NotificationScreen",component:Dn,options:{title:"Notifications",drawerIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"notifications-outline",color:t})}}}),c.a.createElement(Kn.Screen,{name:"ProfileScreen",component:nn,options:{title:"Profile",drawerIcon:function(e){var t=e.color;return c.a.createElement(Xn,{name:"person-circle-outline",color:t})},headerRight:function(){return c.a.createElement(z.a,{onPress:function(){t.navigate("Settings")},style:function(e){return{opacity:e.pressed?.5:1}}},c.a.createElement(j.a,{name:"settings-outline",size:25,color:L[s].secondaryText,style:{marginRight:15}}))}}}))}function Xn(e){var t=e.size||30;return c.a.createElement(j.a,w()({size:t,style:{marginBottom:-3,height:t,width:t}},e))}var Qn=Object(le.a)({reducer:{lotide:Lt,posts:ge,replies:qe}});function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tr(){var e=function(){var e=l.useState(!1),t=d()(e,2),r=t[0],o=t[1];return l.useEffect((function(){m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g.b(),e.next=4,m.a.awrap(y.b(b(b({},f.a.font),{},{"space-mono":n(300)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,o(!0),g.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}(),t=E(),r=He(),o=Object(ie.b)();function u(e){Pt(e).then((function(){return a.a.setItem("@lotide_ctx",JSON.stringify(e))})).then((function(){return o(_t(e))}))}return Object(l.useEffect)((function(){xt().then((function(e){void 0!==e&&o(_t(e))}))}),[]),Object(l.useEffect)((function(){null!=r&&r.apiUrl&&(Se(r).then((function(e){if(console.log(r),console.log("version",e.apiVersion),e.apiVersion<8||e.apiVersion>10)throw"Bad version";e.apiVersion!=r.apiVersion&&u(er(er({},r),{},{apiVersion:e.apiVersion}))})).catch((function(e){var t;U.a.alert("Failed to login",e),kt((null==(t=r.login)?void 0:t.user.username)+"@"+r.apiUrl).then((function(){return u({})}))})),r.login&&Oe(r,r.login.user.id).catch((function(){var e;kt((null==(e=r.login)?void 0:e.user.username)+"@"+r.apiUrl).then((function(){return u({})}))})))}),[null==r?void 0:r.apiUrl,null==r?void 0:r.apiVersion]),e?c.a.createElement(s.b,null,c.a.createElement(An,{colorScheme:t}),c.a.createElement(i.a,null)):null}t.a=function(){return c.a.createElement(ie.a,{store:Qn},c.a.createElement(tr,null))}},282:function(e,t,n){e.exports=n(365)},300:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},316:function(e,t){}},[[282,1,2]]]);
//# sourceMappingURL=app.31492e4d.chunk.js.map
(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{271:function(e,t,n){"use strict";var r=n(4),o=n.n(r),a=n(65),i=n(272),l=n(0),c=n.n(l),s=n(143),u=n(7),d=n.n(u),m=n(8),p=n.n(m),f=n(377),y=n(386),g=n(203);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=n(144);function E(){return Object(v.a)()}var w=n(47),O=n.n(w),j=n(34),x=n(384),S=n(378),P=n(379),T=n(169),k=n(385),C=n(156),I=n(3),z=n(20),_=n(105),D="web"===I.a.OS?function(){}:n(156).PlatformColor,L={light:"ios"===I.a.OS?B():{tint:"orange",secondaryTint:"purple",text:"#111",secondaryText:"#333",placeholderText:"#444",background:"#fff",secondaryBackground:"#eee",tertiaryBackground:"#ccc",tabIconDefault:"#ccc",tabIconSelected:"orange",red:"red",orange:"orange",yellow:"yellow",green:"green",teal:"eeal",blue:"blue",indigo:"indigo",purple:"purple"},dark:"ios"===I.a.OS?B():{tint:"orange",secondaryTint:"purple",text:"#fff",secondaryText:"#666",placeholderText:"#aaa",background:"#111",secondaryBackground:"#222",tertiaryBackground:"#222",tabIconDefault:"#ccc",tabIconSelected:"orange",red:"red",orange:"orange",yellow:"yellow",green:"green",teal:"eeal",blue:"#68f",indigo:"indigo",purple:"purple"}};function B(){return{tint:D("systemOrange"),secondaryTint:D("systemPurple"),text:D("label"),secondaryText:D("secondaryLabel"),placeholderText:D("placeholderText"),background:D("systemBackground"),secondaryBackground:D("secondarySystemBackground"),tertiaryBackground:D("tertiarySystemBackground"),tabIconDefault:D("secondaryLabel"),tabIconSelected:D("systemOrange"),red:D("systemRed"),orange:D("systemOrange"),yellow:D("systemYellow"),green:D("systemGreen"),teal:D("systemTeal"),blue:D("systemBlue"),indigo:D("systemIndigo"),purple:D("systemPurple")}}var R=n(177),V={prefixes:[R.a("/")],config:{screens:{Root:{screens:{TabOne:{screens:{TabOneScreen:"one"}},TabTwo:{screens:{TabTwoScreen:"two"}}}},Modal:"modal",NotFound:"*"}}},H=n(2),N=n(62),F=n(51),W=n(257),M=n(35),U=n(14),A=n.n(U),G=n(27),$=n(5),q=n(63);function J(){var e=E();return L[e]}var K=["style","secondary","tint"],Y=["style"],X=["style","placeholderTextColor"];function Q(e){var t=e.style,n=e.secondary,r=e.tint,o=A()(e,K),a=J(),i=n||r?n&&!r?a.secondaryText:r&&!n?a.tint:a.secondaryTint:a.text;return c.a.createElement(G.a,O()({style:[{color:i},t]},o))}function Z(e){var t=e.style,n=A()(e,Y),r=J().background;return c.a.createElement($.a,O()({style:[{backgroundColor:r},t]},n))}var ee=Object(l.forwardRef)((function(e,t){var n=e.style,r=e.placeholderTextColor,o=A()(e,X),a=J(),i={backgroundColor:a.secondaryBackground,paddingHorizontal:10,paddingVertical:5,borderRadius:8,color:a.text};return c.a.createElement(q.a,O()({ref:t,style:[i,n],placeholderTextColor:r||a.placeholderText},o))}));function te(e){return Object(l.useMemo)((function(){return function(e){var t=Math.round((Date.now()-Date.parse(e))/1e3),n=Math.round(t/60),r=Math.round(n/60),o=Math.round(r/24),a=Math.round(o/7),i=Math.round(o/30.4),l=Math.round(o/365);return n<60&&n+"min"||r<24&&r+"h"||o<7&&o+"d"||a<5&&a+"w"||i<12&&i+"mo"||l+"y"}(e)}),[e])}function ne(e){var t=te(e.time);return c.a.createElement(z.a,{hitSlop:8,onPress:function(){return M.a.alert("Date posted",e.time)}},c.a.createElement(Q,{style:re.root},c.a.createElement(W.a,{name:"time-outline",size:14})," ",t))}var re=H.a.create({root:{}}),oe=n(198),ae=n(128);function ie(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"!==I.a.OS){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,p.a.awrap(oe.a(e));case 4:case"end":return t.stop()}}),null,null,null,Promise)}var le=n(36),ce=n(90);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=Object(ce.b)({name:"posts",initialState:{posts:{}},reducers:{setPost:function(e,t){var n=t.payload;e.posts[n.post.id]=n.post},setPostMulti:function(e,t){t.payload.posts.forEach((function(t){e.posts[t.id]=t}))},editPost:function(e,t){var n=t.payload,r=e.posts[n.id];e.posts[n.id]=ue(ue({},r),n.post)},clearPosts:function(e){e.posts={}},setPostVote:function(e,t){var n=t.payload,r=e.posts[n.id];r.your_vote!==n.vote&&(r.your_vote=n.vote,n.vote?r.score+=1:r.score-=1)}}}),me=de.actions,pe=me.setPost,fe=me.setPostMulti,ye=me.editPost,ge=(me.clearPosts,me.setPostVote),he=de.reducer;function be(e,t,n,r){var o,a,i=arguments;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(a=i.length>4&&void 0!==i[4]&&i[4],e.apiUrl){l.next=3;break}throw"No API url";case 3:if(a||null!=(o=e.login)&&o.token){l.next=5;break}throw"Not logged in";case 5:return l.abrupt("return",fetch(e.apiUrl+"/"+n,{method:t,headers:ve(e),body:void 0!==r?JSON.stringify(r):void 0}).then((function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=4;break}return t.abrupt("return",e);case 4:return t.next=6,p.a.awrap(e.text());case 6:throw t.sent;case 7:case"end":return t.stop()}}),null,null,null,Promise)})).catch((function(r){throw console.error("Lotide Service Error: "+t+" "+e.apiUrl+"/"+n+"\n"+r,e),r})));case 6:case"end":return l.stop()}}),null,null,null,Promise)}function ve(e){return void 0!==e.login?{Authorization:"Bearer "+e.login.token,"Content-Type":"application/json"}:void 0}function Ee(e){var t,n,r=arguments;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=r.length>1&&void 0!==r[1]&&r[1],n=r.length>2?r[2]:void 0,o.abrupt("return",be(e,"GET","communities?include_your=true&limit=100"+(t?"&your_follow.accepted=true":"")+(n?"&page="+n:"")).then((function(e){return e.json()})).then((function(e){return e})));case 3:case"end":return o.stop()}}),null,null,null,Promise)}function we(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"GET","communities/"+t+"?include_your=true").then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function Oe(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"GET","users/"+t,void 0,!0).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function je(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"POST","communities/"+t+"/follow",{try_wait_for_accept:!0}).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function xe(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",be(e,"PATCH","communities/"+t,{description:n}));case 1:case"end":return r.stop()}}),null,null,null,Promise)}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",be(e,"GET","instance",void 0,!0).then((function(e){return e.json()})).then((function(e){var t=parseInt(e.software.version.split(".")[1]);return Pe(Pe({},e),{},{apiVersion:t})})));case 1:case"end":return t.stop()}}),null,null,null,Promise)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"GET","posts/"+t,void 0,!0).then((function(e){return e.json()})).then(ze));case 1:case"end":return n.stop()}}),null,null,null,Promise)}function ze(e){return void 0!==e.your_vote?Ce(Ce({},e),{},{your_vote:null!==e.your_vote}):e}var _e=n(18),De=n.n(_e);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){var t=Ve(e.replies||void 0),n=d()(t,2),r=n[0],o=n[1];return[Be(Be({},e),{},{replies:r,your_vote:null!==e.your_vote&&void 0!==e.your_vote})].concat(De()(o))}function Ve(e){return e?[{items:e.items.map((function(e){return e.id})),next_page:e.next_page},e.items.flatMap(Re)]:[void 0,[]]}function He(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",be(e,"DELETE","logins/~current"));case 1:case"end":return t.stop()}}),null,null,null,Promise)}function Ne(){return Object(le.c)((function(e){return e.lotide.ctx}))}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=Object(ce.b)({name:"replies",initialState:{replies:{}},reducers:{setReply:function(e,t){var n=t.payload;e.replies[n.reply.id]=n.reply},setReplyMulti:function(e,t){t.payload.replies.forEach((function(t){e.replies[t.id]=t}))},editReply:function(e,t){var n=t.payload,r=e.replies[n.id];e.replies[n.id]=We(We({},r),n.reply)},clearReplies:function(e){e.replies={}},setReplyVote:function(e,t){var n=t.payload,r=e.replies[n.id];r.your_vote!==n.vote&&(r.your_vote=n.vote,n.vote?r.score+=1:r.score-=1)},setSelectedReply:function(e,t){e.selectedReply=t.payload}}}),Ue=Me.actions,Ae=(Ue.setReply,Ue.setReplyMulti),Ge=Ue.editReply,$e=(Ue.clearReplies,Ue.setReplyVote),qe=Ue.setSelectedReply,Je=Me.reducer;function Ke(e,t){var n=!!t.your_vote,r=Object(le.b)(),o=Ne();function a(n){r("post"==e?ge({id:t.id,vote:n}):$e({id:t.id,vote:n}))}return{isUpvoted:n,addVote:function(){null!=o&&o.login&&("post"==e?function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"PUT","posts/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return a(!0)})):function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"PUT","comments/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return a(!0)})))},removeVote:function(){null!=o&&o.login&&("post"==e?function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"DELETE","posts/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return a(!1)})):function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"DELETE","comments/"+t+"/your_vote"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(o,t.id).then((function(){return a(!1)})))}}}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e){var t=J(),n=Ne(),r=Ke(e.type,e.content),o=r.isUpvoted,a=r.addVote,i=r.removeVote;var l=o?t.red:t.text;return c.a.createElement(z.a,{onPress:function(){return ie(ae.a.Light),void(null!=n&&n.login?o?i():a():M.a.alert("Login to like","Leave a like when you login to a community"))},hitSlop:7,style:[Ze.root,e.style]},c.a.createElement(Z,{style:Ze.root},c.a.createElement(W.a,{name:o?"heart":"heart-outline",color:l,size:25}),!e.hideCount&&c.a.createElement(Q,{style:Xe(Xe({},Ze.score),{},{color:l})},"  "+e.content.score+"  ")))}var Ze=H.a.create({root:Xe({display:"flex",flexDirection:"row",alignItems:"center"},"web"==I.a.OS?{cursor:"pointer"}:{}),score:{fontSize:18,minWidth:28}}),et=n(167),tt=n.n(et),nt=n(274);function rt(e){var t=J(),n=Object(l.useMemo)((function(){return e.contentHtml||(""===(t=e.contentMarkdown)||void 0===t?void 0:t.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/^\> (.*$)/gim,"<blockquote>$1</blockquote>").replace(/\*\*(.*)\*\*/gim,"<b>$1</b>").replace(/\*(.*)\*/gim,"<i>$1</i>").replace(/!\[(.*?)\]\((.*?)\)/gim,"<img alt='$1' src='$2' />").replace(/\[(.*?)\]\((.*?)\)/gim,"<a href='$2'>$1</a>").replace(/\n$/gim,"<br />").trim())||"<p>"+e.contentText+"</p>";var t}),[e.contentHtml,e.contentMarkdown,e.contentText]);return c.a.createElement(nt.a,{RootComponent:function(e){return c.a.createElement(G.a,e)},value:n.replace(/\n/g,""),renderNode:ot(t),stylesheet:{a:{color:t.secondaryTint},cite:{fontStyle:"italic"},del:{textDecorationLine:"line-through",textDecorationStyle:"solid"},dfn:{fontStyle:"italic"},ins:{textDecorationLine:"underline"},samp:{fontFamily:"ios"===I.a.OS?"Menlo":"monospace"},small:{fontSize:10}},textComponentProps:{style:{color:t.text}},onLinkLongPress:function(e){return M.a.alert("Link",e,void 0,{cancelable:!0})}})}var ot=function(e){return function(t,n,r,o,a){if(["iframe","script"].includes(t.name||""))return null;function i(){return a(t.children,o)}switch(t.name){case"abbr":return c.a.createElement(z.a,{key:n,onPress:function(){return M.a.alert("Abbr.",t.attribs.title)}},c.a.createElement(G.a,{style:{textDecorationLine:"underline",textDecorationStyle:"dotted"}},i()));case"blockquote":return c.a.createElement(G.a,{key:n},c.a.createElement($.a,{style:{padding:10}},c.a.createElement($.a,{style:{borderLeftWidth:2,borderColor:e.secondaryText,paddingLeft:10,paddingVertical:5}},i())),"\n");case"details":return c.a.createElement(at,{key:n},i());case"dl":case"dt":case"dd":return c.a.createElement(G.a,{key:n},i(),"\n");case"figure":return c.a.createElement($.a,{key:n},i());case"hr":return c.a.createElement($.a,{key:n,style:{width:200,alignSelf:"stretch",borderBottomWidth:H.a.hairlineWidth||1,borderColor:e.secondaryText}});case"kbd":return c.a.createElement(G.a,{key:n,style:{backgroundColor:e.tertiaryBackground}}," ",i()," ");case"img":return c.a.createElement(G.a,{key:n},"[Image not displayed]");case"li":return c.a.createElement(G.a,{key:n},"\u2022 ",i(),"\n");case"sub":return c.a.createElement(G.a,{key:n,style:{fontSize:10}},i());case"summary":return c.a.createElement(G.a,{key:n},i());case"sup":return c.a.createElement($.a,{key:n},c.a.createElement(G.a,{style:{fontSize:10}},i()));default:return}}};function at(e){var t=e.children,n=Object(l.useState)(!1),r=d()(n,2),o=r[0],a=r[1],i=J(),s=t.filter((function(e){return""!==e.props.children.toString().trim()})),u=tt()(s),m=u[0],p=u.slice(1);return c.a.createElement($.a,null,c.a.createElement(z.a,{hitSlop:5,onPress:function(){return a((function(e){return!e}))}},c.a.createElement(G.a,{style:{color:i.secondaryTint}},o?c.a.createElement(j.a,{name:"chevron-down-outline"}):c.a.createElement(j.a,{name:"chevron-forward-outline"}),m)),o&&p)}function it(e){var t,n=J(),r=Ne(),o=e.colorize||"never",a=e.showHost||"only_foreign",i=e.userId&&e.userId==(null==r||null==(t=r.login)?void 0:t.user.id)||!1,l=function(e,t){return"always"===e||"never"!==e&&!t},s=l(o,e.local),u=l(a,e.local),d=i?{color:n.secondaryTint}:s?{color:e.local?n.blue:n.green}:{};return c.a.createElement(Q,{style:[lt.root,e.style]},c.a.createElement(Q,{style:[lt.name,d,e.styleName]},e.name),u&&c.a.createElement(Q,{style:[lt.host,{color:n.secondaryText},e.styleHost]},e.newLine&&"\n",!e.newLine&&"@",e.host),i&&c.a.createElement(Q,{style:[lt.host,{color:n.secondaryText},e.styleHost]}," (you)"))}var lt=H.a.create({root:{},name:{fontWeight:"500"},host:{fontWeight:"200"}}),ct=c.a.memo(it);function st(e){var t=Object(le.b)(),n=Ne(),r=Object(le.c)((function(t){return t.posts.posts[e]}));return Object(l.useEffect)((function(){n&&(r||Ie(n,e).then((function(e){t(pe({post:e}))})))}),[null==r?void 0:r.id]),r}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e){var t=st(e.postId),n=Object(l.useState)(1),r=d()(n,2),o=r[0],a=r[1],i=Object(l.useMemo)((function(){return t&&(!!(e=t.href)&&[".png",".jpg",".jpeg",".bmp",".gif",".webp"].some((function(t){return e.endsWith(t)})));var e}),[null==t?void 0:t.href]),s=J();return t?c.a.createElement(Z,null,c.a.createElement(Q,{style:pt.title},t.sticky&&c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,{name:"pin",size:25,color:s.secondaryTint})," "),t.title),t.href&&(i?c.a.createElement(F.a,{style:dt(dt({},pt.image),{},{aspectRatio:o,backgroundColor:s.secondaryBackground}),source:{uri:t.href},onLoad:function(e){return"web"!==I.a.OS&&a(Math.max(e.nativeEvent.source.width/e.nativeEvent.source.height,.5))}}):c.a.createElement(z.a,{style:[pt.link,{backgroundColor:s.secondaryBackground}],onPress:function(){ie(ae.a.Medium),t.href&&Object(R.b)(t.href)}},c.a.createElement(Q,null,t.href))),e.showHtmlContent&&!!t.content_html&&c.a.createElement(Z,{style:{padding:15}},c.a.createElement(rt,{contentHtml:t.content_html,contentText:t.content_text})),e.showAuthor&&c.a.createElement(Z,{style:{display:"flex",flexDirection:"row",alignItems:"center",paddingHorizontal:15,paddingTop:15}},c.a.createElement(Q,{style:pt.by},"by","   "),c.a.createElement(ct,{name:t.author.username,host:t.author.host,local:t.author.local,showHost:"only_foreign",colorize:"always",newLine:!0,userId:t.author.id})),c.a.createElement(Z,{style:pt.foot},c.a.createElement(z.a,{hitSlop:8,onPress:function(){return e.navigation.navigate("Community",{community:t.community})},style:[pt.footItem,pt.pointer,{display:"flex",flexDirection:"row",alignItems:"center"}]},e.showAuthor&&c.a.createElement(Q,{style:pt.by},"in","   "),c.a.createElement(ct,{name:t.community.name,host:t.community.host,local:t.community.local,showHost:"only_foreign",colorize:e.showAuthor?"always":"never",newLine:!0})),c.a.createElement(Z,{style:{flex:1}}),c.a.createElement(Z,{style:pt.footItem},c.a.createElement(ne,{time:t.created})),c.a.createElement(Z,{style:pt.footItem},c.a.createElement(Q,{style:pt.footText},c.a.createElement(j.a,{name:"chatbubble-outline",size:12})," ",t.replies_count_total)),c.a.createElement(Z,{style:pt.footItem},c.a.createElement(Qe,{type:"post",content:t})))):c.a.createElement(Q,null,"Failed to load post")}var pt=H.a.create({item:{marginVertical:0,marginHorizontal:0},pointer:dt({},"web"==I.a.OS?{cursor:"pointer"}:{}),title:{fontSize:20,padding:15},contentText:{fontSize:12},link:dt({paddingVertical:10,paddingHorizontal:15,borderRadius:5,marginHorizontal:15},"web"==I.a.OS?{cursor:"pointer"}:{}),image:{width:"100%",height:void 0,resizeMode:"contain"},foot:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},footText:{},footItem:{padding:15},by:{fontSize:11},score:{fontSize:18},actions:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",padding:10}});function ft(e){var t=Object(le.b)(),n=Ne(),r=Object(l.useState)([]),o=d()(r,2),a=o[0],i=o[1],c=Object(l.useState)(null),s=d()(c,2),u=s[0],m=s[1],f=Object(l.useState)(null),y=d()(f,2),g=y[0],h=y[1],b=Object(l.useState)(0),v=d()(b,2),E=v[0],w=v[1];return Object(l.useEffect)((function(){n&&function(e,t){var n,r,o,a,i=arguments;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:"hot",r=i.length>3?i[3]:void 0,o=i.length>4?i[4]:void 0,a=[null===t?"posts?sort="+n:"posts?page="+t+"&sort="+n,"include_your=true",void 0!==r&&"in_your_follows="+r,o&&"community="+o].filter((function(e){return e})).join("&"),l.abrupt("return",be(e,"GET",a).then((function(e){return e.json()})).then((function(e){return Ce(Ce({},e),{},{items:e.items.map(ze)})})));case 5:case"end":return l.stop()}}),null,null,null,Promise)}(n,u,e.sort,e.inYourFollows,e.communityId).then((function(e){t(fe({posts:e.items})),i((function(t){return[].concat(De()(t),De()(e.items.map((function(e){return e.id}))))})),h(e.next_page)}))}),[u,E]),[a,function(){m(g),h(null)},function(){i([]),m(null),h(null),w((function(e){return e+1}))}]}var yt=n(49),gt=[{name:"Gold&Black",domain:"hoot.goldandblack.xyz"},{name:"Narwhal.City",domain:"narwhal.city"},{name:"FBXL",domain:"lotide.fbxl.net"},{name:"Tide C",domain:"c.tide.tk"},{name:"Exopla",domain:"lotide.exopla.net.eu.org"},{name:"Narwhal.City (Dev)",domain:"dev.narwhal.city"},{name:"Tide B",domain:"b.tide.tk"},{name:"Tide A",domain:"a.tide.tk"}],ht=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.a.setItem("@lotide_ctx",JSON.stringify(e)));case 1:case"end":return t.stop()}}),null,null,null,Promise)},bt=function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.a.getItem("@lotide_ctx").then((function(e){return null!==e?JSON.parse(e):void 0})));case 1:case"end":return e.stop()}}),null,null,null,Promise)},vt=function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.login){n.next=2;break}return n.abrupt("return");case 2:t=e.login.user.username+"@"+e.apiUrl,St.store("@lotide_ctx_arr",t,e);case 4:case"end":return n.stop()}}),null,null,null,Promise)},Et=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",St.query("@lotide_ctx_arr",e));case 1:case"end":return t.stop()}}),null,null,null,Promise)},wt=function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",St.listKeys("@lotide_ctx_arr"));case 1:case"end":return e.stop()}}),null,null,null,Promise)},Ot=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",St.remove("@lotide_ctx_arr",e));case 1:case"end":return t.stop()}}),null,null,null,Promise)},jt=function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.login){n.next=2;break}return n.abrupt("return");case 2:t=e.login.user.username+"@"+e.apiUrl,St.store("@lotide_ctx_arr",t,{apiUrl:e.apiUrl});case 4:case"end":return n.stop()}}),null,null,null,Promise)},xt=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(a.a.getItem("@lotide_ctx_arr"));case 2:return e=t.sent,t.abrupt("return",e?JSON.parse(e):{});case 4:case"end":return t.stop()}}),null,null,null,Promise)},St={store:function(e,t,n){var r,o;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,p.a.awrap(a.a.getItem(e));case 2:return r=i.sent,o=r?JSON.parse(r):{},o[t]=n,i.next=7,p.a.awrap(a.a.setItem(e,JSON.stringify(o)));case 7:case"end":return i.stop()}}),null,null,null,Promise)},query:function(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(a.a.getItem(e));case 2:return n=r.sent,r.abrupt("return",n?JSON.parse(n)[t]:void 0);case 4:case"end":return r.stop()}}),null,null,null,Promise)},listKeys:function(e){var t,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(a.a.getItem(e));case 2:return t=r.sent,n=t?JSON.parse(t):{},r.abrupt("return",Object.keys(n));case 5:case"end":return r.stop()}}),null,null,null,Promise)},remove:function(e,t){var n,r,o;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,p.a.awrap(a.a.getItem(e));case 2:return n=i.sent,r=n?JSON.parse(n):{},o=r[t],delete r[t],i.next=8,p.a.awrap(a.a.setItem(e,JSON.stringify(r)));case 8:return i.abrupt("return",o);case 9:case"end":return i.stop()}}),null,null,null,Promise)}},Pt=Object(ce.b)({name:"lotide",initialState:{ctx:null},reducers:{setCtx:function(e,t){e.ctx=t.payload}}}),Tt=Pt.actions.setCtx,kt=Pt.reducer;function Ct(e){var t=Object(l.useState)(""),n=d()(t,2),r=n[0],o=n[1],a=Object(l.useState)(gt),i=d()(a,2),s=i[0],u=i[1],m=Object(l.useState)([]),p=d()(m,2),f=p[0],y=p[1],g=J(),h=Object(le.b)();Object(l.useEffect)((function(){gt.map((function(e,t){return Te({apiUrl:"https://"+e.domain+"/api/unstable"}).then((function(e){u((function(n){return n.map((function(n,r){return t!==r?n:{name:n.name,domain:n.domain,instanceInfo:e}}))}))})).catch((function(){u((function(e){return e.map((function(e,n){return t!==n?e:{name:e.name,domain:e.domain,instanceInfo:null}}))}))}))}))}),[]),Object(l.useEffect)((function(){xt().then((function(e){return Object.entries(e)})).then(y)}),[]);return c.a.createElement(yt.a,{contentContainerStyle:It.root},c.a.createElement(Q,{style:It.title},"Login to continue"),f.length>0&&c.a.createElement(Q,{style:It.subtitle},"Select an existing profile"),f.map((function(t){var n,r=t[0].split("@"),o=d()(r,2),a=o[0],i=o[1],l=!!t[1].login,s=l?g.text:g.secondaryText,u=i.replace("http://","").replace("https://","").split(/[/?#]/)[0],m=null==(n=gt.find((function(e){return e.domain==u})))?void 0:n.name;return c.a.createElement(z.a,{key:t[0],onPress:function(){l?h(Tt(t[1])):e.onSelect(u.toLowerCase(),void 0,a)},style:{display:"flex",flexDirection:"row",alignItems:"center"}},c.a.createElement(j.a,{name:l?"lock-open-outline":"lock-closed-outline",color:s,style:{marginRight:10},size:20}),c.a.createElement(ct,{name:a,host:u,local:!0,showHost:"always",newLine:!0,style:{paddingVertical:15,paddingBottom:10},styleName:{color:s}}),c.a.createElement(Z,{style:{flex:1}}),c.a.createElement(Q,{style:{fontSize:16,color:s,fontFamily:"ios"===I.a.OS?"Georgia":"serif"}},m))})),c.a.createElement(Q,{style:It.subtitle},f.length>0?"Or sign into a new acount":"Enter a host or select one below"),c.a.createElement(ee,{placeholder:"Host domain",style:{paddingVertical:10,paddingHorizontal:10},value:r,onChangeText:o,onSubmitEditing:function(){return e.onSelect(r.toLowerCase())},keyboardType:"url",returnKeyType:"next"}),s.filter((function(e){return""===r||e.domain.includes(r.toLowerCase())||e.name.toLowerCase().includes(r.toLowerCase())})).map((function(t){return c.a.createElement(Z,{key:t.domain},function(t){var n,r=t.item,o=((null==(n=r.instanceInfo)?void 0:n.apiVersion)||0)>8,a=o?g.text:g.secondaryText;return c.a.createElement(Z,{style:{borderBottomWidth:H.a.hairlineWidth||1,borderColor:g.secondaryText,paddingVertical:25}},c.a.createElement(z.a,{onPress:function(){return o&&e.onSelect(r.domain,r.name)}},c.a.createElement(ct,{name:r.name,host:r.domain,local:!1,newLine:!0,styleName:{fontSize:24,fontWeight:"300",fontFamily:"ios"===I.a.OS?"Georgia":"serif",color:a}}),r.instanceInfo?c.a.createElement(c.a.Fragment,null,c.a.createElement(Q,{style:{color:g.secondaryText}},r.instanceInfo.software.name," ",r.instanceInfo.software.version,!o&&" - Out of date"),!!r.instanceInfo.description&&c.a.createElement(Q,{style:{color:a}},r.instanceInfo.description)):null===r.instanceInfo?c.a.createElement(Q,{style:{color:a}},"Failed to load info"):c.a.createElement(Q,{style:{color:a}},"Loading...")))}({item:t}))})))}var It=H.a.create({root:{padding:20},title:{fontSize:24,marginBottom:10,textAlign:"center"},subtitle:{fontWeight:"300",marginBottom:10,marginTop:15,textAlign:"center"}}),zt=n(38),_t=n(46),Dt=n(66),Lt=n(30);function Bt(e){var t=Object(l.useState)(!1),n=d()(t,2),r=n[0],o=n[1],a=Object(l.useState)(e.username||""),i=d()(a,2),s=i[0],u=i[1],m=Object(l.useState)(""),f=d()(m,2),y=f[0],g=f[1],h=Object(l.useState)(""),b=d()(h,2),v=b[0],E=b[1],w=Object(l.useRef)(null),O=Object(l.useRef)(null),j=J(),x=Object(le.b)(),S=Object(Lt.q)();function P(e){M.a.alert("Failed to submit",e)}function T(){return s?y?v?void function(e,t,n,r){return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",be({apiUrl:e},"POST","users",{username:t,password:n,email_address:r,login:!0},!0).then((function(e){return e.json()})));case 1:case"end":return o.stop()}}),null,null,null,Promise)}("https://"+e.domain+"/api/unstable",s,y,v).then((function(t){x(Tt({apiUrl:"https://"+e.domain+"/api/unstable",login:t}))})).catch((function(e){M.a.alert("Failed to register",e),console.error(e)})):P("Please enter an email address"):P("Enter a password"):P("Please enter a username")}function k(){return s?y?void function(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",be({apiUrl:e},"POST","logins",{username:t,password:n},!0).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}("https://"+e.domain+"/api/unstable",s,y).then((function(t){x(Tt({apiUrl:"https://"+e.domain+"/api/unstable",login:t}))})).catch((function(e){M.a.alert("Failed to login",e),console.error(e)})):P("Enter a password"):P("Please enter a username")}function C(){r?T():k()}return c.a.createElement(z.a,{style:{flex:1},onPress:function(){return"web"!==I.a.OS&&_t.a.dismiss()}},c.a.createElement(Dt.a,{style:Rt.root,behavior:"padding"},e.hostName?c.a.createElement(z.a,{style:{alignItems:"center"}},c.a.createElement(Q,{style:Rt.name},e.hostName),c.a.createElement(Q,{style:[Rt.domain,{color:j.secondaryText}]},e.domain)):c.a.createElement(z.a,null,c.a.createElement(Q,{style:{fontSize:24}},e.domain)),c.a.createElement(z.a,{hitSlop:5,onPress:function(){return o((function(e){return!e}))}},c.a.createElement(Q,{style:[Rt.loginRegister,{color:j.secondaryText}]},c.a.createElement(Q,{style:{color:r?j.secondaryText:j.secondaryTint}},"Login")," | ",c.a.createElement(Q,{style:{color:r?j.secondaryTint:j.secondaryText}},"Register"))),r&&c.a.createElement(ee,{style:Rt.input,placeholder:"Email Address",value:v,onChangeText:E,keyboardType:"email-address",textContentType:"emailAddress",autoCompleteType:"email",returnKeyType:"next",onSubmitEditing:function(){var e;return null==(e=w.current)?void 0:e.focus()}}),c.a.createElement(ee,{ref:w,style:Rt.input,placeholder:"Username",value:s,onChangeText:u,keyboardType:"ascii-capable",textContentType:"username",autoCompleteType:"username",returnKeyType:"next",onSubmitEditing:function(){var e;return null==(e=O.current)?void 0:e.focus()}}),c.a.createElement(ee,{ref:O,style:Rt.input,placeholder:"Password",value:y,onChangeText:g,secureTextEntry:!0,textContentType:r?"newPassword":"password",autoCompleteType:"password",returnKeyType:"done",onSubmitEditing:C}),!r&&c.a.createElement(z.a,{style:{padding:15},onPress:function(){return S.navigate("ForgotPassword",{node:e.domain})}},c.a.createElement(Q,{secondary:!0},"Forgot Password")),c.a.createElement(Z,{style:Rt.actionButtons},c.a.createElement(zt.a,{title:"Change Host",onPress:e.onGoBack,color:j.secondaryTint}),c.a.createElement(zt.a,{title:r?"Register":"Login",onPress:C,color:j.tint}))))}var Rt=H.a.create({root:{flex:1,alignItems:"center",justifyContent:"center",padding:35},name:{fontSize:50,fontFamily:"ios"===I.a.OS?"Georgia":"serif"},domain:{fontWeight:"300"},loginRegister:{padding:15},input:{width:"100%",marginVertical:5,paddingHorizontal:20,paddingVertical:10},actionButtons:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around"}});function Vt(){var e=Object(l.useState)(),t=d()(e,2),n=t[0],r=t[1],o=Object(l.useState)(),a=d()(o,2),i=a[0],s=a[1],u=Object(l.useState)(),m=d()(u,2),p=m[0],f=m[1];return c.a.createElement(Z,{style:Ht.root},i?c.a.createElement(Bt,{hostName:n,domain:i,username:p,onGoBack:function(){return s(void 0)}}):c.a.createElement(Ct,{onSelect:function(e,t,n){r(t),s(e),f(n)}}))}var Ht=H.a.create({root:{width:"100%",height:"100%"},container:{flex:1,alignItems:"center",justifyContent:"center"},input:{width:"100%",marginBottom:20,paddingHorizontal:20,paddingVertical:10},actionButtons:{display:"flex",flexDirection:"row",justifyContent:"space-around",width:"100%"}});function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wt(e){if("ios"!==I.a.OS)return c.a.createElement($.a,{style:e.style},e.children);var t=e.distanceToActivate||60,n=Object(l.useState)(!1),r=d()(n,2),o=r[0],a=r[1],i=Object(l.useState)(0),s=d()(i,2),u=s[0],m=s[1],p=Object(l.useState)(!1),f=d()(p,2),y=f[0],g=f[1],h=Object(l.useState)(!1),b=d()(h,2),v=b[0],E=b[1],w=Object(l.useState)(!1),O=d()(w,2),x=O[0],S=O[1],P=Object(_.a)(),T=Object(l.useState)(P.width),k=d()(T,2),C=k[0],z=k[1],D=Object(l.useRef)(null);return Object(l.useEffect)((function(){u<0&&!y?(ie(ae.a.Light),g(!0)):u>=0&&y&&(g(!1),o||(S(!0),e.onLeftSide())),u>=2*t&&!v?(ie(ae.a.Light),E(!0)):u<2*t&&v&&(E(!1),o||(S(!0),e.onRightSide())),u==t&&(null==e.onReturnToCenter||e.onReturnToCenter(),E(!1),g(!1),S(!1))}),[u]),c.a.createElement($.a,{onLayout:function(e){return z(e.nativeEvent.layout.width)},style:{width:"100%"}},c.a.createElement(yt.a,{ref:D,horizontal:!0,snapToOffsets:[t,t+C],snapToStart:!1,snapToEnd:!1,onScrollBeginDrag:function(){return a(!0)},onScrollEndDrag:function(){var e;null==(e=D.current)||e.scrollTo({x:t}),a(!1)},contentOffset:{x:t,y:0},onScroll:function(e){var t,n,r=null==e||null==(t=e.nativeEvent)||null==(n=t.contentOffset)?void 0:n.x;m(r)},scrollEventThrottle:100,showsHorizontalScrollIndicator:!1,style:Ft({backgroundColor:e.backgroundColor},e.style),overScrollMode:"always"},c.a.createElement($.a,{style:{width:t,display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(j.a,{name:e.iconLeftSide[+y||+x],color:e.colorLeftSide,size:25})),c.a.createElement($.a,{style:{width:C}},e.children),c.a.createElement($.a,{style:{width:t,display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(j.a,{name:e.iconRightSide[+v||+x],color:e.colorRightSide,size:25}))))}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(e){e.navigation;var t=e.route.params.sort,n=Ne(),r=ft({sort:t,inYourFollows:!0}),o=d()(r,3),a=o[0],i=o[1],l=o[2];if(null==n||!n.login)return c.a.createElement(Vt,null);return c.a.createElement(Z,{style:Gt.container},c.a.createElement(N.a,{data:a,renderItem:function(e){var t=e.item;return c.a.createElement($t,{postId:t})},keyExtractor:function(e,t){return e+"-"+t},refreshing:0==a.length,onRefresh:l,onEndReachedThreshold:2,onEndReached:i}))}var Gt=H.a.create({container:{flex:1},item:{marginVertical:0,marginHorizontal:0,borderBottomWidth:8},title:{fontSize:20,padding:15,color:"#eee"},contentText:{fontSize:12},link:{paddingVertical:10,paddingHorizontal:15,backgroundColor:"#8884",borderRadius:5,marginHorizontal:15},image:{width:"100%",height:void 0,resizeMode:"contain"},foot:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",padding:15},footText:{color:"#ccc"},by:{fontSize:11},score:{fontSize:18,color:"#bbb"}}),$t=function(e){var t=e.postId,n=Object(le.c)((function(e){return e.posts.posts[t]})),r=Ke("post",n),o=r.isUpvoted,a=r.addVote,i=r.removeVote,s=Object(l.useState)(!1),u=d()(s,2),m=u[0],p=u[1],f=J(),y=Object(Lt.q)();return c.a.createElement(Wt,{iconLeftSide:o!==m?["heart-dislike","heart-dislike-outline"]:["heart-outline","heart"],iconRightSide:["arrow-undo-outline","arrow-undo"],colorLeftSide:f.red,colorRightSide:f.blue,onLeftSide:function(){o?i():a(),p(!0)},onRightSide:function(){y.navigate("Reply",{id:n.id,title:n.title,html:n.content_html,type:"post"})},onReturnToCenter:function(){return p(!1)},backgroundColor:f.secondaryBackground,style:{borderBottomWidth:8,borderColor:f.secondaryBackground}},c.a.createElement(z.a,{style:Ut({width:"100%"},"web"==I.a.OS?{cursor:"pointer"}:{}),onPress:function(){return y.navigate("Post",{postId:t})},onLongPress:function(){ie(ae.a.Heavy),console.log(n)}},c.a.createElement(Z,{style:[]},c.a.createElement(mt,{postId:t,navigation:y}))))};function qt(e){var t,n=Object(l.useState)(),r=d()(n,2),o=r[0],a=r[1],i=Object(l.useState)(""),s=d()(i,2),u=s[0],m=s[1],p=Ne(),f=J(),y=e.onlyWhenTyping&&""===u?[]:o?""===u?o.items:o.items.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())})):[];Object(l.useEffect)((function(){p&&Ee(p,!1).then(a)}),[null==p||null==(t=p.login)?void 0:t.token,e.focusId]);return c.a.createElement(N.a,{data:y,renderItem:function(t){var n,r,o,a=t.item;return c.a.createElement(z.a,{onPress:function(){return e.onSelect(a)},style:[Jt.item,{borderColor:f.tertiaryBackground}]},c.a.createElement($.a,{style:{flex:1,flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},c.a.createElement(ct,{name:a.name,host:a.host,local:a.local,colorize:"always",newLine:!0}),c.a.createElement($.a,{style:{display:"flex",flexDirection:"row"}},a.you_are_moderator&&c.a.createElement(j.a,{name:"shield-outline",size:20,color:f.secondaryTint}),(null==(n=a.your_follow)?void 0:n.accepted)&&c.a.createElement(j.a,{name:"checkmark",size:20,color:f.secondaryTint,style:{marginLeft:5}}))),!!a.description&&a.description.length>0&&c.a.createElement(G.a,{style:{color:f.secondaryText,marginTop:10}},null==(r=a.description)?void 0:r.substring(0,120),((null==(o=a.description)?void 0:o.length)||0)>120&&"..."))},keyExtractor:function(e,t){return e.id+"-"+t},contentContainerStyle:Jt.list,stickyHeaderIndices:[0],ListHeaderComponent:c.a.createElement($.a,{style:{backgroundColor:f.background,padding:15}},c.a.createElement(q.a,{placeholder:e.placeholder||"Filter communities",placeholderTextColor:f.placeholderText,value:u,onChangeText:m,style:[Jt.input,{color:f.text}]}))})}var Jt=H.a.create({input:{marginHorizontal:25,paddingVertical:10},list:{paddingBottom:50},item:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch",paddingVertical:10,borderTopWidth:H.a.hairlineWidth||1,paddingHorizontal:20,marginHorizontal:20}});function Kt(e){var t=e.navigation,n=Object(l.useState)(0),r=d()(n,2),o=r[0],a=r[1],i=Ne();return Object(l.useEffect)((function(){return t.addListener("focus",(function(){return a((function(e){return e+1}))}))}),[]),null!=i&&i.login?c.a.createElement(qt,{onSelect:function(e){return t.navigate("Community",{community:e})},focusId:o}):c.a.createElement(Vt,null)}function Yt(e){var t,n,r,o=e.navigation,a=Object(l.useState)(),i=d()(a,2),s=i[0],u=i[1],m=Object(l.useState)([]),p=d()(m,2),f=p[0],y=p[1],g=Object(l.useState)([]),h=d()(g,2),b=h[0],v=h[1],E=Object(l.useState)(!1),w=d()(E,2),O=w[0],x=w[1],S=Object(l.useState)(0),P=d()(S,2),T=P[0],k=P[1],C=J(),_=Ne(),D=Object(le.b)();if(Object(l.useEffect)((function(){return o.addListener("focus",(function(){return k((function(e){return e+1}))}))}),[]),Object(l.useEffect)((function(){null!=_&&_.login&&Ee(_,!0).then((function(e){return v(e.items)}))}),[null==_||null==(t=_.login)?void 0:t.user.id,T]),Object(l.useEffect)((function(){var e;void 0!==(null==_?void 0:_.login)&&void 0!==_.login.user&&Oe(_,(null==(e=_.login)?void 0:e.user.id)||0).then(u)}),[null==_||null==(n=_.login)?void 0:n.token,T]),Object(l.useEffect)((function(){wt().then((function(e){return y(e)}))}),[_,T]),void 0===(null==_?void 0:_.login))return c.a.createElement(Vt,null);return c.a.createElement(yt.a,{style:[Xt.container,{backgroundColor:C.background}]},c.a.createElement(Z,{style:Xt.header},c.a.createElement(Z,null,c.a.createElement(z.a,{hitSlop:10,onPress:function(){return x((function(e){return!e}))}},c.a.createElement(Q,{style:Xt.title},(null==s?void 0:s.username)||_.login.user.username,"  ",c.a.createElement(j.a,{name:"pencil-outline",size:20,color:C.secondaryText}))),c.a.createElement(Q,{style:{color:C.secondaryText}},null==s?void 0:s.host),!(null==s||!s.avatar)&&c.a.createElement(Q,null,null==s||null==(r=s.avatar)?void 0:r.url),!(null==s||!s.description)&&c.a.createElement(Q,null,null==s?void 0:s.description)),c.a.createElement(zt.a,{onPress:function(){var e;null!=_&&_.login&&("web"!==I.a.OS?M.a.alert("Log out","Would you like to keep the login profile handy for later?",[{text:"Cancel",style:"cancel"},{text:"Remove",onPress:function(){var e;Ot((null==(e=_.login)?void 0:e.user.username)+"@"+_.apiUrl).then((function(){return He(_)})).then((function(){return D(Tt({}))}))}},{text:"Keep",style:"default",onPress:function(){jt(_),D(Tt({}))}}],{cancelable:!0}):Ot((null==(e=_.login)?void 0:e.user.username)+"@"+_.apiUrl).then((function(){return He(_)})).then((function(){return D(Tt({}))})))},title:"Log Out",color:C.secondaryTint,accessibilityLabel:"Log out of the Hoot network"})),O&&c.a.createElement(Z,{style:Xt.editView},c.a.createElement(ee,{style:Xt.editViewText,placeholder:"New email"}),c.a.createElement(ee,{style:Xt.editViewText,placeholder:"User bio",multiline:!0}),c.a.createElement(ee,{style:Xt.editViewText,placeholder:"New password"}),c.a.createElement(ee,{style:Xt.editViewText,placeholder:"Confirm new password"}),c.a.createElement(Z,{style:Xt.editViewActionButtons},c.a.createElement(zt.a,{onPress:function(){return x(!1)},title:"Cancel",color:C.secondaryTint,accessibilityLabel:"Add profile"}),c.a.createElement(zt.a,{onPress:function(){return M.a.alert("unimplemented")},title:"Submit",color:C.tint,accessibilityLabel:"Add profile"}))),c.a.createElement(Z,{style:Xt.buttonView},c.a.createElement(zt.a,{onPress:function(){return D(Tt({}))},title:"Add Profile",color:C.tint,accessibilityLabel:"Add profile"})),f.map((function(e){return[e].concat(De()(e.split("@")))})).map((function(e){return[e[0],e[1],e[2].replace("http://","").replace("https://","").split(/[/?#]/)[0]]})).map((function(e){return c.a.createElement(z.a,{key:e[0],style:[Xt.altProfileButton,{borderColor:C.secondaryBackground}],onPress:function(){Et(e[0]).then((function(e){void 0!==e&&(D(Tt(e)),ht(e),x(!1))}))}},c.a.createElement(ct,{name:e[1],host:e[2],local:!0,showHost:"always",colorize:"never",newLine:!0}))})),c.a.createElement(Z,{style:[Xt.buttonView,{paddingTop:10}]},c.a.createElement(zt.a,{onPress:function(){return o.navigate("NewCommunity")},title:"Create Community",color:C.tint,accessibilityLabel:"Create a new community"})),c.a.createElement(Q,{style:Xt.followingTitle},"Communities You Follow:"),b.map((function(e){return c.a.createElement(Z,{key:e.id,style:[Xt.altProfileButton,{borderColor:C.secondaryBackground}]},c.a.createElement(ct,{name:e.name,host:e.host,local:e.local,showHost:"always",colorize:"always",newLine:!0}))})))}var Xt=H.a.create({container:{height:"100%"},header:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",padding:20},title:{fontSize:20,fontWeight:"bold"},followingTitle:{fontSize:18,fontWeight:"500",padding:20},editView:{margin:20},editViewText:{marginBottom:15,paddingVertical:10,paddingHorizontal:15},editViewActionButtons:{display:"flex",flexDirection:"row",justifyContent:"space-around"},buttonView:{display:"flex",alignItems:"center"},separator:{marginVertical:30,height:1,width:"80%"},inputContainer:{width:"100%",padding:20},input:{height:40,borderWidth:1,paddingVertical:10,paddingHorizontal:20,width:"100%",borderRadius:8},altProfileButton:{marginHorizontal:20,paddingVertical:15,borderBottomWidth:1}}),Qt=n(153);function Zt(e){var t,n=e.navigation,r=e.route,o=Object(le.b)(),a=Object(l.useState)(r.params.community),i=d()(a,2),s=i[0],u=i[1],m=Object(l.useState)(""),f=d()(m,2),y=f[0],g=f[1],h=Object(l.useState)(""),b=d()(h,2),v=b[0],E=b[1],w=Object(l.useState)(""),O=d()(w,2),j=O[0],x=O[1],S=J(),P=Ne();if(Object(l.useEffect)((function(){return n.addListener("focus",(function(){return r.params.community?u(r.params.community):null===s?u(void 0):void 0}))}),[s,null==s?void 0:s.id,null==(t=r.params.community)?void 0:t.id]),null==P||!P.login)return c.a.createElement(Vt,null);if(null===s)return c.a.createElement(qt,{onSelect:u,onlyWhenTyping:!0});return c.a.createElement(Dt.a,{style:{width:"100%",height:"100%"}},c.a.createElement(Qt.a,{onPress:function(){return"web"!==I.a.OS&&_t.a.dismiss()}},c.a.createElement(Z,{style:en.container},c.a.createElement(z.a,{onPress:function(){return u(null)}},s?c.a.createElement(ct,{name:s.name,host:s.host,local:s.local,colorize:"always",showHost:"always",newLine:!0,style:en.input}):c.a.createElement(Q,{style:[en.input,{color:S.secondaryText}]},"Select a Community")),c.a.createElement(q.a,{style:[en.input,en.title,{color:S.text}],placeholder:"Add a Title",placeholderTextColor:S.placeholderText,value:y,onChangeText:g}),y.length>=4?c.a.createElement(c.a.Fragment,null,c.a.createElement(q.a,{style:[en.input,{color:S.text}],placeholder:"Link",placeholderTextColor:S.placeholderText,value:v,onChangeText:E,keyboardType:"url",textContentType:"URL"}),c.a.createElement(ee,{style:{marginVertical:20,minHeight:100},multiline:!0,placeholder:"Add post content",value:j,onChangeText:x})):c.a.createElement(Q,{style:{color:S.secondaryText}},y.length>0&&4-y.length),!!s&&y.length>=4&&c.a.createElement(zt.a,{onPress:function(){P&&s&&function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"POST","posts",t).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(P,{community:s.id,title:y,href:v||void 0,content_markdown:j||" "}).then((function(e){Ie(P,e.id).then((function(e){u(void 0),g(""),E(""),x(""),o(pe({post:e})),n.navigate("Post",{postId:e.id})}))})).catch((function(e){return M.a.alert("Could not submit post",e)}))},title:"Submit",color:S.tint,accessibilityLabel:"Submit new post"}))))}var en=H.a.create({container:{flex:1,alignItems:"stretch",padding:15,height:"100%",width:"100%"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},inputContainer:{width:"100%",padding:20},input:{paddingVertical:10,width:"100%",borderRadius:8},item:{paddingHorizontal:20,paddingVertical:10,marginHorizontal:20,marginBottom:1}});function tn(){return c.a.createElement(Z,null,c.a.createElement(Q,null,"Settings screen. It'll be implemented eventually."))}function nn(e){var t=e.route,n=Object(l.useState)(t.params.community),r=d()(n,2),o=r[0],a=r[1],i=ft({sort:"hot",communityId:o.id}),s=d()(i,3),u=s[0],m=s[1],p=s[2],f=Object(l.useState)(0),y=d()(f,2),g=y[0],h=y[1],b=J(),v=Ne();Object(l.useEffect)((function(){v&&we(v,o.id).then(a)}),[null==v?void 0:v.apiUrl,t.params.community.id,t.params.community.description,g]);return c.a.createElement(Z,{style:[rn.root,{backgroundColor:b.background}]},c.a.createElement(N.a,{data:u,renderItem:function(e){var t=e.item;return c.a.createElement(on,{postId:t})},ListHeaderComponent:c.a.createElement(an,{community:o,setReloadId:h}),keyExtractor:function(e,t){return e+"-"+t},refreshing:0==u.length,onRefresh:p,onEndReachedThreshold:2,onEndReached:m}))}var rn=H.a.create({root:{height:"100%"},header:{padding:20,paddingVertical:15,borderBottomWidth:H.a.hairlineWidth||1},title:{fontSize:20},description:{marginTop:10},buttons:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-around",alignItems:"center"},item:{marginVertical:0,marginHorizontal:0,borderBottomWidth:8}}),on=function(e){var t=e.postId,n=J(),r=Object(Lt.q)();return c.a.createElement(z.a,{onPress:function(){return r.navigate("Post",{postId:t})},onLongPress:function(){ie(ae.a.Heavy)}},c.a.createElement(Z,{style:[rn.item,{borderBottomColor:n.secondaryBackground}]},c.a.createElement(mt,{postId:t,navigation:r})))},an=c.a.memo((function(e){var t,n=J(),r=Object(Lt.q)(),o=e.community,a=e.setReloadId,i=Ne(),l=(null==(t=o.your_follow)?void 0:t.accepted)||!1;return c.a.createElement(Z,{style:[rn.header,{borderBottomColor:n.tertiaryBackground}]},c.a.createElement(Z,null,c.a.createElement(it,{name:o.name,host:o.host,local:o.local,newLine:!0,colorize:"always",showHost:"always",styleName:[rn.title]}),""!==o.description&&c.a.createElement(Q,{style:rn.description},o.description)),!!i&&c.a.createElement(Z,{style:[rn.buttons]},c.a.createElement(zt.a,{onPress:function(){return r.navigate("NewPostScreen",{community:o})},title:"Post",color:n.tint,accessibilityLabel:"Post to this community"}),o.you_are_moderator&&c.a.createElement(zt.a,{onPress:function(){return r.navigate("EditCommunity",{community:o})},title:"Edit",color:n.tint,accessibilityLabel:"Edit your community community"}),l?c.a.createElement(zt.a,{onPress:function(){i&&function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"POST","communities/"+t+"/unfollow"));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(i,o.id).then((function(){a((function(e){return e+1}))}))},title:"Unfollow",color:n.secondaryTint,accessibilityLabel:"Stop seeing posts from this community"}):c.a.createElement(zt.a,{onPress:function(){i&&je(i,o.id).then((function(e){!1===e.accepted&&M.a.alert("Follow request rejected.","This could be an issue with the node you are connected to."),a((function(e){return e+1}))}))},title:"Follow",color:n.tint,accessibilityLabel:"See posts from this community in your feed"})))})),ln=n(100);function cn(e){var t=e.navigation,n=e.route,r=Object(l.useState)(""),o=d()(r,2),a=o[0],i=o[1],s=Object(l.useRef)(null),u=J(),m=Ne(),f=n.params.id,y=n.params.title,g=n.params.html,h=n.params.type;return c.a.createElement(Dt.a,{behavior:"ios"===I.a.OS?"padding":"height"},c.a.createElement(ln.b,{ref:s},c.a.createElement(z.a,{style:sn.root,onPress:function(){return"web"!==I.a.OS&&_t.a.dismiss()}},c.a.createElement(Q,null,"Reply to ",h),!!y&&c.a.createElement(Q,{style:sn.title},y),!!g&&c.a.createElement(rt,{contentHtml:g}),c.a.createElement(ee,{style:sn.input,multiline:!0,placeholder:"Type your reply",value:a,onChangeText:i,onFocus:function(){s.current&&s.current.scrollToEnd({animated:!0})}}),c.a.createElement(zt.a,{title:"Submit",color:u.tint,onPress:function(){null!=m&&m.login&&("post"===h?function(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",be(e,"POST","posts/"+t+"/replies",{content_markdown:n}).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}(m,f,a).then((function(){return t.pop()})):function(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",be(e,"POST","comments/"+t+"/replies",{content_markdown:n}).then((function(e){return e.json()})));case 1:case"end":return r.stop()}}),null,null,null,Promise)}(m,f,a).then((function(){return t.pop()})))}}))))}var sn=H.a.create({root:{padding:20,paddingBottom:100},title:{fontSize:20,marginVertical:10},input:{marginVertical:20,minHeight:100}}),un=n(53),dn=n(150);function mn(e,t){var n=Object(le.b)(),r=Object(le.c)((function(n){var r,o;return"post"==e?null==(r=n.posts.posts[t])?void 0:r.replies:null==(o=n.replies.replies[t])?void 0:o.replies})),o=Ne();function a(){if(o&&(!r||null!==r.next_page))switch(e){case"post":(function(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",be(e,"GET","posts/"+t+"/replies?limit=10&include_your=true"+(n?"&page="+n:"")).then((function(e){return e.json()})).then(Ve));case 1:case"end":return r.stop()}}),null,null,null,Promise)})(o,t,(null==r?void 0:r.next_page)||void 0).then((function(e){var o,a;n(Ae({replies:e[1]})),n(ye({id:t,post:{replies:{items:[].concat(De()((null==r?void 0:r.items)||[]),De()((null==(o=e[0])?void 0:o.items)||[])),next_page:(null==(a=e[0])?void 0:a.next_page)||null}}}))}));break;case"reply":(function(e,t,n){return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",be(e,"GET","comments/"+t+"/replies?limit=10&include_your=true&sort=hot"+(n?"&page="+n:"")).then((function(e){return e.json()})).then(Ve));case 1:case"end":return r.stop()}}),null,null,null,Promise)})(o,t,(null==r?void 0:r.next_page)||void 0).then((function(e){var o,a;n(Ae({replies:e[1]})),n(Ge({id:t,reply:{replies:{items:[].concat(De()((null==r?void 0:r.items)||[]),De()((null==(o=e[0])?void 0:o.items)||[])),next_page:(null==(a=e[0])?void 0:a.next_page)||null}}}))}))}}return Object(l.useEffect)((function(){r||"post"!=e||a()}),[!!r]),{replies:r,loadNextPage:a}}function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yn(e){var t=Object(le.b)(),n=Object(le.c)((function(t){return e?t.replies.replies[e]:void 0})),r=Ne();return Object(l.useEffect)((function(){r&&e&&(n||function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"GET","comments/"+t,void 0,!0).then((function(e){return e.json()})).then(Re));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(r,e).then((function(e){t(Ae({replies:e}))})).catch((function(){return console.log("Reply "+e+" could not be loaded")})))}),[null==n?void 0:n.id]),n&&fn(fn({},n),{},{replies:void 0})}function gn(e){var t=e.parentType,n=e.parentId,r=e.navigation,o=e.layer,a=void 0===o?0:o,i=e.postId,l=e.highlightedReplies,s=void 0===l?[]:l,u=mn(t,n),d=u.replies,m=u.loadNextPage,p=J();if(!Ne())return null;var f=[p.text,p.red,p.orange,p.yellow,p.green,p.teal,p.blue,p.indigo,p.purple];return d?c.a.createElement($.a,null,d.items.map((function(e){return c.a.createElement(hn,{replyId:e,layer:a,key:e,navigation:r,layerColors:f,postId:i,highlightedReplies:s})})),null!==d.next_page&&c.a.createElement(z.a,{hitSlop:5,onPress:m},c.a.createElement(Q,{style:{color:p.tint,paddingTop:5,paddingBottom:10}},"More replies ",c.a.createElement(j.a,{name:"chevron-down-outline"}))),null===d.next_page&&0===a&&c.a.createElement(Q,{style:{margin:17,color:p.secondaryText}},d.items.length>0?"No more replies":"No replies yet")):c.a.createElement(Q,null,"Can't find replies")}function hn(e){var t,n=e.replyId,r=e.layer,o=void 0===r?0:r,a=e.navigation,i=e.layerColors,l=e.postId,s=e.highlightedReplies,u=void 0===s?[]:s,m=yn(n),p=mn("reply",n),f=p.replies,y=p.loadNextPage,g=c.a.useState(!0),h=d()(g,2),b=h[0],v=h[1],E=J(),w=Ne(),O=function(){var e=Object(le.b)();return[Object(le.c)((function(e){return e.replies.selectedReply})),function(t){e(qe(t))}]}(),x=d()(O,2),S=x[0],P=x[1];return w?m?c.a.createElement($.a,{style:{paddingLeft:0}},c.a.createElement($.a,{style:{paddingVertical:8,borderTopWidth:.5,borderTopColor:E.secondaryBackground}},c.a.createElement(z.a,{onPress:function(){return P(S!=m.id?m.id:void 0)}},c.a.createElement($.a,{style:{borderLeftWidth:2,borderColor:i[o%i.length],paddingLeft:15,paddingVertical:3,backgroundColor:u.includes(m.id)?E.secondaryBackground:E.background}},c.a.createElement($.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap",marginBottom:5}},c.a.createElement(ct,{name:m.author.username,host:m.author.host,local:m.author.local,showHost:"only_foreign",colorize:"only_foreign",style:{fontSize:16,fontWeight:"500"},userId:m.author.id}),c.a.createElement($.a,{style:{marginRight:15,display:"flex",flexDirection:"row",alignItems:"center"}},c.a.createElement(Q,null,!b&&"...    "),c.a.createElement(j.a,{name:m.your_vote?"heart":"heart-outline",size:14,color:E.text,light:!0}),c.a.createElement(Q,null," "+m.score+"   "),c.a.createElement(ne,{time:m.created}))),b&&!!m.content_html&&c.a.createElement(rt,{contentHtml:m.content_html,contentText:m.content_text})),S==m.id&&c.a.createElement($.a,{style:bn.buttons},c.a.createElement(Qe,{type:"reply",content:m,hideCount:!0,style:bn.button}),c.a.createElement(z.a,{style:bn.button,onPress:function(){ie(ae.a.Medium),a.navigate("Reply",{id:m.id,title:m.author.username,html:m.content_html,type:"reply"})}},c.a.createElement(j.a,{color:E.text,size:20,name:"arrow-undo-outline"})),c.a.createElement(z.a,{style:bn.button,onPress:function(){v((function(e){return!e}))}},c.a.createElement(j.a,{color:((null==(t=m.replies)?void 0:t.items.length)||0)>0?E.text:E.secondaryText,size:20,name:b?"chevron-up-outline":"chevron-down-outline"}))))),f&&f.items.length>0&&(b?c.a.createElement($.a,{style:{paddingLeft:15}},c.a.createElement(gn,{parentType:"reply",parentId:n,layer:o+1,navigation:a,postId:l,highlightedReplies:u})):c.a.createElement(Q,null,"...")),void 0==f&&c.a.createElement(z.a,{hitSlop:5,onPress:y},c.a.createElement($.a,{style:{paddingHorizontal:15,paddingBottom:10}},c.a.createElement(Q,{style:{color:E.tint}},"More replies ",c.a.createElement(j.a,{name:"chevron-forward-outline"}))))):c.a.createElement(Q,null,"Failed to load reply"):null}var bn=H.a.create({buttons:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",paddingHorizontal:15},button:{padding:10,paddingHorizontal:15}});function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e){var t=e.navigation,n=e.route,r=st(n.params.postId),o=Object(l.useState)(n.params.highlightedReplies),a=d()(o,2),i=a[0],s=a[1],u=J();return r?c.a.createElement(yt.a,null,c.a.createElement(Z,{style:En(En({},On.item),{},{backgroundColor:u.background})},c.a.createElement(mt,{postId:r.id,navigation:t,showHtmlContent:!0,showAuthor:!0}),c.a.createElement(Z,{style:On.actions},c.a.createElement(j.a,{name:"bookmark-outline",size:25,color:u.text}),c.a.createElement(z.a,{hitSlop:5,onPress:function(){ie(ae.a.Medium),t.navigate("Reply",{id:r.id,title:r.title,html:r.content_html,type:"post"})}},c.a.createElement(j.a,{name:"arrow-undo-outline",size:25,color:u.text})),c.a.createElement(z.a,{hitSlop:5,onPress:function(){ie(ae.a.Medium),dn.a.share({message:r.title,url:"https://dev.goldandblack.xyz/p/posts/"+r.id,title:"Hoot"})}},c.a.createElement(j.a,{name:"share-outline",size:25,color:u.text}))),i&&c.a.createElement(z.a,{onPress:function(){return s(void 0)}},c.a.createElement(Q,{style:{color:u.tint,paddingVertical:10}},"Show all replies")),c.a.createElement(gn,{parentType:"post",parentId:r.id,navigation:t,postId:r.id,highlightedReplies:i}),c.a.createElement(Z,{style:{height:300}}))):c.a.createElement(Q,null,"No post")}var On=H.a.create({container:{flex:1,marginTop:un.a.currentHeight||0},item:{marginVertical:0,marginHorizontal:0},title:{fontSize:20,padding:15},contentText:{fontSize:12},link:{paddingVertical:10,paddingHorizontal:15,backgroundColor:"#8884",borderRadius:5,marginHorizontal:15},image:{width:"100%",height:void 0,resizeMode:"contain"},foot:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",padding:15,borderBottomColor:"#8884",borderBottomWidth:2},by:{fontSize:11},actions:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",padding:10}}),jn=n(104);function xn(e){var t=e.navigation;return l.createElement($.a,{style:Sn.container},l.createElement(G.a,{style:Sn.title},"This screen doesn't exist."),l.createElement(jn.a,{onPress:function(){return t.replace("Root")},style:Sn.link},l.createElement(G.a,{style:Sn.linkText},"Go to home screen!")))}var Sn=H.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}});function Pn(e){var t=e.navigation,n=Object(l.useState)([]),r=d()(n,2),o=r[0],a=r[1],i=Object(l.useState)(!0),s=d()(i,2),u=s[0],m=s[1],f=Object(l.useState)(0),y=d()(f,2),g=y[0],h=y[1],b=Ne();if(Object(l.useEffect)((function(){null!=b&&b.login&&function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",be(e,"GET","users/~me/notifications").then((function(e){return e.json()})).then((function(e){return e.map((function(e){return{unseen:(t=e).unseen,replyId:t.reply.id,origin:t.comment?{type:"reply",id:t.comment}:{type:"post",id:t.post.id},postId:t.post.id};var t}))})));case 1:case"end":return t.stop()}}),null,null,null,Promise)}(b).then(a).then((function(){return m(!1)}))}),[g]),Object(l.useEffect)((function(){return t.addListener("focus",(function(){return h((function(e){return e+1}))}))}),[]),null==b||!b.login)return c.a.createElement(Vt,null);return c.a.createElement(N.a,{style:kn.container,data:o,renderItem:function(e){var t=e.item;return c.a.createElement(Tn,{item:t})},keyExtractor:function(e,t){return e.replyId+"-"+t},refreshing:u,onRefresh:function(){m(!0),h((function(e){return e+1}))}})}var Tn=function(e){var t=e.item,n=st(t.postId),r=yn("reply"==t.origin.type?t.origin.id:void 0),o=yn(t.replyId),a=J(),i=Object(Lt.q)();return n&&o&&("reply"!==t.origin.type||r)?c.a.createElement(z.a,{style:[kn.item,{borderBottomColor:a.secondaryBackground}],onPress:function(){var e="reply"===t.origin.type?[t.origin.id,t.replyId]:[t.replyId];i.navigate("Post",{postId:t.postId,highlightedReplies:e})}},c.a.createElement(Q,null,"New reply to your ","post"==t.origin.type?"Post":"Reply"),c.a.createElement(Q,{style:kn.title},n.title),c.a.createElement(ct,{name:n.author.username,host:n.author.host,local:n.author.local,showHost:"only_foreign",colorize:"never",userId:n.author.id}),"reply"===t.origin.type&&r?c.a.createElement(c.a.Fragment,null,c.a.createElement(Z,{style:[kn.level1,{borderColor:a.secondaryText}]},c.a.createElement(ct,{name:r.author.username,host:r.author.host,local:r.author.local,showHost:"only_foreign",colorize:"only_foreign",userId:r.author.id}),c.a.createElement(rt,{contentHtml:r.content_html,contentText:r.content_text})),c.a.createElement(Z,{style:[kn.level2,{borderColor:a.tint,backgroundColor:a.secondaryBackground}]},c.a.createElement(ct,{name:o.author.username,host:o.author.host,local:o.author.local,showHost:"only_foreign",colorize:"only_foreign"}),c.a.createElement(rt,{contentHtml:o.content_html,contentText:o.content_text}))):c.a.createElement(c.a.Fragment,null,c.a.createElement(Z,{style:[kn.level1,{borderColor:a.tint,backgroundColor:a.secondaryBackground}]},c.a.createElement(ct,{name:o.author.username,host:o.author.host,local:o.author.local,showHost:"only_foreign",colorize:"only_foreign"}),c.a.createElement(rt,{contentHtml:o.content_html,contentText:o.content_text}))),c.a.createElement(Z,{style:kn.community},c.a.createElement(ct,{name:n.community.name,host:n.community.host,local:n.community.local,showHost:"always",colorize:"never",newLine:!0}))):null},kn=H.a.create({container:{flex:1},item:{borderBottomWidth:5,padding:15},title:{fontSize:20,marginTop:15},level1:{marginTop:15,borderLeftWidth:2,paddingLeft:15,padding:5},level2:{marginTop:5,marginLeft:15,borderLeftWidth:2,paddingLeft:15,padding:5},name:{fontWeight:"600",marginBottom:3},thin:{fontWeight:"200"},community:{marginTop:15}});function Cn(e){var t=e.navigation,n=Object(l.useState)(""),r=d()(n,2),o=r[0],a=r[1],i=Object(l.useState)(""),s=d()(i,2),u=s[0],m=s[1],f=J(),y=Ne();if(!y)return null;return c.a.createElement(Z,{style:In.root},c.a.createElement(q.a,{style:[In.input,{fontSize:20,color:f.text}],placeholder:"Community Name",placeholderTextColor:f.placeholderText,value:o,onChangeText:a}),o.length>=4?c.a.createElement(c.a.Fragment,null,c.a.createElement(q.a,{style:[In.input,{color:f.text}],placeholder:"Description (Optional)",placeholderTextColor:f.placeholderText,value:u,onChangeText:m}),c.a.createElement(zt.a,{title:"Submit",color:f.tint,onPress:function(){null!=y&&y.login&&function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"POST","communities",{name:t}).then((function(e){return e.json()})));case 1:case"end":return n.stop()}}),null,null,null,Promise)}(y,o).then((function(e){var n,r;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=e.community.id,!u){o.next=4;break}return o.next=4,p.a.awrap(xe(y,n,u));case 4:return o.next=6,p.a.awrap(je(y,n));case 6:return o.next=8,p.a.awrap(we(y,n));case 8:r=o.sent,t.replace("Community",{community:r});case 10:case"end":return o.stop()}}),null,null,null,Promise)})).catch((function(e){return M.a.alert("Failed to create community",e)}))},accessibilityLabel:"Create new community"})):c.a.createElement(Q,null,o.length>0&&4-o.length))}var In=H.a.create({root:{flex:1,alignItems:"flex-start",padding:15,height:"100%",width:"100%"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},inputContainer:{width:"100%",padding:20},input:{paddingVertical:10,width:"100%",borderRadius:8},item:{paddingHorizontal:20,paddingVertical:10,marginHorizontal:20,marginBottom:1}});function zn(e){var t=e.navigation,n=e.route,r=Object(l.useState)(!1),o=d()(r,2),a=o[0],i=o[1],s=Object(l.useState)(""),u=d()(s,2),m=u[0],f=u[1],y=Object(l.useState)(),g=d()(y,2),h=g[0],b=g[1],v=Object(l.useState)(""),E=d()(v,2),w=E[0],O=E[1],j=J();return c.a.createElement(z.a,{style:{flex:1},onPress:function(){return"web"!==I.a.OS&&_t.a.dismiss()}},c.a.createElement(Dt.a,{style:_n.root,behavior:"padding"},c.a.createElement(z.a,null,c.a.createElement(Q,null,n.params.node)),a?c.a.createElement(c.a.Fragment,null,h?c.a.createElement(c.a.Fragment,null,c.a.createElement(ee,{placeholder:"New Password",style:_n.input,value:w,onChangeText:O,autoCapitalize:"none",secureTextEntry:!0,textContentType:"password",autoCompleteType:"password"}),c.a.createElement(Z,{style:_n.actionButtons},c.a.createElement(zt.a,{title:"Go Back",onPress:function(){return i(!1)},color:j.secondaryTint}),c.a.createElement(zt.a,{title:"Submit",onPress:function(){return w?h?void(e={apiUrl:"https://"+n.params.node+"/api/unstable"},r=h,o=w,p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",be(e,"POST","forgot_password/keys/"+r+"/reset",{new_password:o},!0));case 1:case"end":return t.stop()}}),null,null,null,Promise)).then((function(){return t.popToTop()})):M.a.alert("No key","Fail. This shouldn't happen"):M.a.alert("Password required");var e,r,o},color:j.tint}))):c.a.createElement(ee,{placeholder:"Key",style:_n.input,onChangeText:function(e){e.length<6||function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"GET","forgot_password/keys/"+t,void 0,!0));case 1:case"end":return n.stop()}}),null,null,null,Promise)}({apiUrl:"https://"+n.params.node+"/api/unstable"},e).then((function(){return b(e)}))},autoCapitalize:"none"})):c.a.createElement(c.a.Fragment,null,c.a.createElement(ee,{style:_n.input,placeholder:"Email Address",value:m,onChangeText:f,keyboardType:"email-address",textContentType:"emailAddress",autoCompleteType:"email",returnKeyType:"go",autoCapitalize:"none"}),c.a.createElement(zt.a,{title:"Submit",onPress:function(){if(!m)return M.a.alert("Email address required","An email with a password reset key will be emailed to you");(function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",be(e,"POST","forgot_password/keys",{email_address:t},!0));case 1:case"end":return n.stop()}}),null,null,null,Promise)})({apiUrl:"https://"+n.params.node+"/api/unstable"},m).then((function(){i(!0)})).catch((function(e){return M.a.alert("Failed to send reset key",e)}))},color:j.tint}))))}var _n=H.a.create({root:{flex:1,alignItems:"center",justifyContent:"center",padding:30},input:{width:"100%",paddingVertical:10,paddingHorizontal:15,marginTop:15},actionButtons:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"space-around"}});function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bn(e){var t=e.navigation,n=e.route.params.community,r=Object(l.useState)(n.description||""),o=d()(r,2),a=o[0],i=o[1],s=J(),u=Ne();return c.a.createElement(Dt.a,{behavior:"ios"===I.a.OS?"padding":"height"},c.a.createElement(z.a,{style:Rn.root,onPress:function(){return"web"!==I.a.OS&&_t.a.dismiss()}},c.a.createElement(ct,{name:n.name,host:n.host,local:n.local,showHost:"always",newLine:!0,style:Rn.title}),c.a.createElement(ee,{style:Rn.input,multiline:!0,placeholder:"Add a description",value:a,onChangeText:i}),c.a.createElement(zt.a,{title:"Submit",color:s.tint,onPress:function(){u&&xe(u,n.id,a).then((function(){return we(u,n.id)})).then((function(e){return t.navigate("Community",{community:Ln(Ln({},e),{},{description:a})})})).catch((function(e){return M.a.alert("Failed to edit community",e)}))}})))}var Rn=H.a.create({root:{padding:20,paddingBottom:100},title:{fontSize:20,marginVertical:10},input:{marginVertical:20,minHeight:100}}),Vn=n(383);function Hn(e){var t=e.colorScheme;return c.a.createElement(S.a,{linking:V,theme:"dark"===t?P.a:T.a},c.a.createElement(Fn,null))}var Nn=Object(k.a)();function Fn(){var e=Object(_.a)();return c.a.createElement(Nn.Navigator,null,c.a.createElement(Nn.Screen,{name:"Root",component:e.width<1200?Mn:An,options:{headerShown:!1}}),c.a.createElement(Nn.Screen,{name:"Web",component:wn}),c.a.createElement(Nn.Screen,{name:"Post",component:wn}),c.a.createElement(Nn.Screen,{name:"Reply",component:cn}),c.a.createElement(Nn.Screen,{name:"Community",component:nn}),c.a.createElement(Nn.Screen,{name:"NewCommunity",component:Cn}),c.a.createElement(Nn.Screen,{name:"EditCommunity",component:Bn}),c.a.createElement(Nn.Screen,{name:"Settings",component:tn}),c.a.createElement(Nn.Screen,{name:"ForgotPassword",component:zn,options:{title:"Forgot Password"}}),c.a.createElement(Nn.Screen,{name:"NotFound",component:xn,options:{title:"Oops!"}}),c.a.createElement(Nn.Group,{screenOptions:{presentation:"modal"}},c.a.createElement(Nn.Screen,{name:"Modal",component:wn})))}var Wn=Object(x.a)();function Mn(e){var t=e.navigation,n=Object(l.useState)("hot"),r=d()(n,2),o=r[0],a=r[1],i=Ne(),s=E();return Object(l.useEffect)((function(){((null==i?void 0:i.apiVersion)||0)<10&&"top"==o&&(a("hot"),t.navigate("FeedScreen",{sort:"hot"}))}),[null==i?void 0:i.apiVersion]),c.a.createElement(Wn.Navigator,{initialRouteName:"FeedScreen",screenOptions:{tabBarActiveTintColor:L[s].tint,tabBarShowLabel:!1}},c.a.createElement(Wn.Screen,{name:"FeedScreen",component:At,initialParams:{sort:o},options:function(e){var t=e.navigation;return{title:"Hoot",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"newspaper-outline",color:t})},headerRight:function(){return c.a.createElement(z.a,{onPress:function(){if(console.log(i),"ios"==I.a.OS)C.ActionSheetIOS.showActionSheetWithOptions({options:["Cancel","Hot","New",((null==i?void 0:i.apiVersion)||0)>=10?"Top":""].filter((function(e){return!!e})),title:"Sort by:",cancelButtonIndex:0},(function(e){var n=[o,"hot","new","top"][e];a(n),t.navigate("FeedScreen",{sort:n})}));else{var e={top:"hot",hot:"new",new:((null==i?void 0:i.apiVersion)||0)<10?"hot":"top"}[o];a(e),t.navigate("FeedScreen",{sort:e})}},style:function(e){return{opacity:e.pressed?.5:1}}},c.a.createElement(j.a,{name:{hot:"flame-outline",new:"time-outline",top:"trophy-outline"}[o],size:25,color:L[s].tint,style:{marginRight:15}}))}}}}),c.a.createElement(Wn.Screen,{name:"SearchScreen",component:Kt,options:{title:"Communities",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"search-outline",color:t})}}}),c.a.createElement(Wn.Screen,{name:"NewPostScreen",component:Zt,initialParams:{community:void 0},options:{title:"New Post",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"add-outline",color:t,size:40})}}}),c.a.createElement(Wn.Screen,{name:"NotificationScreen",component:Pn,options:{title:"Notifications",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"notifications-outline",color:t})}}}),c.a.createElement(Wn.Screen,{name:"ProfileScreen",component:Yt,options:{title:"Profile",tabBarIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"person-circle-outline",color:t})},headerLeft:function(){return c.a.createElement(z.a,{onPress:function(){t.navigate("Settings")},style:function(e){return{opacity:e.pressed?.5:1}}},c.a.createElement(j.a,{name:"cog-outline",size:25,color:L[s].secondaryText,style:{marginLeft:15}}))}}}))}var Un=Object(Vn.a)();function An(e){var t=e.navigation,n=Object(l.useState)("hot"),r=d()(n,2),o=r[0],a=r[1],i=Ne(),s=E();return c.a.createElement(Un.Navigator,{initialRouteName:"FeedScreen",screenOptions:{drawerActiveTintColor:"orange",drawerType:"permanent"}},c.a.createElement(Un.Screen,{name:"FeedScreen",component:At,initialParams:{sort:o},options:function(e){var t=e.navigation;return{title:"Hoot",drawerIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"newspaper-outline",color:t})},headerRight:function(){return c.a.createElement(z.a,{onPress:function(){var e={top:"hot",hot:"new",new:((null==i?void 0:i.apiVersion)||0)<10?"hot":"top"}[o];a(e),t.navigate("FeedScreen",{sort:e})},style:function(e){return{opacity:e.pressed?.5:1}}},c.a.createElement(j.a,{name:{hot:"flame-outline",new:"time-outline",top:"arrow-up-outline"}[o],size:25,color:L[s].tint,style:{marginRight:15}}))}}}}),c.a.createElement(Un.Screen,{name:"SearchScreen",component:Kt,options:{title:"Communities",drawerIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"search-outline",color:t})}}}),c.a.createElement(Un.Screen,{name:"NewPostScreen",component:Zt,initialParams:{community:void 0},options:{title:"New Post",drawerIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"add-outline",color:t,size:40})}}}),c.a.createElement(Un.Screen,{name:"NotificationScreen",component:Pn,options:{title:"Notifications",drawerIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"notifications-outline",color:t})}}}),c.a.createElement(Un.Screen,{name:"ProfileScreen",component:Yt,options:{title:"Profile",drawerIcon:function(e){var t=e.color;return c.a.createElement(Gn,{name:"person-circle-outline",color:t})},headerRight:function(){return c.a.createElement(z.a,{onPress:function(){t.navigate("Settings")},style:function(e){return{opacity:e.pressed?.5:1}}},c.a.createElement(j.a,{name:"settings-outline",size:25,color:L[s].secondaryText,style:{marginRight:15}}))}}}))}function Gn(e){var t=e.size||30;return c.a.createElement(j.a,O()({size:t,style:{marginBottom:-3,height:t,width:t}},e))}var $n=Object(ce.a)({reducer:{lotide:kt,posts:he,replies:Je}});function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kn(){var e=function(){var e=l.useState(!1),t=d()(e,2),r=t[0],o=t[1];return l.useEffect((function(){p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g.b(),e.next=4,p.a.awrap(y.b(b(b({},f.a.font),{},{"space-mono":n(299)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,o(!0),g.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}(),t=E(),r=Ne(),o=Object(le.b)();function u(e){vt(e).then((function(){return a.a.setItem("@lotide_ctx",JSON.stringify(e))})).then((function(){return o(Tt(e))}))}return Object(l.useEffect)((function(){bt().then((function(e){void 0!==e&&o(Tt(e))}))}),[]),Object(l.useEffect)((function(){null!=r&&r.apiUrl&&(Te(r).then((function(e){if(console.log(r),console.log("version",e.apiVersion),e.apiVersion<8||e.apiVersion>10)throw"Bad version";e.apiVersion!=r.apiVersion&&u(Jn(Jn({},r),{},{apiVersion:e.apiVersion}))})).catch((function(e){var t;M.a.alert("Failed to login",e),Ot((null==(t=r.login)?void 0:t.user.username)+"@"+r.apiUrl).then((function(){return u({})}))})),r.login&&Oe(r,r.login.user.id).catch((function(){var e;Ot((null==(e=r.login)?void 0:e.user.username)+"@"+r.apiUrl).then((function(){return u({})}))})))}),[null==r?void 0:r.apiUrl,null==r?void 0:r.apiVersion]),e?c.a.createElement(s.b,null,c.a.createElement(Hn,{colorScheme:t}),c.a.createElement(i.a,null)):null}t.a=function(){return c.a.createElement(le.a,{store:$n},c.a.createElement(Kn,null))}},281:function(e,t,n){e.exports=n(364)},299:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},315:function(e,t){}},[[281,1,2]]]);
//# sourceMappingURL=app.12e7a119.chunk.js.map